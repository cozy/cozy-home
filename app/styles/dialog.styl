//Global styles for dialog
$fullbleed
    position fixed
    bottom   0
    top      0
    left     0
    right    0

$content-center
    display         flex
    align-items     center
    justify-content center


$dialog
    @extend    $fullbleed
    overflow-x hidden
    overflow-y auto
    z-index    100


    [role=separator]
        z-index 1
        @extend $fullbleed


    .wrapper
        @extend    $content-center
        min-height 100vh
        padding    3em 1em
        box-sizing border-box


    [role=contentinfo]
        z-index    2
        flex       0 1 (960/basefont)rem
        position   relative
        box-sizing border-box
        display    flex

        @media (max-width: (800/basefont)rem)
            flex-direction column
            height 90vh

        background-color white
        border           em(1px) solid grey-01
        border-radius    em(5px)
        box-shadow       0 1px 3px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)


$alertdialog
    @extend $dialog

    [role=contentinfo]
        flex-basis (420/basefont)rem
        padded     20px

        flex-direction column

        transform  translateY(calc((50vh + 55%) * -1))
        transition transform 400ms ease-out


    &[aria-busy=true] [role=contentinfo]
        transform translateY(-50%)


    .actions
        display        flex
        flex-direction row-reverse

        li
            flex 1

            &:not(:first-child)
                margin-right 10px

        button
        [role=button]
            width 100%


[role=dialog]
    @extend $dialog

    [role=separator]
        cursor           pointer
        background-color alpha(grey-07, .75)

    .wrapper
        min-height 100vh
        padding    3em 1em
        box-sizing border-box

    .close-button
        height   3em
        width    3em
        cursor   pointer
        position absolute
        right    2.25em
        top      2.25em
        &:after, &:before
            position         absolute
            content          ' '
            height           2.5em
            width            2px
            background-color white
            margin           0em 1.5em
        &:after
            transform rotate(-45deg);
        &:before
            transform rotate(45deg);

    [role=contentinfo]
        overflow       initial
        flex-direction column
        border         none
        flex-basis     80rem
        box-shadow     0 6px 18px 0 alpha(black, .22), 0 1px 3px 0 alpha(black, .16)

        .dialog-header
            height                  7em
            overflow                hidden
            border-top-left-radius  inherit
            border-top-right-radius inherit

        .dialog-content

            .account-connection
            .account-management
                display flex

                h3
                    margin 2em 0 .5em
                    font-size(24px)

                a:not([role=button])
                    color           dodger-blue
                    text-transform  uppercase
                    text-decoration none
                    cursor          pointer

                p
                    margin 0.5em 0

            .account-connection
                > div
                    width          50%
                    padding-bottom 2em

            .account-management
                width  70%
                margin auto

            .account-description
                background-color grey-10
                padding          0 2em 0 15%
                > p
                    margin-top 2em

            .account-datas
                display     flex
                flex-wrap   wrap
                align-items stretch
                padding-top .5em

            .account-data
                flex           30% 0 0
                padding-bottom 1em
                text-align     center

            .account-dataIcon
                display    block
                width      100%
                max-width  em(50px)
                max-height em(50px)
                margin     0 auto 1em

            .account-login
                padding 0 15% 0 2em

            .account-list
                width 25%
                ul
                    margin 2.4em 1.5em 0.5em -3em
                li
                    padding       0
                    color         grey-08
                    font-weight   bold
                    text-overflow ellipsis
                    white-space   nowrap
                    overflow      hidden
                    a
                        display         block
                        padding         .5em 0em .5em 1em
                        width           calc(100% - 1em)
                    &.selected
                        background-color grey-10
                        a
                            color grey-08

                .add-button
                    display     block
                    margin      0 1.5em 0 -.5em
                    padding     .5em 0 .5em 1em

            .account-config
                .account-field
                    max-width 80%

        .account-form
            margin-bottom 1em

        .account-form.error
            .account-field
                input
                    border      1px solid pomegranate
                    background  none

        // Onboarding form styles
        // TODO: move into cozy-ui ?
        .account-field
            position relative
            margin   1em 0 0.5em

            // Managing input width with flex
            display         flex
            flex-direction  column

            button.password-visibility
                position absolute
                top      0
                right    0

            button.icon
                background none
                padding    0em
                width      1.3em
                height     1.3em
                display    block

                svg
                    width  1.3em
                    height 1.3em

            label
                display        block
                text-transform uppercase
                color          grey-05
                font-size      .9em
                padding        .55em 0

            .error-label
                display none
                color   pomegranate

            input[type=text]
            input[type=password]
            select
                display       inline-block
                padding       0.75em 0.75em 0.9em
                border-radius 4px
                box-sizing    border-box
                border        1px solid grey-03
                background    grey-10
                color         black
                &::placeholder
                    color     grey-07
                    font-size 1.05em
                &:focus
                    border     1px solid dodger-blue
                    background none
                &:hover
                    border 1px solid grey-06
                &.error
                    border     1px solid pomegranate
                    background none

            select
                -moz-appearance     none
                -webkit-appearance  none
                appearance          none
                background-image    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16px' height='16px'><polyline points='14.764,4.966 8.053,11.677 1.342,4.966'/></svg>")
                background-position right 8px center
                background-repeat   no-repeat
                &::-ms-expand
                    display none

        .account-form-controls
            margin-top 2em

            button
                width 100%

        .account-management-controls
            width      70%
            padding     0 15%
            display    flex
            border-top 1px solid grey-04

            button
                width  50%
                margin 0.4em


        [role=button]
        button
            // mutualize behavior between button and a
            box-sizing        border-box
            border            0
            display           block
            padding           0.9em 0.75em
            min-height        (40/basefont)em
            border-radius     4px
            background-color  dodger-blue
            font-family       "Source Sans Pro", sans-serif
            text-align        center
            text-transform    uppercase
            color             white
            text-decoration   none

            &.cancel
                background-color grey-10
                color            grey-08

            &.danger
                background-color rgba(255, 93, 70, 0.1)
                border           solid 1px rgba(255, 93, 71, 0.1)
                color            #ff5d47
                margin           1em 0 3em
                width            80%

            &.flat
                background      none
                padding         0em
                min-height      0
                color           dodger-blue
                text-transform  uppercase
                text-decoration none
                cursor          pointer

            &[disabled]
            &[aria-disabled=true]
                opacity .5
                cursor  default

            &[aria-busy=true]
                position relative

                &::after
                    position     static
                    width        (16/basefont)em
                    height       (16/basefont)em
                    margin-left  (8/basefont)em
                    margin-right (-24/basefont)em
                    @extend      $icon-spinner-white


        .errors
            color pomegranate
    // specific to use case dialog
    &.use-case-dialog
        [role=contentinfo]
            flex-basis 75rem
            > div
                > h3
                    font-size 32px
                    margin    1em 0em .5em 1.5em

                > p
                    margin-left   3em
                    margin-bottom 2em
                .accounts-list
                    margin-bottom   5em
                    margin-left     .5em
                    justify-content center

    // specific to account dialog
    &.connector-dialog
        padding-top .5em
        .dialog-header
            svg
                height 4em
                width  100%
                margin 1.5em 0em
