{"version":3,"file":"cozy.b7c7aee1f256b9a2.hot-update.js","sources":["/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/stylesheet.css","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantDesktop.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantIcon/ExpertIcon.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantIcon/TwakeAssistantIconColor.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantMobile.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantProvider.js"],"sourcesContent":["// extracted by css-extract-rspack-plugin\nexport {};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = undefined;\n        // 1761295114498\n        var cssReload = require(\"../../@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _useExtendI18n = _interopRequireDefault(require(\"cozy-ui/transpiled/react/providers/I18n/useExtendI18n\"));\n\nvar _AssistantProvider = _interopRequireDefault(require(\"./AssistantProvider\"));\n\nvar _SearchBar = _interopRequireDefault(require(\"./Search/SearchBar\"));\n\nvar _SearchProvider = _interopRequireDefault(require(\"./Search/SearchProvider\"));\n\nvar _locales = require(\"../locales\");\n\nvar AssistantDesktop = function AssistantDesktop(_ref) {\n  var componentsProps = _ref.componentsProps,\n      _ref$searchOptions = _ref.searchOptions,\n      searchOptions = _ref$searchOptions === void 0 ? {} : _ref$searchOptions;\n  (0, _useExtendI18n.default)(_locales.locales);\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"u-mh-auto u-w-100 u-maw-100\"\n  }, /*#__PURE__*/_react.default.createElement(_AssistantProvider.default, null, /*#__PURE__*/_react.default.createElement(_SearchProvider.default, {\n    searchOptions: searchOptions\n  }, /*#__PURE__*/_react.default.createElement(_SearchBar.default, {\n    componentsProps: componentsProps\n  }))));\n};\n\nAssistantDesktop.propTypes = {\n  componentsProps: _propTypes.default.shape({\n    SearchBarDesktop: _propTypes.default.shape({\n      elevation: _propTypes.default.number,\n      size: _propTypes.default.string,\n      hasHalfBorderRadius: _propTypes.default.bool,\n      className: _propTypes.default.string,\n      disabledHover: _propTypes.default.bool\n    })\n  })\n};\nvar _default = AssistantDesktop;\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpertIcon = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar ExpertIcon = function ExpertIcon(props) {\n  return /*#__PURE__*/_react.default.createElement(\"svg\", (0, _extends2.default)({\n    viewBox: \"0 0 24 24\",\n    fill: \"none\"\n  }, props), /*#__PURE__*/_react.default.createElement(\"path\", {\n    d: \"M15.088 18.923a.62.62 0 0 1 .504.159l.72.676L15.096 23l-.785-1.626-1.68.758 1.14-3.03zm3.824 0 1.361.186a.6.6 0 0 0 .284-.03l1.15 3.053-1.682-.758L19.242 23l-1.307-3.477.473-.441a.62.62 0 0 1 .504-.16M16.58 9.164a.62.62 0 0 1 .84 0l.719.673a.62.62 0 0 0 .505.16l.989-.138a.604.604 0 0 1 .68.479l.171.952c.033.177.148.33.312.415l.883.453c.287.148.402.49.26.774l-.439.868a.57.57 0 0 0 0 .513l.439.869a.577.577 0 0 1-.26.773l-.883.453a.59.59 0 0 0-.312.416l-.172.952a.603.603 0 0 1-.68.478l-.988-.135a.62.62 0 0 0-.505.157l-.718.673a.62.62 0 0 1-.84 0l-.72-.673a.62.62 0 0 0-.504-.157l-.988.135a.603.603 0 0 1-.68-.478l-.173-.952a.59.59 0 0 0-.312-.416l-.883-.453a.577.577 0 0 1-.26-.773l.439-.869a.57.57 0 0 0 0-.513l-.438-.868a.577.577 0 0 1 .26-.774l.882-.453a.59.59 0 0 0 .312-.415l.172-.952a.604.604 0 0 1 .681-.479l.988.137a.62.62 0 0 0 .504-.16zM11.022 13q.037.236.148.462l.316.64-.316.642a1.66 1.66 0 0 0 .717 2.198l.637.338.125.705c.036.2.107.384.204.55l-.171.465H3v-2c0-2.21 3.58-4 8-4zM17 10.886c-1.81 0-3.278 1.42-3.278 3.17 0 1.752 1.468 3.173 3.278 3.173 1.81-.001 3.277-1.421 3.277-3.172s-1.467-3.17-3.277-3.171m-.346 1.026c.109-.323.582-.323.69 0l.31.922a.36.36 0 0 0 .344.243h1.002c.351 0 .497.434.214.634l-.81.57a.35.35 0 0 0-.134.393l.311.92c.108.324-.274.594-.559.394l-.81-.57a.37.37 0 0 0-.426 0l-.81.57c-.285.2-.668-.07-.559-.393l.31-.921a.35.35 0 0 0-.132-.394l-.81-.57c-.284-.199-.138-.633.213-.633h1.002a.36.36 0 0 0 .345-.243zM11 3a4 4 0 0 1 3.536 5.866h-.01a1.67 1.67 0 0 0-1.84 1.197l-.004.012-.003.013-.025.112-.003.01-.002.013-.08.455A3.996 3.996 0 0 1 7 7a4 4 0 0 1 4-4\"\n  }));\n};\n\nexports.ExpertIcon = ExpertIcon;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TwakeAssistantIconColor = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar TwakeAssistantIconColor = function TwakeAssistantIconColor(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", (0, _extends2.default)({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 18,\n    height: 18,\n    viewBox: \"0 0 18 18\"\n  }, props), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#4A1616\",\n    d: \"M7.452 11.623a1.5 1.5 0 0 0-1.078-1.077L1.773 9.359a.375.375 0 0 1 0-.722l4.6-1.187a1.5 1.5 0 0 0 1.079-1.077l1.186-4.601a.375.375 0 0 1 .722 0l1.186 4.601a1.5 1.5 0 0 0 1.078 1.078l4.601 1.186a.375.375 0 0 1 0 .723l-4.601 1.186a1.5 1.5 0 0 0-1.078 1.077L9.36 16.225a.375.375 0 0 1-.723 0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"url(#a)\",\n    d: \"M7.452 11.623a1.5 1.5 0 0 0-1.078-1.077L1.773 9.359a.375.375 0 0 1 0-.722l4.6-1.187a1.5 1.5 0 0 0 1.079-1.077l1.186-4.601a.375.375 0 0 1 .722 0l1.186 4.601a1.5 1.5 0 0 0 1.078 1.078l4.601 1.186a.375.375 0 0 1 0 .723l-4.601 1.186a1.5 1.5 0 0 0-1.078 1.077L9.36 16.225a.375.375 0 0 1-.723 0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"url(#b)\",\n    d: \"M7.452 11.623a1.5 1.5 0 0 0-1.078-1.077L1.773 9.359a.375.375 0 0 1 0-.722l4.6-1.187a1.5 1.5 0 0 0 1.079-1.077l1.186-4.601a.375.375 0 0 1 .722 0l1.186 4.601a1.5 1.5 0 0 0 1.078 1.078l4.601 1.186a.375.375 0 0 1 0 .723l-4.601 1.186a1.5 1.5 0 0 0-1.078 1.077L9.36 16.225a.375.375 0 0 1-.723 0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#4A1616\",\n    d: \"M14.998 1.682c.316 0 .571.256.571.572v.928h.929a.572.572 0 0 1 0 1.143h-.929v.929a.572.572 0 0 1-1.143 0v-.929h-.928a.572.572 0 0 1 0-1.143h.928v-.928c0-.316.256-.572.572-.572\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"url(#c)\",\n    d: \"M14.998 1.682c.316 0 .571.256.571.572v.928h.929a.572.572 0 0 1 0 1.143h-.929v.929a.572.572 0 0 1-1.143 0v-.929h-.928a.572.572 0 0 1 0-1.143h.928v-.928c0-.316.256-.572.572-.572\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"url(#d)\",\n    d: \"M14.998 1.682c.316 0 .571.256.571.572v.928h.929a.572.572 0 0 1 0 1.143h-.929v.929a.572.572 0 0 1-1.143 0v-.929h-.928a.572.572 0 0 1 0-1.143h.928v-.928c0-.316.256-.572.572-.572\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#4A1616\",\n    d: \"M2.998 12.178c.315 0 .571.256.571.572v.178h.18a.572.572 0 0 1-.001 1.143H3.57v.179a.572.572 0 0 1-1.143 0v-.179h-.178a.572.572 0 0 1 0-1.143h.178v-.178c0-.316.256-.572.572-.572\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"url(#e)\",\n    d: \"M2.998 12.178c.315 0 .571.256.571.572v.178h.18a.572.572 0 0 1-.001 1.143H3.57v.179a.572.572 0 0 1-1.143 0v-.179h-.178a.572.572 0 0 1 0-1.143h.178v-.178c0-.316.256-.572.572-.572\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"url(#f)\",\n    d: \"M2.998 12.178c.315 0 .571.256.571.572v.178h.18a.572.572 0 0 1-.001 1.143H3.57v.179a.572.572 0 0 1-1.143 0v-.179h-.178a.572.572 0 0 1 0-1.143h.178v-.178c0-.316.256-.572.572-.572\"\n  }), /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"a\",\n    x1: 16.5,\n    x2: 1.5,\n    y1: 10.248,\n    y2: 10.248,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.13,\n    stopColor: \"#A033FF\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.61,\n    stopColor: \"#0094FF\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4FB500\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"b\",\n    x1: 8.375,\n    x2: 3.687,\n    y1: 6.186,\n    y2: 15.56,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#FFD600\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.563,\n    stopColor: \"#FFC700\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"c\",\n    x1: 17.069,\n    x2: 12.926,\n    y1: 3.849,\n    y2: 3.849,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.13,\n    stopColor: \"#A033FF\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.61,\n    stopColor: \"#0094FF\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4FB500\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"d\",\n    x1: 14.825,\n    x2: 14.704,\n    y1: 3.539,\n    y2: 4.416,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#FFD600\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.563,\n    stopColor: \"#FFC700\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"e\",\n    x1: 4.319,\n    x2: 1.676,\n    y1: 13.595,\n    y2: 13.595,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.13,\n    stopColor: \"#A033FF\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.61,\n    stopColor: \"#0094FF\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4FB500\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"f\",\n    x1: 2.887,\n    x2: 2.703,\n    y1: 13.285,\n    y2: 14.139,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#FFD600\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.563,\n    stopColor: \"#FFC700\"\n  }))));\n};\n\nexports.TwakeAssistantIconColor = TwakeAssistantIconColor;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.AssistantMobile = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _Icon = _interopRequireDefault(require(\"cozy-ui/transpiled/react/Icon\"));\n\nvar _Magnifier = _interopRequireDefault(require(\"cozy-ui/transpiled/react/Icons/Magnifier\"));\n\nvar _SearchBar = _interopRequireDefault(require(\"cozy-ui/transpiled/react/SearchBar\"));\n\nvar _useExtendI18n = _interopRequireDefault(require(\"cozy-ui/transpiled/react/providers/I18n/useExtendI18n\"));\n\nvar _locales = require(\"../locales\");\n\nvar styles = {\n  \"searchBarDesktop--result\": \"styles__searchBarDesktop--result___2bQQy\",\n  \"suggestionsPlaceholder\": \"styles__suggestionsPlaceholder___y-vsv\",\n  \"search-bar-icon\": \"styles__search-bar-icon___1affF\"\n};\n\nvar AssistantMobile = function AssistantMobile(_ref) {\n  var componentsProps = _ref.componentsProps;\n  var navigate = (0, _reactRouterDom.useNavigate)();\n\n  var _useLocation = (0, _reactRouterDom.useLocation)(),\n      pathname = _useLocation.pathname;\n\n  (0, _useExtendI18n.default)(_locales.locales);\n  return /*#__PURE__*/_react.default.createElement(_SearchBar.default, (0, _extends2.default)({}, componentsProps === null || componentsProps === void 0 ? void 0 : componentsProps.SearchBar, {\n    size: \"medium\",\n    icon: /*#__PURE__*/_react.default.createElement(_Icon.default, {\n      className: (0, _classnames.default)('u-ml-1 u-mr-half', styles['search-bar-icon']),\n      icon: _Magnifier.default,\n      size: 16\n    }),\n    type: \"button\",\n    onClick: function onClick() {\n      return navigate(\"connected/search?returnPath=\".concat(pathname));\n    } // FIXME this route is related to home app\n\n  }));\n};\n\nexports.AssistantMobile = AssistantMobile;\nAssistantMobile.propTypes = {\n  componentsProps: _propTypes.default.shape({\n    SearchBar: _propTypes.default.shape({\n      className: _propTypes.default.string\n    })\n  })\n};\nvar _default = AssistantMobile;\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useAssistant = exports.default = exports.AssistantContext = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _set = _interopRequireDefault(require(\"lodash/set\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _cozyClient = require(\"cozy-client\");\n\nvar _useRealtime3 = _interopRequireDefault(require(\"cozy-realtime/dist/useRealtime\"));\n\nvar _helpers = require(\"./helpers\");\n\nvar _queries = require(\"./queries\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar AssistantContext = /*#__PURE__*/_react.default.createContext();\n\nexports.AssistantContext = AssistantContext;\n\nvar useAssistant = function useAssistant() {\n  var context = (0, _react.useContext)(AssistantContext);\n\n  if (!context) {\n    throw new Error('useAssistant must be used within a AssistantProvider');\n  }\n\n  return context;\n};\n\nexports.useAssistant = useAssistant;\n\nvar AssistantProvider = function AssistantProvider(_ref) {\n  var children = _ref.children;\n\n  var _useParams = (0, _reactRouterDom.useParams)(),\n      conversationId = _useParams.conversationId;\n\n  var client = (0, _cozyClient.useClient)();\n\n  var _useState = (0, _react.useState)({\n    message: {},\n    status: 'idle',\n    messagesId: []\n  }),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      assistantState = _useState2[0],\n      setAssistantState = _useState2[1];\n\n  (0, _useRealtime3.default)(client, (0, _defineProperty2.default)({}, _queries.CHAT_CONVERSATIONS_DOCTYPE, {\n    created: function created(res) {\n      (0, _helpers.pushMessagesIdInState)(conversationId, res, setAssistantState);\n    },\n    updated: function updated(res) {\n      (0, _helpers.pushMessagesIdInState)(conversationId, res, setAssistantState);\n    }\n  }), []);\n  (0, _useRealtime3.default)(client, (0, _defineProperty2.default)({}, _queries.CHAT_EVENTS_DOCTYPE, {\n    created: function created(res) {\n      setAssistantState(function (prevState) {\n        // to exclude realtime messages if not relevant to the actual conversation\n        if (!(0, _helpers.isMessageForThisConversation)(res, prevState.messagesId)) {\n          return prevState;\n        }\n\n        if (res.object === 'done') {\n          if (prevState.status !== 'idle') {\n            return _objectSpread(_objectSpread({}, prevState), {}, {\n              status: 'idle'\n            });\n          }\n        }\n\n        if (res.object === 'delta') {\n          var message = (0, _set.default)(prevState.message, res.position, res.content);\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            message: message,\n            status: 'writing'\n          });\n        }\n\n        return prevState;\n      });\n    }\n  }), []);\n  var clearAssistant = (0, _react.useCallback)(function () {\n    return setAssistantState({\n      message: {},\n      status: 'pending',\n      messagesId: []\n    });\n  }, []);\n  var onAssistantExecute = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(_ref2, callback) {\n      var value, conversationId;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              value = _ref2.value, conversationId = _ref2.conversationId;\n\n              if (value) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 3:\n              callback === null || callback === void 0 ? void 0 : callback();\n              clearAssistant();\n              _context.next = 7;\n              return client.stackClient.fetchJSON('POST', \"/ai/chat/conversations/\".concat(conversationId), {\n                q: value\n              });\n\n            case 7:\n              setAssistantState(function (v) {\n                return _objectSpread(_objectSpread({}, v), {}, {\n                  status: 'pending'\n                });\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), [client, clearAssistant]);\n  var value = (0, _react.useMemo)(function () {\n    return {\n      assistantState: assistantState,\n      setAssistantState: setAssistantState,\n      clearAssistant: clearAssistant,\n      onAssistantExecute: onAssistantExecute\n    };\n  }, [assistantState, clearAssistant, onAssistantExecute]);\n  return /*#__PURE__*/_react.default.createElement(AssistantContext.Provider, {\n    value: value\n  }, children);\n};\n\nvar _default = /*#__PURE__*/_react.default.memo(AssistantProvider);\n\nexports.default = _default;"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}