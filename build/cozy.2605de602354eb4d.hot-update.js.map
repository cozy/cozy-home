{"version":3,"file":"cozy.2605de602354eb4d.hot-update.js","sources":["/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/Sources/styles.styl","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/styles.styl","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/ResultMenu/styles.styl","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Search/styles.styl","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Stylus/Conversation.styl","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantDesktop.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantIcon/ExpertIcon.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantIcon/KnowledgeBaseIcon.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantIcon/TwakeAssistantIcon.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantIcon/TwakeAssistantIconColor.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantMobile.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/AssistantProvider.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/ChatAssistantItem.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/ChatConversation.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/ChatItem.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/ChatItemLabel.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/ChatRealtimeAnswer.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/ChatUserItem.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/Conversation.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/ConversationBar.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/ConversationChips.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/ConversationLayout.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/ConversationList.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/Sources/Sources.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/Conversations/Sources/SourcesItem.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/ResultMenu/NoResultItem.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/ResultMenu/NotEnoughItem.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/ResultMenu/ResultMenu.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/ResultMenu/ResultMenuContent.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/components/ResultMenu/ResultMenuItem.js","/Users/vincelinise/Documents/GitHub/cozy-home/node_modules/cozy-search/dist/index.js"],"sourcesContent":["// extracted by css-extract-rspack-plugin\nexport default {\"sourcesItem\":\"node_modules-cozy-search-dist-components-Conversations-Sources-styles__sourcesItem-tB_a2R\"};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = \"{\\\"sourcesItem\\\":\\\"node_modules-cozy-search-dist-components-Conversations-Sources-styles__sourcesItem-tB_a2R\\\"}\";\n        // 1761295113542\n        var cssReload = require(\"../../../../../@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","// extracted by css-extract-rspack-plugin\nexport default {\"conversationBar\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-GQkEEE\",\"conversationBar-input\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-input-SIs7Fw\",\"conversationBarInput\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-input-SIs7Fw\",\"conversationBarSibling\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling-rNqDq3\",\"conversationBarSibling--started\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling--started-DzEAwq\",\"conversationBarSiblingStarted\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling--started-DzEAwq\"};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = \"{\\\"conversationBar\\\":\\\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-GQkEEE\\\",\\\"conversationBar-input\\\":\\\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-input-SIs7Fw\\\",\\\"conversationBarInput\\\":\\\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-input-SIs7Fw\\\",\\\"conversationBarSibling\\\":\\\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling-rNqDq3\\\",\\\"conversationBarSibling--started\\\":\\\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling--started-DzEAwq\\\",\\\"conversationBarSiblingStarted\\\":\\\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling--started-DzEAwq\\\"}\";\n        // 1761295113543\n        var cssReload = require(\"../../../../@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","// extracted by css-extract-rspack-plugin\nexport default {\"resultMenu\":\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-fu31kM\",\"resultMenu-inner\":\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-inner-fFyvIG\",\"resultMenuInner\":\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-inner-fFyvIG\",\"resultMenuItem\":\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenuItem-Zmnd8T\"};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = \"{\\\"resultMenu\\\":\\\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-fu31kM\\\",\\\"resultMenu-inner\\\":\\\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-inner-fFyvIG\\\",\\\"resultMenuInner\\\":\\\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-inner-fFyvIG\\\",\\\"resultMenuItem\\\":\\\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenuItem-Zmnd8T\\\"}\";\n        // 1761295113539\n        var cssReload = require(\"../../../../@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","// extracted by css-extract-rspack-plugin\nexport default {\"searchBarDesktop--result\":\"node_modules-cozy-search-dist-components-Search-styles__searchBarDesktop--result-YboYz0\",\"searchBarDesktopResult\":\"node_modules-cozy-search-dist-components-Search-styles__searchBarDesktop--result-YboYz0\",\"suggestionsPlaceholder\":\"node_modules-cozy-search-dist-components-Search-styles__suggestionsPlaceholder-UrfBlm\",\"search-bar-icon\":\"node_modules-cozy-search-dist-components-Search-styles__search-bar-icon-qjIaoX\",\"searchBarIcon\":\"node_modules-cozy-search-dist-components-Search-styles__search-bar-icon-qjIaoX\"};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = \"{\\\"searchBarDesktop--result\\\":\\\"node_modules-cozy-search-dist-components-Search-styles__searchBarDesktop--result-YboYz0\\\",\\\"searchBarDesktopResult\\\":\\\"node_modules-cozy-search-dist-components-Search-styles__searchBarDesktop--result-YboYz0\\\",\\\"suggestionsPlaceholder\\\":\\\"node_modules-cozy-search-dist-components-Search-styles__suggestionsPlaceholder-UrfBlm\\\",\\\"search-bar-icon\\\":\\\"node_modules-cozy-search-dist-components-Search-styles__search-bar-icon-qjIaoX\\\",\\\"searchBarIcon\\\":\\\"node_modules-cozy-search-dist-components-Search-styles__search-bar-icon-qjIaoX\\\"}\";\n        // 1761295113540\n        var cssReload = require(\"../../../../@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","// extracted by css-extract-rspack-plugin\nexport default {\"conversationApp\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationApp-XOctCg\",\"conversationHeader\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHeader-KiJK8n\",\"conversationLayout\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationLayout-jpyGk4\",\"conversationWindowContainer\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationWindowContainer-ZtLESh\",\"conversationWindow\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationWindow-pCkGUY\",\"conversationContainer\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer-dspnD9\",\"conversationContainer--started\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer--started-y1Gdb3\",\"conversationContainerStarted\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer--started-y1Gdb3\",\"conversationHistory\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory-HUcghx\",\"conversationHistory--open\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--open-cLBanX\",\"conversationHistoryOpen\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--open-cLBanX\",\"conversationHistory--mobile\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--mobile-hZLWmJ\",\"conversationHistoryMobile\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--mobile-hZLWmJ\",\"conversationSwitcher\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher-LiRacX\",\"conversationSwitcher--closed\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher--closed-rUJ0NL\",\"conversationSwitcherClosed\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher--closed-rUJ0NL\"};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = \"{\\\"conversationApp\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationApp-XOctCg\\\",\\\"conversationHeader\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHeader-KiJK8n\\\",\\\"conversationLayout\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationLayout-jpyGk4\\\",\\\"conversationWindowContainer\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationWindowContainer-ZtLESh\\\",\\\"conversationWindow\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationWindow-pCkGUY\\\",\\\"conversationContainer\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer-dspnD9\\\",\\\"conversationContainer--started\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer--started-y1Gdb3\\\",\\\"conversationContainerStarted\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer--started-y1Gdb3\\\",\\\"conversationHistory\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory-HUcghx\\\",\\\"conversationHistory--open\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--open-cLBanX\\\",\\\"conversationHistoryOpen\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--open-cLBanX\\\",\\\"conversationHistory--mobile\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--mobile-hZLWmJ\\\",\\\"conversationHistoryMobile\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--mobile-hZLWmJ\\\",\\\"conversationSwitcher\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher-LiRacX\\\",\\\"conversationSwitcher--closed\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher--closed-rUJ0NL\\\",\\\"conversationSwitcherClosed\\\":\\\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher--closed-rUJ0NL\\\"}\";\n        // 1761295113541\n        var cssReload = require(\"../../../../@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","import PropTypes from 'prop-types';\nimport React from 'react';\nimport useExtendI18n from 'cozy-ui/transpiled/react/providers/I18n/useExtendI18n';\nimport AssistantProvider from './AssistantProvider';\nimport SearchBar from './Search/SearchBar';\nimport SearchProvider from './Search/SearchProvider';\nimport { locales } from '../locales';\nconst AssistantDesktop = ({ componentsProps, searchOptions = {} }) => {\n    useExtendI18n(locales);\n    return (React.createElement(\"div\", { className: \"u-mh-auto u-w-100 u-maw-100\" },\n        React.createElement(AssistantProvider, null,\n            React.createElement(SearchProvider, { searchOptions: searchOptions },\n                React.createElement(SearchBar, { componentsProps: componentsProps })))));\n};\nAssistantDesktop.propTypes = {\n    componentsProps: PropTypes.shape({\n        SearchBarDesktop: PropTypes.shape({\n            elevation: PropTypes.number,\n            size: PropTypes.string,\n            hasHalfBorderRadius: PropTypes.bool,\n            className: PropTypes.string,\n            disabledHover: PropTypes.bool\n        })\n    })\n};\nexport default AssistantDesktop;\n","import React from 'react';\nexport const ExpertIcon = props => {\n    return (React.createElement(\"svg\", Object.assign({ viewBox: \"0 0 24 24\", fill: \"none\" }, props),\n        React.createElement(\"path\", { d: \"M15.088 18.923a.62.62 0 0 1 .504.159l.72.676L15.096 23l-.785-1.626-1.68.758 1.14-3.03zm3.824 0 1.361.186a.6.6 0 0 0 .284-.03l1.15 3.053-1.682-.758L19.242 23l-1.307-3.477.473-.441a.62.62 0 0 1 .504-.16M16.58 9.164a.62.62 0 0 1 .84 0l.719.673a.62.62 0 0 0 .505.16l.989-.138a.604.604 0 0 1 .68.479l.171.952c.033.177.148.33.312.415l.883.453c.287.148.402.49.26.774l-.439.868a.57.57 0 0 0 0 .513l.439.869a.577.577 0 0 1-.26.773l-.883.453a.59.59 0 0 0-.312.416l-.172.952a.603.603 0 0 1-.68.478l-.988-.135a.62.62 0 0 0-.505.157l-.718.673a.62.62 0 0 1-.84 0l-.72-.673a.62.62 0 0 0-.504-.157l-.988.135a.603.603 0 0 1-.68-.478l-.173-.952a.59.59 0 0 0-.312-.416l-.883-.453a.577.577 0 0 1-.26-.773l.439-.869a.57.57 0 0 0 0-.513l-.438-.868a.577.577 0 0 1 .26-.774l.882-.453a.59.59 0 0 0 .312-.415l.172-.952a.604.604 0 0 1 .681-.479l.988.137a.62.62 0 0 0 .504-.16zM11.022 13q.037.236.148.462l.316.64-.316.642a1.66 1.66 0 0 0 .717 2.198l.637.338.125.705c.036.2.107.384.204.55l-.171.465H3v-2c0-2.21 3.58-4 8-4zM17 10.886c-1.81 0-3.278 1.42-3.278 3.17 0 1.752 1.468 3.173 3.278 3.173 1.81-.001 3.277-1.421 3.277-3.172s-1.467-3.17-3.277-3.171m-.346 1.026c.109-.323.582-.323.69 0l.31.922a.36.36 0 0 0 .344.243h1.002c.351 0 .497.434.214.634l-.81.57a.35.35 0 0 0-.134.393l.311.92c.108.324-.274.594-.559.394l-.81-.57a.37.37 0 0 0-.426 0l-.81.57c-.285.2-.668-.07-.559-.393l.31-.921a.35.35 0 0 0-.132-.394l-.81-.57c-.284-.199-.138-.633.213-.633h1.002a.36.36 0 0 0 .345-.243zM11 3a4 4 0 0 1 3.536 5.866h-.01a1.67 1.67 0 0 0-1.84 1.197l-.004.012-.003.013-.025.112-.003.01-.002.013-.08.455A3.996 3.996 0 0 1 7 7a4 4 0 0 1 4-4\" })));\n};\n","import React from 'react';\nexport const KnowledgeBaseIcon = props => {\n    return (React.createElement(\"svg\", Object.assign({ viewBox: \"0 0 24 24\", fill: \"none\" }, props),\n        React.createElement(\"path\", { d: \"M12 18.91c-2.013 0-4.284-.466-6.074-1.245-.657-.289-1.22-.756-1.679-1.125a.15.15 0 0 0-.161-.016.16.16 0 0 0-.063.06.17.17 0 0 0-.023.084v.505c0 1.128.903 2.139 2.544 2.846C8.01 20.652 9.949 21 12 21s3.989-.348 5.456-.981C19.096 19.313 20 18.3 20 17.173v-.505q0-.046-.023-.085a.16.16 0 0 0-.063-.06.15.15 0 0 0-.161.017c-.46.369-1.022.836-1.68 1.125-1.79.78-4.06 1.246-6.073 1.246m8-12.113c-.031-1.11-.93-2.105-2.538-2.806C15.99 3.352 14.052 3 12 3s-3.99.352-5.458.99c-1.607.7-2.506 1.693-2.539 2.8L4 7.5c0 .258.2.662.563.994.428.39 1.063.776 1.837 1.114 1.648.719 3.741 1.146 5.6 1.146s3.952-.429 5.6-1.148c.774-.337 1.41-.723 1.837-1.114.363-.33.563-.734.563-.992z\" }),\n        React.createElement(\"path\", { d: \"M18.074 10.795c-1.79.78-4.06 1.245-6.074 1.245-2.013 0-4.284-.465-6.074-1.245-.657-.288-1.22-.755-1.679-1.125a.15.15 0 0 0-.224.044.17.17 0 0 0-.023.085v1.237c0 .257.2.582.563.913.428.391 1.063.777 1.837 1.114 1.648.718 3.741 1.147 5.6 1.147s3.952-.43 5.6-1.148c.774-.338 1.41-.723 1.837-1.115.363-.33.563-.654.563-.911V9.799q0-.046-.023-.085a.16.16 0 0 0-.063-.06.15.15 0 0 0-.161.017c-.46.369-1.022.836-1.68 1.124\" }),\n        React.createElement(\"path\", { d: \"M18.074 14.25c-1.79.78-4.06 1.245-6.074 1.245-2.013 0-4.284-.465-6.074-1.245-.657-.288-1.22-.756-1.679-1.125a.15.15 0 0 0-.224.043.17.17 0 0 0-.023.086v1.197c0 .257.2.581.562.912.428.392 1.064.777 1.838 1.115 1.648.718 3.74 1.147 5.6 1.147s3.952-.43 5.6-1.148c.774-.338 1.41-.723 1.837-1.114.363-.332.563-.656.563-.912v-1.197q0-.046-.023-.085a.16.16 0 0 0-.063-.06.15.15 0 0 0-.161.017c-.46.368-1.022.836-1.68 1.124\" })));\n};\n","import React from 'react';\nexport const TwakeAssistantIcon = props => {\n    return (React.createElement(\"svg\", Object.assign({ viewBox: \"0 0 22 22\", fill: \"none\" }, props),\n        React.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M10.094.305a1.5 1.5 0 012.351.79l.005.02 1.581 6.135a1 1 0 00.718.719l6.136 1.58.016.005a1.5 1.5 0 010 2.892l-.016.004-6.135 1.581a1 1 0 00-.719.719l-1.582 6.135-.005.02a1.5 1.5 0 01-2.889 0l-.005-.02-1.581-6.135a1.001 1.001 0 00-.719-.719L1.115 12.45l-.023-.006a1.5 1.5 0 010-2.886l.023-.006L7.25 7.968a1 1 0 00.719-.718L9.55 1.115l.005-.02a1.5 1.5 0 01.538-.79zM11 3.503l1.095 4.247a3.002 3.002 0 002.155 2.155L18.498 11l-4.248 1.095a3.001 3.001 0 00-2.155 2.155L11 18.497 9.905 14.25a3 3 0 00-2.155-2.156L3.504 11 7.75 9.904A3 3 0 009.905 7.75L11 3.503zM19 1a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V5h-1a1 1 0 110-2h1V2a1 1 0 011-1zM3 15a1 1 0 011 1 1 1 0 110 2 1 1 0 11-2 0 1 1 0 110-2 1 1 0 011-1z\" })));\n};\n","import * as React from \"react\";\nexport const TwakeAssistantIconColor = props => {\n    return (React.createElement(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", width: 18, height: 18, viewBox: \"0 0 18 18\" }, props),\n        React.createElement(\"path\", { fill: \"#4A1616\", d: \"M7.452 11.623a1.5 1.5 0 0 0-1.078-1.077L1.773 9.359a.375.375 0 0 1 0-.722l4.6-1.187a1.5 1.5 0 0 0 1.079-1.077l1.186-4.601a.375.375 0 0 1 .722 0l1.186 4.601a1.5 1.5 0 0 0 1.078 1.078l4.601 1.186a.375.375 0 0 1 0 .723l-4.601 1.186a1.5 1.5 0 0 0-1.078 1.077L9.36 16.225a.375.375 0 0 1-.723 0z\" }),\n        React.createElement(\"path\", { fill: \"url(#a)\", d: \"M7.452 11.623a1.5 1.5 0 0 0-1.078-1.077L1.773 9.359a.375.375 0 0 1 0-.722l4.6-1.187a1.5 1.5 0 0 0 1.079-1.077l1.186-4.601a.375.375 0 0 1 .722 0l1.186 4.601a1.5 1.5 0 0 0 1.078 1.078l4.601 1.186a.375.375 0 0 1 0 .723l-4.601 1.186a1.5 1.5 0 0 0-1.078 1.077L9.36 16.225a.375.375 0 0 1-.723 0z\" }),\n        React.createElement(\"path\", { fill: \"url(#b)\", d: \"M7.452 11.623a1.5 1.5 0 0 0-1.078-1.077L1.773 9.359a.375.375 0 0 1 0-.722l4.6-1.187a1.5 1.5 0 0 0 1.079-1.077l1.186-4.601a.375.375 0 0 1 .722 0l1.186 4.601a1.5 1.5 0 0 0 1.078 1.078l4.601 1.186a.375.375 0 0 1 0 .723l-4.601 1.186a1.5 1.5 0 0 0-1.078 1.077L9.36 16.225a.375.375 0 0 1-.723 0z\" }),\n        React.createElement(\"path\", { fill: \"#4A1616\", d: \"M14.998 1.682c.316 0 .571.256.571.572v.928h.929a.572.572 0 0 1 0 1.143h-.929v.929a.572.572 0 0 1-1.143 0v-.929h-.928a.572.572 0 0 1 0-1.143h.928v-.928c0-.316.256-.572.572-.572\" }),\n        React.createElement(\"path\", { fill: \"url(#c)\", d: \"M14.998 1.682c.316 0 .571.256.571.572v.928h.929a.572.572 0 0 1 0 1.143h-.929v.929a.572.572 0 0 1-1.143 0v-.929h-.928a.572.572 0 0 1 0-1.143h.928v-.928c0-.316.256-.572.572-.572\" }),\n        React.createElement(\"path\", { fill: \"url(#d)\", d: \"M14.998 1.682c.316 0 .571.256.571.572v.928h.929a.572.572 0 0 1 0 1.143h-.929v.929a.572.572 0 0 1-1.143 0v-.929h-.928a.572.572 0 0 1 0-1.143h.928v-.928c0-.316.256-.572.572-.572\" }),\n        React.createElement(\"path\", { fill: \"#4A1616\", d: \"M2.998 12.178c.315 0 .571.256.571.572v.178h.18a.572.572 0 0 1-.001 1.143H3.57v.179a.572.572 0 0 1-1.143 0v-.179h-.178a.572.572 0 0 1 0-1.143h.178v-.178c0-.316.256-.572.572-.572\" }),\n        React.createElement(\"path\", { fill: \"url(#e)\", d: \"M2.998 12.178c.315 0 .571.256.571.572v.178h.18a.572.572 0 0 1-.001 1.143H3.57v.179a.572.572 0 0 1-1.143 0v-.179h-.178a.572.572 0 0 1 0-1.143h.178v-.178c0-.316.256-.572.572-.572\" }),\n        React.createElement(\"path\", { fill: \"url(#f)\", d: \"M2.998 12.178c.315 0 .571.256.571.572v.178h.18a.572.572 0 0 1-.001 1.143H3.57v.179a.572.572 0 0 1-1.143 0v-.179h-.178a.572.572 0 0 1 0-1.143h.178v-.178c0-.316.256-.572.572-.572\" }),\n        React.createElement(\"defs\", null,\n            React.createElement(\"linearGradient\", { id: \"a\", x1: 16.5, x2: 1.5, y1: 10.248, y2: 10.248, gradientUnits: \"userSpaceOnUse\" },\n                React.createElement(\"stop\", { offset: 0.13, stopColor: \"#A033FF\" }),\n                React.createElement(\"stop\", { offset: 0.61, stopColor: \"#0094FF\" }),\n                React.createElement(\"stop\", { offset: 1, stopColor: \"#4FB500\" })),\n            React.createElement(\"linearGradient\", { id: \"b\", x1: 8.375, x2: 3.687, y1: 6.186, y2: 15.56, gradientUnits: \"userSpaceOnUse\" },\n                React.createElement(\"stop\", { stopColor: \"#FFD600\", stopOpacity: 0 }),\n                React.createElement(\"stop\", { offset: 0.563, stopColor: \"#FFC700\" })),\n            React.createElement(\"linearGradient\", { id: \"c\", x1: 17.069, x2: 12.926, y1: 3.849, y2: 3.849, gradientUnits: \"userSpaceOnUse\" },\n                React.createElement(\"stop\", { offset: 0.13, stopColor: \"#A033FF\" }),\n                React.createElement(\"stop\", { offset: 0.61, stopColor: \"#0094FF\" }),\n                React.createElement(\"stop\", { offset: 1, stopColor: \"#4FB500\" })),\n            React.createElement(\"linearGradient\", { id: \"d\", x1: 14.825, x2: 14.704, y1: 3.539, y2: 4.416, gradientUnits: \"userSpaceOnUse\" },\n                React.createElement(\"stop\", { stopColor: \"#FFD600\", stopOpacity: 0 }),\n                React.createElement(\"stop\", { offset: 0.563, stopColor: \"#FFC700\" })),\n            React.createElement(\"linearGradient\", { id: \"e\", x1: 4.319, x2: 1.676, y1: 13.595, y2: 13.595, gradientUnits: \"userSpaceOnUse\" },\n                React.createElement(\"stop\", { offset: 0.13, stopColor: \"#A033FF\" }),\n                React.createElement(\"stop\", { offset: 0.61, stopColor: \"#0094FF\" }),\n                React.createElement(\"stop\", { offset: 1, stopColor: \"#4FB500\" })),\n            React.createElement(\"linearGradient\", { id: \"f\", x1: 2.887, x2: 2.703, y1: 13.285, y2: 14.139, gradientUnits: \"userSpaceOnUse\" },\n                React.createElement(\"stop\", { stopColor: \"#FFD600\", stopOpacity: 0 }),\n                React.createElement(\"stop\", { offset: 0.563, stopColor: \"#FFC700\" })))));\n};\n","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport Icon from 'cozy-ui/transpiled/react/Icon';\nimport MagnifierIcon from 'cozy-ui/transpiled/react/Icons/Magnifier';\nimport SearchBar from 'cozy-ui/transpiled/react/SearchBar';\nimport useExtendI18n from 'cozy-ui/transpiled/react/providers/I18n/useExtendI18n';\nimport { locales } from '../locales';\nimport styles from './Search/styles.styl';\nexport const AssistantMobile = ({ componentsProps }) => {\n    const navigate = useNavigate();\n    const { pathname } = useLocation();\n    useExtendI18n(locales);\n    return (React.createElement(SearchBar, Object.assign({}, componentsProps === null || componentsProps === void 0 ? void 0 : componentsProps.SearchBar, { size: \"medium\", icon: React.createElement(Icon, { className: cx('u-ml-1 u-mr-half', styles['search-bar-icon']), icon: MagnifierIcon, size: 16 }), type: \"button\", onClick: () => navigate(`connected/search?returnPath=${pathname}`) })));\n};\nAssistantMobile.propTypes = {\n    componentsProps: PropTypes.shape({\n        SearchBar: PropTypes.shape({\n            className: PropTypes.string\n        })\n    })\n};\nexport default AssistantMobile;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport set from 'lodash/set';\nimport React, { useMemo, useContext, useState, useCallback } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useClient } from 'cozy-client';\nimport useRealtime from 'cozy-realtime/dist/useRealtime';\nimport { pushMessagesIdInState, isMessageForThisConversation } from './helpers';\nimport { CHAT_EVENTS_DOCTYPE, CHAT_CONVERSATIONS_DOCTYPE } from './queries';\nexport const AssistantContext = React.createContext();\nexport const useAssistant = () => {\n    const context = useContext(AssistantContext);\n    if (!context) {\n        throw new Error('useAssistant must be used within a AssistantProvider');\n    }\n    return context;\n};\nconst AssistantProvider = ({ children }) => {\n    const { conversationId } = useParams();\n    const client = useClient();\n    const [assistantState, setAssistantState] = useState({\n        message: {},\n        status: 'idle',\n        messagesId: []\n    });\n    useRealtime(client, {\n        [CHAT_CONVERSATIONS_DOCTYPE]: {\n            created: res => {\n                pushMessagesIdInState(conversationId, res, setAssistantState);\n            },\n            updated: res => {\n                pushMessagesIdInState(conversationId, res, setAssistantState);\n            }\n        }\n    }, []);\n    useRealtime(client, {\n        [CHAT_EVENTS_DOCTYPE]: {\n            created: res => {\n                setAssistantState(prevState => {\n                    // to exclude realtime messages if not relevant to the actual conversation\n                    if (!isMessageForThisConversation(res, prevState.messagesId)) {\n                        return prevState;\n                    }\n                    if (res.object === 'done') {\n                        if (prevState.status !== 'idle') {\n                            return Object.assign(Object.assign({}, prevState), { status: 'idle' });\n                        }\n                    }\n                    if (res.object === 'delta') {\n                        const message = set(prevState.message, res.position, res.content);\n                        return Object.assign(Object.assign({}, prevState), { message, status: 'writing' });\n                    }\n                    return prevState;\n                });\n            }\n        }\n    }, []);\n    const clearAssistant = useCallback(() => setAssistantState({\n        message: {},\n        status: 'pending',\n        messagesId: []\n    }), []);\n    const onAssistantExecute = useCallback((_a, callback_1) => __awaiter(void 0, [_a, callback_1], void 0, function* ({ value, conversationId }, callback) {\n        if (!value)\n            return;\n        callback === null || callback === void 0 ? void 0 : callback();\n        clearAssistant();\n        yield client.stackClient.fetchJSON('POST', `/ai/chat/conversations/${conversationId}`, {\n            q: value\n        });\n        setAssistantState(v => (Object.assign(Object.assign({}, v), { status: 'pending' })));\n    }), [client, clearAssistant]);\n    const value = useMemo(() => ({\n        assistantState,\n        setAssistantState,\n        clearAssistant,\n        onAssistantExecute\n    }), [assistantState, clearAssistant, onAssistantExecute]);\n    return (React.createElement(AssistantContext.Provider, { value: value }, children));\n};\nexport default React.memo(AssistantProvider);\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport Icon from 'cozy-ui/transpiled/react/Icon';\nimport { useI18n } from 'cozy-ui/transpiled/react/providers/I18n';\nimport ChatItem from './ChatItem';\nimport Sources from './Sources/Sources';\nimport { TwakeAssistantIcon } from '../AssistantIcon/TwakeAssistantIcon';\nconst ChatAssistantItem = (_a) => {\n    var { label, className, id, sources } = _a, props = __rest(_a, [\"label\", \"className\", \"id\", \"sources\"]);\n    const { t } = useI18n();\n    return (React.createElement(React.Fragment, null,\n        React.createElement(ChatItem, Object.assign({}, props, { label: label, className: className, icon: React.createElement(Icon, { icon: TwakeAssistantIcon, size: 24, className: \"u-mh-half\", color: \"var(--primaryColor)\" }), name: t('assistant.name') })),\n        (sources === null || sources === void 0 ? void 0 : sources.length) > 0 && React.createElement(Sources, { messageId: id, sources: sources })));\n};\nexport default ChatAssistantItem;\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useRef, useEffect } from 'react';\nimport { useQuery, isQueryLoading } from 'cozy-client';\nimport ChatAssistantItem from './ChatAssistantItem';\nimport ChatRealtimeAnswer from './ChatRealtimeAnswer';\nimport ChatUserItem from './ChatUserItem';\nimport { useAssistant } from '../AssistantProvider';\nimport { getInstantMessage } from '../helpers';\nimport { buildChatConversationQueryById } from '../queries';\nconst ChatConversation = ({ conversation, myself }) => {\n    var _a, _b, _c, _d, _e;\n    const { assistantState } = useAssistant();\n    const listRef = useRef();\n    const instantMessageKeysCount = Object.keys(assistantState.message).length;\n    // test on role === user to be sure the last response is inside io.cozy.ai.chat.conversations\n    const showRealtimeMessage = assistantState.status !== 'idle' ||\n        ((_c = (_a = conversation === null || conversation === void 0 ? void 0 : conversation.messages) === null || _a === void 0 ? void 0 : _a[((_b = conversation === null || conversation === void 0 ? void 0 : conversation.messages) === null || _b === void 0 ? void 0 : _b.length) - 1]) === null || _c === void 0 ? void 0 : _c.role) ===\n            'user';\n    useEffect(() => {\n        var _a, _b;\n        // force scroll down if new message of change in AI instant response\n        (_b = (_a = listRef.current) === null || _a === void 0 ? void 0 : _a.lastElementChild) === null || _b === void 0 ? void 0 : _b.scrollIntoView(false);\n    }, [\n        (_d = conversation === null || conversation === void 0 ? void 0 : conversation.messages) === null || _d === void 0 ? void 0 : _d.length,\n        assistantState.status,\n        instantMessageKeysCount\n    ]);\n    return (React.createElement(\"div\", { ref: listRef }, (_e = conversation === null || conversation === void 0 ? void 0 : conversation.messages) === null || _e === void 0 ? void 0 :\n        _e.map((message, idx) => {\n            if (message.role === 'user') {\n                return (React.createElement(ChatUserItem, { key: conversation._id + '--' + idx, className: \"u-mt-1-half\", myself: myself, label: message.content }));\n            }\n            if (idx !== (conversation === null || conversation === void 0 ? void 0 : conversation.messages.length) - 1) {\n                return (React.createElement(ChatAssistantItem, { key: conversation._id + '--' + idx, className: \"u-mt-1-half\", id: message.id, label: message.content, sources: message.sources }));\n            }\n            if (showRealtimeMessage) {\n                return null;\n            }\n            return (React.createElement(ChatAssistantItem, { key: conversation._id + '--' + idx, className: \"u-mt-1-half\", id: message.id, label: message.content, sources: message.sources }));\n        }),\n        showRealtimeMessage && (React.createElement(ChatRealtimeAnswer, { isLoading: assistantState.status === 'pending', label: getInstantMessage(assistantState) }))));\n};\nconst ChatConversationWithQuery = ({ id, myself }) => {\n    const chatConversationQuery = buildChatConversationQueryById(id);\n    const _a = useQuery(chatConversationQuery.definition, chatConversationQuery.options), { data: chatConversation } = _a, queryResult = __rest(_a, [\"data\"]);\n    const isLoading = isQueryLoading(queryResult);\n    if (isLoading)\n        return null;\n    return React.createElement(ChatConversation, { conversation: chatConversation, myself: myself });\n};\nexport default ChatConversationWithQuery;\n","import React from 'react';\nimport Box from 'cozy-ui/transpiled/react/Box';\nimport Typography from 'cozy-ui/transpiled/react/Typography';\nimport ChatItemLabel from './ChatItemLabel';\nconst ChatItem = ({ className, icon, name, label }) => {\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Box, { className: className, display: \"flex\", alignItems: \"center\", gridGap: 12 },\n            icon,\n            React.createElement(Typography, { variant: \"h6\", display: \"inline\" }, name)),\n        React.createElement(Box, { pl: \"44px\" },\n            React.createElement(ChatItemLabel, { label: label }))));\n};\nexport default ChatItem;\n","import React from 'react';\nimport Markdown from 'cozy-ui/transpiled/react/Markdown';\nimport { sanitizeChatContent } from '../helpers';\nconst ChatItemLabel = ({ label }) => {\n    if (typeof label === 'string') {\n        const content = sanitizeChatContent(label);\n        return React.createElement(Markdown, { content: content });\n    }\n    return label;\n};\n// need memo to avoid rendering all label of all items\nexport default React.memo(ChatItemLabel);\n","import React from 'react';\nimport Skeleton from 'cozy-ui/transpiled/react/Skeleton';\nimport ChatAssistantItem from './ChatAssistantItem';\nconst ChatRealtimeAnswer = ({ isLoading, label }) => {\n    return (React.createElement(ChatAssistantItem, { className: \"u-mt-1-half\", label: isLoading ? (React.createElement(\"span\", null,\n            React.createElement(Skeleton, { width: \"100%\" }),\n            React.createElement(Skeleton, { width: \"60%\" }))) : (label) }));\n};\nexport default ChatRealtimeAnswer;\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { getDisplayName, getInitials } from 'cozy-client/dist/models/contact';\nimport Avatar from 'cozy-ui/transpiled/react/Avatar';\nimport { useI18n } from 'cozy-ui/transpiled/react/providers/I18n';\nimport ChatItem from './ChatItem';\nconst ChatUserItem = (_a) => {\n    var { className, label, myself } = _a, props = __rest(_a, [\"className\", \"label\", \"myself\"]);\n    const { t } = useI18n();\n    const contact = myself || { displayName: t('assistant.default_username') };\n    return (React.createElement(ChatItem, Object.assign({}, props, { className: className, icon: React.createElement(Avatar, { text: getInitials(contact), size: 24 }), name: getDisplayName(contact), label: label })));\n};\nexport default ChatUserItem;\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { useQuery, isQueryLoading } from 'cozy-client';\nimport ChatConversation from './ChatConversation';\nimport { buildMyselfQuery } from '../queries';\nconst Conversation = ({ id }) => {\n    const myselfQuery = buildMyselfQuery();\n    const _a = useQuery(myselfQuery.definition, myselfQuery.options), { data: myselves } = _a, queryMyselfResult = __rest(_a, [\"data\"]);\n    const isLoading = isQueryLoading(queryMyselfResult);\n    if (isLoading)\n        return null;\n    return (React.createElement(\"div\", { className: \"u-maw-7 u-mh-auto\" },\n        React.createElement(ChatConversation, { id: id, myself: myselves[0] })));\n};\nexport default Conversation;\n","import React, { useState, useRef, useMemo, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Button from 'cozy-ui/transpiled/react/Buttons';\nimport Icon from 'cozy-ui/transpiled/react/Icon';\nimport PaperplaneIcon from 'cozy-ui/transpiled/react/Icons/Paperplane';\nimport StopIcon from 'cozy-ui/transpiled/react/Icons/Stop';\nimport SearchBar from 'cozy-ui/transpiled/react/SearchBar';\nimport Chip from 'cozy-ui/transpiled/react/Chips';\nimport useEventListener from 'cozy-ui/transpiled/react/hooks/useEventListener';\nimport { useBreakpoints } from 'cozy-ui/transpiled/react/providers/Breakpoints';\nimport { useI18n } from 'cozy-ui/transpiled/react/providers/I18n';\nimport styles from './styles.styl';\nimport { useAssistant } from '../AssistantProvider';\nimport Typography from 'cozy-ui/transpiled/react/Typography';\nimport { TwakeAssistantIcon } from '../AssistantIcon/TwakeAssistantIcon';\nimport { TwakeAssistantIconColor } from '../AssistantIcon/TwakeAssistantIconColor';\nimport { ExpertIcon } from '../AssistantIcon/ExpertIcon';\nimport { KnowledgeBaseIcon } from '../AssistantIcon/KnowledgeBaseIcon';\nimport ChatModes from './ConversationChips';\nconst ConversationBar = ({ assistantStatus, hasConversationStarted }) => {\n    const { t } = useI18n();\n    const { isMobile } = useBreakpoints();\n    const { onAssistantExecute } = useAssistant();\n    const [inputValue, setInputValue] = useState('');\n    const inputRef = useRef();\n    const { conversationId } = useParams();\n    // to adjust input height for multiline when typing in it\n    useEventListener(inputRef.current, 'input', () => {\n        inputRef.current.style.height = 'auto'; // to resize input when emptying it\n        inputRef.current.style.height = `${inputRef.current.scrollHeight}px`;\n    });\n    const handleClear = () => {\n        setInputValue('');\n    };\n    const handleChange = ev => {\n        setInputValue(ev.target.value);\n    };\n    const handleStop = () => {\n        // not supported right now\n        return;\n    };\n    const handleClick = () => onAssistantExecute({ value: inputValue, conversationId }, () => {\n        handleClear();\n        inputRef.current.style.height = 'auto';\n    });\n    return (React.createElement(\"div\", { className: \"u-w-100 u-maw-7 u-mh-auto\" },\n        React.createElement(\"div\", { className: `${styles['conversationBarSibling']} ${hasConversationStarted ? styles['conversationBarSibling--started'] : ''} u-flex u-flex-column u-flex-items-center u-flex-justify-end` },\n            React.createElement(Typography, { variant: \"h3\", align: \"center\", className: \"u-mb-2\" }, t('assistant.conversationBar.startMessage'))),\n        React.createElement(SearchBar, { className: styles['conversationBar'], icon: null, size: \"auto\", placeholder: t('assistant.search.placeholder'), value: inputValue, disabledClear: true, componentsProps: {\n                inputBase: {\n                    inputRef: inputRef,\n                    className: 'u-pv-0',\n                    rows: 1,\n                    multiline: true,\n                    inputProps: {\n                        className: styles['conversationBar-input']\n                    },\n                    autoFocus: !isMobile,\n                    startAdornment: (React.createElement(Button, { classes: { label: 'u-w-2 u-h-2' }, label: React.createElement(Icon, { icon: \"plus\", size: 14 }), variant: \"text\", color: \"inherit\", style: { marginRight: 2, marginLeft: -12 } })),\n                    endAdornment: (React.createElement(\"div\", { style: {\n                            marginRight: -8,\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            gap: 4,\n                            flex: \"none\"\n                        } }, assistantStatus !== 'idle' ? (React.createElement(Button, { component: \"div\", className: \"u-miw-auto u-mih-auto u-w-2 u-h-2 u-bdrs-circle u-p-1 u-mr-1\", classes: { label: 'u-flex u-w-auto' }, label: React.createElement(Icon, { icon: StopIcon, size: 12 }), onClick: handleStop })) : (React.createElement(Button, { component: \"div\", className: \"u-miw-auto u-mih-auto u-w-2 u-h-2 u-bdrs-circle u-p-1 u-mr-1\", classes: { label: 'u-flex u-w-auto' }, label: React.createElement(Icon, { icon: PaperplaneIcon, size: 14 }), disabled: !inputValue, onClick: handleClick })))),\n                    onKeyDown: ev => {\n                        if (!isMobile) {\n                            if (ev.shiftKey && ev.key === 'Enter') {\n                                return ev;\n                            }\n                            if (ev.key === 'Enter') {\n                                ev.preventDefault(); // prevent form submit\n                                return handleClick();\n                            }\n                        }\n                    }\n                }\n            }, onChange: handleChange }),\n        React.createElement(\"div\", { className: `${styles['conversationBarSibling']} ${hasConversationStarted ? styles['conversationBarSibling--started'] : ''} u-flex u-flex-column u-flex-items-center u-flex-justify-start` },\n            React.createElement(ChatModes, null))));\n};\nexport default ConversationBar;\n","import React, { useState, useRef, useMemo, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Button from 'cozy-ui/transpiled/react/Buttons';\nimport Icon from 'cozy-ui/transpiled/react/Icon';\nimport PaperplaneIcon from 'cozy-ui/transpiled/react/Icons/Paperplane';\nimport StopIcon from 'cozy-ui/transpiled/react/Icons/Stop';\nimport SearchBar from 'cozy-ui/transpiled/react/SearchBar';\nimport Chip from 'cozy-ui/transpiled/react/Chips';\nimport useEventListener from 'cozy-ui/transpiled/react/hooks/useEventListener';\nimport { useBreakpoints } from 'cozy-ui/transpiled/react/providers/Breakpoints';\nimport { useI18n } from 'cozy-ui/transpiled/react/providers/I18n';\nimport styles from './styles.styl';\nimport { useAssistant } from '../AssistantProvider';\nimport Typography from 'cozy-ui/transpiled/react/Typography';\nimport { TwakeAssistantIcon } from '../AssistantIcon/TwakeAssistantIcon';\nimport { TwakeAssistantIconColor } from '../AssistantIcon/TwakeAssistantIconColor';\nimport { ExpertIcon } from '../AssistantIcon/ExpertIcon';\nimport { KnowledgeBaseIcon } from '../AssistantIcon/KnowledgeBaseIcon';\nimport Alert from 'cozy-ui/transpiled/react/Alert';\nimport AlertTitle from 'cozy-ui/transpiled/react/AlertTitle';\nconst ChatModes = () => {\n    const { t } = useI18n();\n    const experts = [\n        { key: \"legal\", label: t(\"assistant.experts.legal\"), icon: 'justice', external: true },\n        { key: 'financial', label: t(\"assistant.experts.financial\"), icon: 'benefit' },\n        { key: 'image_creation', label: t(\"assistant.experts.image_creation\"), icon: 'image', external: true },\n        { key: 'marketing', label: t(\"assistant.experts.marketing\"), icon: 'lightning' },\n        { key: 'code_assistant', label: t(\"assistant.experts.code_assistant\"), icon: 'lightning' },\n        { key: 'brainstorming', label: t(\"assistant.experts.brainstorming\"), icon: 'lightbulb' },\n        { key: 'travel_planner', label: t(\"assistant.experts.travel_planner\"), icon: 'plane' },\n        { key: 'fitness_coach', label: t(\"assistant.experts.fitness_coach\"), icon: 'fitness' },\n        { key: 'recipe_suggester', label: t(\"assistant.experts.recipe_suggester\"), icon: 'restaurant' }\n    ];\n    const knowledges = [\n        { key: \"twake_knowledge\", label: t('assistant.knowledge_bases.twake_knowledge'), icon: TwakeAssistantIconColor },\n        { key: \"web\", label: t('assistant.knowledge_bases.web'), icon: 'globe' },\n        { key: \"linagora_client\", label: t('assistant.knowledge_bases.linagora_client'), icon: 'collect' },\n        { key: \"security_procedures\", label: t('assistant.knowledge_bases.security_procedures'), icon: 'lock' },\n        { key: \"other_1\", label: t('assistant.knowledge_bases.other'), icon: 'globe' },\n        { key: \"other_2\", label: t('assistant.knowledge_bases.other'), icon: 'globe' },\n        { key: \"other_3\", label: t('assistant.knowledge_bases.other'), icon: 'globe' },\n        { key: \"other_4\", label: t('assistant.knowledge_bases.other'), icon: 'globe' },\n        { key: \"other_5\", label: t('assistant.knowledge_bases.other'), icon: 'globe' },\n        { key: \"other_6\", label: t('assistant.knowledge_bases.other'), icon: 'globe' }\n    ];\n    const [selectedExpert, setSelectedExpert] = useState(null);\n    const [selectedKnowledges, setSelectedKnowledges] = useState(knowledges.map(knowledge => knowledge.key));\n    const prevExpertRef = useRef(null);\n    const isExternalExpertSelected = useMemo(() => {\n        const expert = selectedExpert ? experts.find(e => e.key === selectedExpert) : null;\n        return expert ? expert.external : false;\n    }, [selectedExpert, experts]);\n    useEffect(() => {\n        const prevExpert = prevExpertRef.current;\n        const currentExpert = selectedExpert ? experts.find(e => e.key === selectedExpert) : null;\n        if (!selectedExpert && prevExpert !== null) {\n            setSelectedKnowledges(knowledges.map(knowledge => knowledge.key));\n        }\n        prevExpertRef.current = selectedExpert;\n    }, [selectedExpert, experts, knowledges]);\n    return (React.createElement(\"div\", { className: \"u-flex u-flex-column u-flex-items-start u-flex-justify-start, u-w-100\" },\n        React.createElement(ChatKnowledges, { knowledges: knowledges, selectedKnowledges: selectedKnowledges, setSelectedKnowledges: setSelectedKnowledges }),\n        React.createElement(ChatExperts, { experts: experts, selectedExpert: selectedExpert, setSelectedExpert: setSelectedExpert }),\n        isExternalExpertSelected && (React.createElement(ExternalExpertWarning, null))));\n};\nconst ChatExperts = ({ experts, selectedExpert, setSelectedExpert }) => {\n    const { t } = useI18n();\n    const expertsState = useMemo(() => experts.map(expert => (Object.assign(Object.assign({}, expert), { selected: expert.key === selectedExpert }))), [selectedExpert, experts]);\n    return (React.createElement(ChatChips, { modes: expertsState, onModeSelect: key => {\n            setSelectedExpert(key === selectedExpert ? null : key);\n        }, splice: 4, startIcon: ExpertIcon, moreEndLabel: t('assistant.conversationBar.more.experts') }));\n};\nconst ChatKnowledges = ({ knowledges, selectedKnowledges, setSelectedKnowledges }) => {\n    const { t } = useI18n();\n    const knowledgesState = useMemo(() => knowledges.map(knowledge => (Object.assign(Object.assign({}, knowledge), { selected: selectedKnowledges.includes(knowledge.key) }))), [selectedKnowledges]);\n    return (React.createElement(ChatChips, { modes: knowledgesState, onModeSelect: key => {\n            if (selectedKnowledges.includes(key)) {\n                setSelectedKnowledges(selectedKnowledges.filter(k => k !== key));\n            }\n            else {\n                setSelectedKnowledges([...selectedKnowledges, key]);\n            }\n        }, splice: 4, startIcon: KnowledgeBaseIcon, moreEndLabel: t('assistant.conversationBar.more.knowledge_bases') }));\n};\nconst ChatChips = ({ modes, onModeSelect, splice = 3, startIcon = ExpertIcon, moreEndLabel }) => {\n    const visibleModes = modes.slice(0, splice);\n    const remainingCount = modes.length - splice;\n    return (React.createElement(\"div\", { className: \"u-flex u-flex-row u-flex-wrap u-w-100 u-flex-justify-between u-flex-items-center u-mb-1\", style: { gap: 8 } },\n        React.createElement(Icon, { icon: startIcon, size: 24, style: { opacity: 0.6 } }),\n        visibleModes.map(mode => {\n            const warningColor = mode.selected ? 'var(--warningColor)' : undefined;\n            return (React.createElement(Chip, { icon: React.createElement(Icon, { icon: mode.icon, style: { marginLeft: 12 } }), label: mode.label, clickable: true, onDelete: mode.external && (() => { }), deleteIcon: mode.external && React.createElement(Icon, { icon: \"openwith\", className: \"u-h-1\", style: { fill: warningColor, color: warningColor } }), color: (mode.external && mode.selected) ? 'warning' : undefined, key: mode.label, variant: mode.selected ? 'ghost' : 'default', style: {\n                    borderStyle: 'solid'\n                }, className: \"u-mr-0\", onClick: () => {\n                    onModeSelect(mode.key);\n                } }));\n        }),\n        remainingCount > 0 && (React.createElement(Chip, { label: `+${remainingCount} ${moreEndLabel || 'more'}`, clickable: true, variant: \"outlined\" }))));\n};\nconst ExternalExpertWarning = () => {\n    const { t } = useI18n();\n    return (React.createElement(Alert, { severity: \"warning\", style: { width: 'calc(100% - (16px * 2))' }, action: React.createElement(Button, { variant: \"text\", label: t('assistant.experts.external_warning.know_more'), color: \"warning\" }) },\n        React.createElement(AlertTitle, null, t('assistant.experts.external_warning.title')),\n        t('assistant.experts.external_warning.description')));\n};\nexport default ChatModes;\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useState } from 'react';\nimport { useNavigate, useParams, useSearchParams } from 'react-router-dom';\nimport { FixedDialog } from 'cozy-ui/transpiled/react/CozyDialogs';\nimport { useBreakpoints } from 'cozy-ui/transpiled/react/providers/Breakpoints';\nimport CozyTheme from 'cozy-ui/transpiled/react/providers/CozyTheme';\nimport Button from 'cozy-ui/transpiled/react/Buttons';\nimport Icon from 'cozy-ui/transpiled/react/Icon';\nimport AssistantProvider, { useAssistant } from '../AssistantProvider';\nimport Conversation from '../Conversations/Conversation';\nimport ConversationBar from '../Conversations/ConversationBar';\nimport styles from '../Stylus/Conversation.styl';\nimport ConversationList from './ConversationList';\nimport AppTitle from 'cozy-ui/transpiled/react/AppTitle';\nimport Typography from 'cozy-ui/transpiled/react/Typography';\nimport { buildChatConversationQueryById } from '../queries';\nimport { useQuery } from 'cozy-client';\nconst ConversationLayout = ({ conversationId, assistantState }) => {\n    const { isMobile } = useBreakpoints();\n    const chatConversationQuery = buildChatConversationQueryById(conversationId !== null && conversationId !== void 0 ? conversationId : \"\");\n    const _a = useQuery(chatConversationQuery.definition, chatConversationQuery.options), { data: chatConversation } = _a, queryResult = __rest(_a, [\"data\"]);\n    const hasConversationStarted = chatConversation && chatConversation.messages.length > 0;\n    const [historyOpen, setHistoryOpen] = useState(!isMobile);\n    return (React.createElement(\"div\", { className: `${styles['conversationApp']}` },\n        React.createElement(\"div\", { className: `${styles['conversationHeader']}` },\n            React.createElement(AppTitle, { slug: \"home\" })),\n        React.createElement(\"div\", { className: `${styles['conversationLayout']}` },\n            React.createElement(\"div\", { className: `${styles['conversationSwitcher']} ${historyOpen ? styles['conversationSwitcher--open'] : styles['conversationSwitcher--closed']}` },\n                React.createElement(Button, { label: React.createElement(Icon, { icon: \"burger\" }), onClick: () => { setHistoryOpen(!historyOpen); }, variant: historyOpen ? \"ghost\" : \"text\", className: \"u-bdrs-4\", style: { padding: 0, minWidth: 36, height: 30 } }),\n                React.createElement(Button, { label: React.createElement(Icon, { icon: \"magnifier\" }), variant: \"text\", className: \"u-bdrs-4\", style: { padding: 0, minWidth: 36, height: 30 } })),\n            React.createElement(\"div\", { className: `u-flex u-flex-column u-flex-items-center u-flex-justify-center ${styles['conversationHistory']} ${historyOpen ? styles['conversationHistory--open'] : ''} ${isMobile ? styles['conversationHistory--mobile'] : ''}` },\n                React.createElement(ConversationList, { onNewConversation: () => { } })),\n            React.createElement(\"div\", { className: `${styles['conversationWindowContainer']}` },\n                React.createElement(\"div\", { className: `u-flex u-flex-column u-flex-items-center u-flex-justify-center ${styles['conversationWindow']}` },\n                    React.createElement(\"div\", { className: `${styles['conversationContainer']} ${hasConversationStarted ? styles['conversationContainer--started'] : ''}` },\n                        React.createElement(Conversation, { id: conversationId })),\n                    React.createElement(ConversationBar, { assistantStatus: assistantState.status, hasConversationStarted: hasConversationStarted }))))));\n};\nexport default ConversationLayout;\n","import React, { useState } from \"react\";\nimport Button from 'cozy-ui/transpiled/react/Buttons';\nimport Icon from 'cozy-ui/transpiled/react/Icon';\nimport List from 'cozy-ui/transpiled/react/List';\nimport ListItem from 'cozy-ui/transpiled/react/ListItem';\nimport ListItemText from 'cozy-ui/transpiled/react/ListItemText';\nimport Typography from 'cozy-ui/transpiled/react/Typography';\nimport { useI18n } from 'cozy-ui/transpiled/react/providers/I18n';\nimport { useClient, useQuery, Q } from \"cozy-client\";\nimport { buildRecentConversationsQuery } from \"../queries\";\nimport { useNavigate, useParams, useSearchParams } from 'react-router-dom';\nimport { makeConversationId } from \"../helpers\";\nconst ConversationList = ({ onNewConversation }) => {\n    const { t } = useI18n();\n    const client = useClient();\n    const navigate = useNavigate();\n    const { conversationId } = useParams();\n    const [searchParams] = useSearchParams();\n    const recentConvsQuery = buildRecentConversationsQuery();\n    const goToConversation = (conversationId) => {\n        navigate(`/assistant/${conversationId}${searchParams.toString() ? `?${searchParams.toString()}` : ''}`);\n    };\n    const createNewConversation = () => {\n        const newConversationId = makeConversationId();\n        goToConversation(newConversationId);\n    };\n    const { data: conversations, historyFetchStatus } = useQuery(recentConvsQuery.definition, recentConvsQuery.options);\n    return (React.createElement(\"div\", { className: \"u-flex u-flex-column u-w-100 u-h-100 u-flex-align-center u-flex-justify-start\" },\n        React.createElement(\"div\", { style: {\n                height: 44\n            } }),\n        React.createElement(\"div\", { className: \"u-m-1-half u-mb-0\" },\n            React.createElement(Button, { startIcon: React.createElement(Icon, { icon: \"plus\", size: 14 }), label: t('assistant.conversationBar.newChat'), onClick: createNewConversation, variant: \"primary\", className: \"u-w-100 u-bdrs-6\" })),\n        React.createElement(Typography, { className: \"u-ph-half u-mh-1 u-mb-half\", variant: \"subtitle1\", color: \"textSecondary\" }, t('assistant.conversationList.recentConversations')),\n        React.createElement(\"div\", { style: {\n                height: '100%',\n                width: '100%',\n                overflow: 'scroll'\n            } },\n            React.createElement(List, { className: \"u-ph-half\", disabledGutters: true }, conversations && conversations.map((conv, index) => {\n                var _a, _b, _c;\n                return (React.createElement(ListItem, { dense: true, button: true, className: \"u-bdrs-4 u-mb-half\", key: index, style: {\n                        backgroundColor: conversationId === conv.id ? 'var(--defaultBackgroundColor)' : undefined,\n                    }, onClick: () => goToConversation(conv.id) },\n                    React.createElement(ListItemText, null,\n                        React.createElement(Typography, { variant: \"body2\" }, (_a = conv.messages[conv.messages.length - 1]) === null || _a === void 0 ? void 0 : _a.content),\n                        React.createElement(Typography, { variant: \"subtitle1\", color: \"textSecondary\" }, (_b = conv.messages[conv.messages.length - 1]) === null || _b === void 0 ? void 0 : _b.content),\n                        React.createElement(Typography, { variant: \"caption\", color: \"textSecondary\" }, new Date((_c = conv.cozyMetadata) === null || _c === void 0 ? void 0 : _c.updatedAt).toLocaleString()))));\n            })))));\n};\nexport default ConversationList;\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useQuery, isQueryLoading } from 'cozy-client';\nimport Box from 'cozy-ui/transpiled/react/Box';\nimport Chip from 'cozy-ui/transpiled/react/Chips';\nimport Grow from 'cozy-ui/transpiled/react/Grow';\nimport Icon from 'cozy-ui/transpiled/react/Icon';\nimport MultiFilesIcon from 'cozy-ui/transpiled/react/Icons/MultiFiles';\nimport RightIcon from 'cozy-ui/transpiled/react/Icons/Right';\nimport { useI18n } from 'cozy-ui/transpiled/react/providers/I18n';\nimport SourcesItem from './SourcesItem';\nimport { buildFilesByIds } from '../../queries';\nconst Sources = ({ messageId, files }) => {\n    const [showSources, setShowSources] = useState(false);\n    const { t } = useI18n();\n    const ref = useRef();\n    const handleShowSources = () => {\n        setShowSources(v => !v);\n    };\n    // we want to scroll down to the sources button when it is displayed\n    useEffect(() => {\n        var _a;\n        (_a = ref.current) === null || _a === void 0 ? void 0 : _a.scrollIntoView(false);\n    }, []);\n    useEffect(() => {\n        if (showSources) {\n            const sourcesBottom = ref.current.getBoundingClientRect().bottom;\n            const innerContainer = document.getElementsByClassName('cozyDialogContent')[0];\n            const innerContainerBottom = innerContainer.getBoundingClientRect().bottom;\n            if (sourcesBottom > innerContainerBottom) {\n                ref.current.scrollIntoView(false);\n            }\n        }\n    }, [showSources]);\n    return (React.createElement(Box, { ref: ref, className: \"u-mt-1-half\", pl: \"44px\" },\n        React.createElement(Chip, { className: \"u-mb-1\", icon: React.createElement(Icon, { icon: MultiFilesIcon, className: \"u-ml-half\" }), label: t('assistant.sources', files.length), deleteIcon: React.createElement(Icon, { className: \"u-h-1\", icon: RightIcon, rotate: showSources ? 90 : 0 }), clickable: true, onClick: handleShowSources, onDelete: handleShowSources }),\n        React.createElement(Grow, { in: showSources, style: { transformOrigin: '0 0 0' }, mountOnEnter: true, unmountOnExit: true },\n            React.createElement(\"div\", null, files.map(file => (React.createElement(SourcesItem, { key: `${messageId}-${file._id}`, file: file })))))));\n};\nconst SourcesWithFilesQuery = ({ messageId, sources }) => {\n    const fileIds = sources.map(source => source.id);\n    const filesByIds = buildFilesByIds(fileIds);\n    const _a = useQuery(filesByIds.definition, filesByIds.options), { data: files } = _a, queryResult = __rest(_a, [\"data\"]);\n    const isLoading = isQueryLoading(queryResult);\n    if (isLoading || files.length === 0)\n        return null;\n    return React.createElement(Sources, { messageId: messageId, files: files });\n};\nexport default SourcesWithFilesQuery;\n","import React from 'react';\nimport { useClient, generateWebLink } from 'cozy-client';\nimport { isNote, isDocs } from 'cozy-client/dist/models/file';\nimport Icon from 'cozy-ui/transpiled/react/Icon';\nimport ListItem from 'cozy-ui/transpiled/react/ListItem';\nimport ListItemIcon from 'cozy-ui/transpiled/react/ListItemIcon';\nimport ListItemText from 'cozy-ui/transpiled/react/ListItemText';\nimport styles from './styles.styl';\nimport { getDriveMimeTypeIcon } from '../../Search/getIconForSearchResult';\nconst getSlug = file => {\n    if (isNote(file)) {\n        return 'notes';\n    }\n    if (isDocs(file)) {\n        return 'docs';\n    }\n    return 'drive';\n};\nconst getHash = (file, slug) => {\n    if (slug === 'notes') {\n        return `/n/${file._id}`;\n    }\n    if (slug === 'docs') {\n        return `/bridge/docs/${file.metadata.externalId}`;\n    }\n    return `/folder/${file.dir_id}/file/${file._id}`;\n};\nconst SourcesItem = ({ file }) => {\n    const client = useClient();\n    const slug = getSlug(file);\n    const hash = getHash(file, slug);\n    const docUrl = generateWebLink({\n        slug: slug,\n        cozyUrl: client === null || client === void 0 ? void 0 : client.getStackClient().uri,\n        subDomainType: client === null || client === void 0 ? void 0 : client.getInstanceOptions().subdomain,\n        hash: hash\n    });\n    return (React.createElement(ListItem, { className: styles['sourcesItem'], component: \"a\", href: docUrl, target: \"_blank\", button: true },\n        React.createElement(ListItemIcon, null,\n            React.createElement(Icon, { icon: getDriveMimeTypeIcon(file), size: 32 })),\n        React.createElement(ListItemText, { primary: file.name, secondary: file.path.replace(file.name, '') })));\n};\nexport default SourcesItem;\n","import React from 'react';\nimport ListItem from 'cozy-ui/transpiled/react/ListItem';\nimport ListItemText from 'cozy-ui/transpiled/react/ListItemText';\nimport { useI18n } from 'cozy-ui/transpiled/react/providers/I18n';\nconst NoResultItem = () => {\n    const { t } = useI18n();\n    return (React.createElement(ListItem, { size: \"small\" },\n        React.createElement(ListItemText, { primary: t('assistant.search.noItem') })));\n};\nexport default NoResultItem;\n","import React from 'react';\nimport ListItem from 'cozy-ui/transpiled/react/ListItem';\nimport ListItemText from 'cozy-ui/transpiled/react/ListItemText';\nimport { useI18n } from 'cozy-ui/transpiled/react/providers/I18n';\nconst NotEnoughItem = () => {\n    const { t } = useI18n();\n    return (React.createElement(ListItem, { size: \"small\" },\n        React.createElement(ListItemText, { primary: t('assistant.search.notEnough') })));\n};\nexport default NotEnoughItem;\n","import React from 'react';\nimport Paper from 'cozy-ui/transpiled/react/Paper';\nimport Popper from 'cozy-ui/transpiled/react/Popper';\nimport ResultMenuContent from './ResultMenuContent';\nimport styles from './styles.styl';\nconst ResultMenu = ({ anchorRef, listRef, onClear }) => {\n    return (React.createElement(Popper, { style: {\n            width: anchorRef.current.offsetWidth,\n            zIndex: 'var(--zIndex-popover)'\n        }, anchorEl: anchorRef.current, open: Boolean(anchorRef.current), placement: \"bottom-start\" },\n        React.createElement(Paper, { className: styles['resultMenu'], square: true },\n            React.createElement(\"div\", { className: styles['resultMenu-inner'] },\n                React.createElement(ResultMenuContent, { ref: listRef, onClear: onClear })))));\n};\nexport default ResultMenu;\n","import React, { forwardRef } from 'react';\nimport { useDataProxy } from 'cozy-dataproxy-lib';\nimport List from 'cozy-ui/transpiled/react/List';\nimport ListItemSkeleton from 'cozy-ui/transpiled/react/Skeletons/ListItemSkeleton';\nimport NoResultItem from './NoResultItem';\nimport NotEnoughItem from './NotEnoughItem';\nimport ResultMenuItem from './ResultMenuItem';\nimport { useSearch } from '../Search/SearchProvider';\nconst SearchResult = ({ onClear }) => {\n    const { isLoading, results, selectedIndex, searchValue } = useSearch();\n    if (isLoading && !(results === null || results === void 0 ? void 0 : results.length)) {\n        return (React.createElement(React.Fragment, null,\n            React.createElement(ListItemSkeleton, { hasSecondary: true }),\n            React.createElement(ListItemSkeleton, { hasSecondary: true }),\n            React.createElement(ListItemSkeleton, { hasSecondary: true })));\n    }\n    if (!isLoading && !(results === null || results === void 0 ? void 0 : results.length)) {\n        if (searchValue.length >= 3) {\n            return React.createElement(NoResultItem, null);\n        }\n        else {\n            return React.createElement(NotEnoughItem, null);\n        }\n    }\n    return results.map((result, idx) => (React.createElement(ResultMenuItem, { key: result.id || idx, icon: result.icon, slug: result.slug, url: result.url, primaryText: result.primary, secondaryText: result.secondary, secondaryUrl: result.secondaryUrl, query: searchValue, highlightQuery: \"true\", selected: selectedIndex === idx, onClear: onClear })));\n};\nconst ResultMenuContent = forwardRef(({ onClear }, ref) => {\n    const { dataProxyServicesAvailable } = useDataProxy();\n    return (React.createElement(List, { ref: ref }, dataProxyServicesAvailable && React.createElement(SearchResult, { onClear: onClear })));\n});\nResultMenuContent.displayName = 'ResultMenuContent';\nexport default ResultMenuContent;\n","import React, { useEffect, useRef } from 'react';\nimport AppIcon from 'cozy-ui/transpiled/react/AppIcon';\nimport Icon from 'cozy-ui/transpiled/react/Icon';\nimport ListItem from 'cozy-ui/transpiled/react/ListItem';\nimport ListItemIcon from 'cozy-ui/transpiled/react/ListItemIcon';\nimport ListItemText from 'cozy-ui/transpiled/react/ListItemText';\nimport SuggestionItemTextHighlighted from './SuggestionItemTextHighlighted';\nimport SuggestionItemTextSecondary from './SuggestionItemTextSecondary';\nimport styles from './styles.styl';\nconst ResultMenuItem = ({ icon, url, primaryText, secondaryText, secondaryUrl, slug, selected, query, highlightQuery = false, onClear }) => {\n    const itemRef = useRef();\n    const iconComponent = icon.type === 'component' ? (React.createElement(Icon, { icon: icon.component, size: 32 })) : icon.type === 'app' ? (React.createElement(AppIcon, { app: icon.app })) : (icon);\n    const primary = highlightQuery ? (React.createElement(SuggestionItemTextHighlighted, { text: primaryText, query: query })) : (primaryText);\n    const secondary = highlightQuery ? (React.createElement(SuggestionItemTextSecondary, { text: secondaryText, query: query, slug: slug, url: secondaryUrl })) : (secondaryText);\n    useEffect(() => {\n        var _a;\n        if (selected) {\n            (_a = itemRef === null || itemRef === void 0 ? void 0 : itemRef.current) === null || _a === void 0 ? void 0 : _a.scrollIntoView({\n                behavior: 'smooth',\n                block: 'nearest',\n                inline: 'nearest'\n            });\n        }\n    }, [selected]);\n    return (React.createElement(ListItem, { component: \"a\", href: url, ref: itemRef, size: \"small\", selected: selected, className: styles.resultMenuItem, onClick: onClear },\n        React.createElement(ListItemIcon, null, iconComponent),\n        React.createElement(ListItemText, { primary: primary, secondary: secondary })));\n};\nexport default ResultMenuItem;\n","export { default as AssistantLink } from './components/Search/AssistantLink';\nexport { default as AssistantDesktop } from './components/AssistantDesktop';\nexport { default as AssistantMobile } from './components/AssistantMobile';\nexport { default as AssistantDialog } from './components/Views/AssistantDialog';\nexport { default as SearchDialog } from './components/Views/SearchDialog';\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACzBA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA"}