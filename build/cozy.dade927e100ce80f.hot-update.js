"use strict";
self["webpackHotUpdatecozy_home"]("cozy", {
"./node_modules/cozy-search/dist/components/Conversations/Sources/styles.styl": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
// extracted by css-extract-rspack-plugin
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"sourcesItem":"node_modules-cozy-search-dist-components-Conversations-Sources-styles__sourcesItem-tB_a2R"});
    if(true) {
      (function() {
        var localsJsonString = "{\"sourcesItem\":\"node_modules-cozy-search-dist-components-Conversations-Sources-styles__sourcesItem-tB_a2R\"}";
        // 1761294540734
        var cssReload = (__webpack_require__("./node_modules/@rspack/core/dist/cssExtractHmr.js")/* .cssReload */.cssReload)(module.id, {});
        // only invalidate when locals change
        if (
          module.hot.data &&
          module.hot.data.value &&
          module.hot.data.value !== localsJsonString
        ) {
          module.hot.invalidate();
        } else {
          module.hot.accept();
        }
        module.hot.dispose(function(data) {
          data.value = localsJsonString;
          cssReload();
        });
      })();
    }
  

}),
"./node_modules/cozy-search/dist/components/Conversations/styles.styl": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
// extracted by css-extract-rspack-plugin
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"conversationBar":"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-GQkEEE","conversationBar-input":"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-input-SIs7Fw","conversationBarInput":"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-input-SIs7Fw","conversationBarSibling":"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling-rNqDq3","conversationBarSibling--started":"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling--started-DzEAwq","conversationBarSiblingStarted":"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling--started-DzEAwq"});
    if(true) {
      (function() {
        var localsJsonString = "{\"conversationBar\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-GQkEEE\",\"conversationBar-input\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-input-SIs7Fw\",\"conversationBarInput\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBar-input-SIs7Fw\",\"conversationBarSibling\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling-rNqDq3\",\"conversationBarSibling--started\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling--started-DzEAwq\",\"conversationBarSiblingStarted\":\"node_modules-cozy-search-dist-components-Conversations-styles__conversationBarSibling--started-DzEAwq\"}";
        // 1761294540733
        var cssReload = (__webpack_require__("./node_modules/@rspack/core/dist/cssExtractHmr.js")/* .cssReload */.cssReload)(module.id, {});
        // only invalidate when locals change
        if (
          module.hot.data &&
          module.hot.data.value &&
          module.hot.data.value !== localsJsonString
        ) {
          module.hot.invalidate();
        } else {
          module.hot.accept();
        }
        module.hot.dispose(function(data) {
          data.value = localsJsonString;
          cssReload();
        });
      })();
    }
  

}),
"./node_modules/cozy-search/dist/components/ResultMenu/styles.styl": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
// extracted by css-extract-rspack-plugin
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"resultMenu":"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-fu31kM","resultMenu-inner":"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-inner-fFyvIG","resultMenuInner":"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-inner-fFyvIG","resultMenuItem":"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenuItem-Zmnd8T"});
    if(true) {
      (function() {
        var localsJsonString = "{\"resultMenu\":\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-fu31kM\",\"resultMenu-inner\":\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-inner-fFyvIG\",\"resultMenuInner\":\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenu-inner-fFyvIG\",\"resultMenuItem\":\"node_modules-cozy-search-dist-components-ResultMenu-styles__resultMenuItem-Zmnd8T\"}";
        // 1761294540725
        var cssReload = (__webpack_require__("./node_modules/@rspack/core/dist/cssExtractHmr.js")/* .cssReload */.cssReload)(module.id, {});
        // only invalidate when locals change
        if (
          module.hot.data &&
          module.hot.data.value &&
          module.hot.data.value !== localsJsonString
        ) {
          module.hot.invalidate();
        } else {
          module.hot.accept();
        }
        module.hot.dispose(function(data) {
          data.value = localsJsonString;
          cssReload();
        });
      })();
    }
  

}),
"./node_modules/cozy-search/dist/components/Search/styles.styl": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
// extracted by css-extract-rspack-plugin
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"searchBarDesktop--result":"node_modules-cozy-search-dist-components-Search-styles__searchBarDesktop--result-YboYz0","searchBarDesktopResult":"node_modules-cozy-search-dist-components-Search-styles__searchBarDesktop--result-YboYz0","suggestionsPlaceholder":"node_modules-cozy-search-dist-components-Search-styles__suggestionsPlaceholder-UrfBlm","search-bar-icon":"node_modules-cozy-search-dist-components-Search-styles__search-bar-icon-qjIaoX","searchBarIcon":"node_modules-cozy-search-dist-components-Search-styles__search-bar-icon-qjIaoX"});
    if(true) {
      (function() {
        var localsJsonString = "{\"searchBarDesktop--result\":\"node_modules-cozy-search-dist-components-Search-styles__searchBarDesktop--result-YboYz0\",\"searchBarDesktopResult\":\"node_modules-cozy-search-dist-components-Search-styles__searchBarDesktop--result-YboYz0\",\"suggestionsPlaceholder\":\"node_modules-cozy-search-dist-components-Search-styles__suggestionsPlaceholder-UrfBlm\",\"search-bar-icon\":\"node_modules-cozy-search-dist-components-Search-styles__search-bar-icon-qjIaoX\",\"searchBarIcon\":\"node_modules-cozy-search-dist-components-Search-styles__search-bar-icon-qjIaoX\"}";
        // 1761294540721
        var cssReload = (__webpack_require__("./node_modules/@rspack/core/dist/cssExtractHmr.js")/* .cssReload */.cssReload)(module.id, {});
        // only invalidate when locals change
        if (
          module.hot.data &&
          module.hot.data.value &&
          module.hot.data.value !== localsJsonString
        ) {
          module.hot.invalidate();
        } else {
          module.hot.accept();
        }
        module.hot.dispose(function(data) {
          data.value = localsJsonString;
          cssReload();
        });
      })();
    }
  

}),
"./node_modules/cozy-search/dist/components/Stylus/Conversation.styl": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
// extracted by css-extract-rspack-plugin
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"conversationApp":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationApp-XOctCg","conversationHeader":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHeader-KiJK8n","conversationLayout":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationLayout-jpyGk4","conversationWindowContainer":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationWindowContainer-ZtLESh","conversationWindow":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationWindow-pCkGUY","conversationContainer":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer-dspnD9","conversationContainer--started":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer--started-y1Gdb3","conversationContainerStarted":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer--started-y1Gdb3","conversationHistory":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory-HUcghx","conversationHistory--open":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--open-cLBanX","conversationHistoryOpen":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--open-cLBanX","conversationHistory--mobile":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--mobile-hZLWmJ","conversationHistoryMobile":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--mobile-hZLWmJ","conversationSwitcher":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher-LiRacX","conversationSwitcher--closed":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher--closed-rUJ0NL","conversationSwitcherClosed":"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher--closed-rUJ0NL"});
    if(true) {
      (function() {
        var localsJsonString = "{\"conversationApp\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationApp-XOctCg\",\"conversationHeader\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHeader-KiJK8n\",\"conversationLayout\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationLayout-jpyGk4\",\"conversationWindowContainer\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationWindowContainer-ZtLESh\",\"conversationWindow\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationWindow-pCkGUY\",\"conversationContainer\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer-dspnD9\",\"conversationContainer--started\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer--started-y1Gdb3\",\"conversationContainerStarted\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationContainer--started-y1Gdb3\",\"conversationHistory\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory-HUcghx\",\"conversationHistory--open\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--open-cLBanX\",\"conversationHistoryOpen\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--open-cLBanX\",\"conversationHistory--mobile\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--mobile-hZLWmJ\",\"conversationHistoryMobile\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationHistory--mobile-hZLWmJ\",\"conversationSwitcher\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher-LiRacX\",\"conversationSwitcher--closed\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher--closed-rUJ0NL\",\"conversationSwitcherClosed\":\"node_modules-cozy-search-dist-components-Stylus-Conversation__conversationSwitcher--closed-rUJ0NL\"}";
        // 1761294540724
        var cssReload = (__webpack_require__("./node_modules/@rspack/core/dist/cssExtractHmr.js")/* .cssReload */.cssReload)(module.id, {});
        // only invalidate when locals change
        if (
          module.hot.data &&
          module.hot.data.value &&
          module.hot.data.value !== localsJsonString
        ) {
          module.hot.invalidate();
        } else {
          module.hot.accept();
        }
        module.hot.dispose(function(data) {
          data.value = localsJsonString;
          cssReload();
        });
      })();
    }
  

}),
"./node_modules/cozy-search/dist/components/AssistantDesktop.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var prop_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/prop-types/index.js");
/* ESM import */var prop_types__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__);
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_providers_I18n_useExtendI18n__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/I18n/useExtendI18n.js");
/* ESM import */var _AssistantProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantProvider.js");
/* ESM import */var _Search_SearchBar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/SearchBar.js");
/* ESM import */var _Search_SearchProvider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/SearchProvider.js");
/* ESM import */var _locales__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-search/dist/locales/index.js");







const AssistantDesktop = ({ componentsProps, searchOptions = {} }) => {
    (0,cozy_ui_transpiled_react_providers_I18n_useExtendI18n__WEBPACK_IMPORTED_MODULE_5__["default"])(_locales__WEBPACK_IMPORTED_MODULE_4__.locales);
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "u-mh-auto u-w-100 u-maw-100" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_AssistantProvider__WEBPACK_IMPORTED_MODULE_1__["default"], null,
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Search_SearchProvider__WEBPACK_IMPORTED_MODULE_3__["default"], { searchOptions: searchOptions },
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Search_SearchBar__WEBPACK_IMPORTED_MODULE_2__["default"], { componentsProps: componentsProps })))));
};
AssistantDesktop.propTypes = {
    componentsProps: prop_types__WEBPACK_IMPORTED_MODULE_6___default().shape({
        SearchBarDesktop: prop_types__WEBPACK_IMPORTED_MODULE_6___default().shape({
            elevation: (prop_types__WEBPACK_IMPORTED_MODULE_6___default().number),
            size: (prop_types__WEBPACK_IMPORTED_MODULE_6___default().string),
            hasHalfBorderRadius: (prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool),
            className: (prop_types__WEBPACK_IMPORTED_MODULE_6___default().string),
            disabledHover: (prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool)
        })
    })
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistantDesktop);


}),
"./node_modules/cozy-search/dist/components/AssistantIcon/ExpertIcon.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ExpertIcon: () => (ExpertIcon)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

const ExpertIcon = props => {
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("svg", Object.assign({ viewBox: "0 0 24 24", fill: "none" }, props),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("path", { d: "M15.088 18.923a.62.62 0 0 1 .504.159l.72.676L15.096 23l-.785-1.626-1.68.758 1.14-3.03zm3.824 0 1.361.186a.6.6 0 0 0 .284-.03l1.15 3.053-1.682-.758L19.242 23l-1.307-3.477.473-.441a.62.62 0 0 1 .504-.16M16.58 9.164a.62.62 0 0 1 .84 0l.719.673a.62.62 0 0 0 .505.16l.989-.138a.604.604 0 0 1 .68.479l.171.952c.033.177.148.33.312.415l.883.453c.287.148.402.49.26.774l-.439.868a.57.57 0 0 0 0 .513l.439.869a.577.577 0 0 1-.26.773l-.883.453a.59.59 0 0 0-.312.416l-.172.952a.603.603 0 0 1-.68.478l-.988-.135a.62.62 0 0 0-.505.157l-.718.673a.62.62 0 0 1-.84 0l-.72-.673a.62.62 0 0 0-.504-.157l-.988.135a.603.603 0 0 1-.68-.478l-.173-.952a.59.59 0 0 0-.312-.416l-.883-.453a.577.577 0 0 1-.26-.773l.439-.869a.57.57 0 0 0 0-.513l-.438-.868a.577.577 0 0 1 .26-.774l.882-.453a.59.59 0 0 0 .312-.415l.172-.952a.604.604 0 0 1 .681-.479l.988.137a.62.62 0 0 0 .504-.16zM11.022 13q.037.236.148.462l.316.64-.316.642a1.66 1.66 0 0 0 .717 2.198l.637.338.125.705c.036.2.107.384.204.55l-.171.465H3v-2c0-2.21 3.58-4 8-4zM17 10.886c-1.81 0-3.278 1.42-3.278 3.17 0 1.752 1.468 3.173 3.278 3.173 1.81-.001 3.277-1.421 3.277-3.172s-1.467-3.17-3.277-3.171m-.346 1.026c.109-.323.582-.323.69 0l.31.922a.36.36 0 0 0 .344.243h1.002c.351 0 .497.434.214.634l-.81.57a.35.35 0 0 0-.134.393l.311.92c.108.324-.274.594-.559.394l-.81-.57a.37.37 0 0 0-.426 0l-.81.57c-.285.2-.668-.07-.559-.393l.31-.921a.35.35 0 0 0-.132-.394l-.81-.57c-.284-.199-.138-.633.213-.633h1.002a.36.36 0 0 0 .345-.243zM11 3a4 4 0 0 1 3.536 5.866h-.01a1.67 1.67 0 0 0-1.84 1.197l-.004.012-.003.013-.025.112-.003.01-.002.013-.08.455A3.996 3.996 0 0 1 7 7a4 4 0 0 1 4-4" })));
};


}),
"./node_modules/cozy-search/dist/components/AssistantIcon/KnowledgeBaseIcon.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  KnowledgeBaseIcon: () => (KnowledgeBaseIcon)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

const KnowledgeBaseIcon = props => {
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("svg", Object.assign({ viewBox: "0 0 24 24", fill: "none" }, props),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("path", { d: "M12 18.91c-2.013 0-4.284-.466-6.074-1.245-.657-.289-1.22-.756-1.679-1.125a.15.15 0 0 0-.161-.016.16.16 0 0 0-.063.06.17.17 0 0 0-.023.084v.505c0 1.128.903 2.139 2.544 2.846C8.01 20.652 9.949 21 12 21s3.989-.348 5.456-.981C19.096 19.313 20 18.3 20 17.173v-.505q0-.046-.023-.085a.16.16 0 0 0-.063-.06.15.15 0 0 0-.161.017c-.46.369-1.022.836-1.68 1.125-1.79.78-4.06 1.246-6.073 1.246m8-12.113c-.031-1.11-.93-2.105-2.538-2.806C15.99 3.352 14.052 3 12 3s-3.99.352-5.458.99c-1.607.7-2.506 1.693-2.539 2.8L4 7.5c0 .258.2.662.563.994.428.39 1.063.776 1.837 1.114 1.648.719 3.741 1.146 5.6 1.146s3.952-.429 5.6-1.148c.774-.337 1.41-.723 1.837-1.114.363-.33.563-.734.563-.992z" }),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("path", { d: "M18.074 10.795c-1.79.78-4.06 1.245-6.074 1.245-2.013 0-4.284-.465-6.074-1.245-.657-.288-1.22-.755-1.679-1.125a.15.15 0 0 0-.224.044.17.17 0 0 0-.023.085v1.237c0 .257.2.582.563.913.428.391 1.063.777 1.837 1.114 1.648.718 3.741 1.147 5.6 1.147s3.952-.43 5.6-1.148c.774-.338 1.41-.723 1.837-1.115.363-.33.563-.654.563-.911V9.799q0-.046-.023-.085a.16.16 0 0 0-.063-.06.15.15 0 0 0-.161.017c-.46.369-1.022.836-1.68 1.124" }),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("path", { d: "M18.074 14.25c-1.79.78-4.06 1.245-6.074 1.245-2.013 0-4.284-.465-6.074-1.245-.657-.288-1.22-.756-1.679-1.125a.15.15 0 0 0-.224.043.17.17 0 0 0-.023.086v1.197c0 .257.2.581.562.912.428.392 1.064.777 1.838 1.115 1.648.718 3.74 1.147 5.6 1.147s3.952-.43 5.6-1.148c.774-.338 1.41-.723 1.837-1.114.363-.332.563-.656.563-.912v-1.197q0-.046-.023-.085a.16.16 0 0 0-.063-.06.15.15 0 0 0-.161.017c-.46.368-1.022.836-1.68 1.124" })));
};


}),
"./node_modules/cozy-search/dist/components/AssistantIcon/TwakeAssistantIcon.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  TwakeAssistantIcon: () => (TwakeAssistantIcon)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

const TwakeAssistantIcon = props => {
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("svg", Object.assign({ viewBox: "0 0 22 22", fill: "none" }, props),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M10.094.305a1.5 1.5 0 012.351.79l.005.02 1.581 6.135a1 1 0 00.718.719l6.136 1.58.016.005a1.5 1.5 0 010 2.892l-.016.004-6.135 1.581a1 1 0 00-.719.719l-1.582 6.135-.005.02a1.5 1.5 0 01-2.889 0l-.005-.02-1.581-6.135a1.001 1.001 0 00-.719-.719L1.115 12.45l-.023-.006a1.5 1.5 0 010-2.886l.023-.006L7.25 7.968a1 1 0 00.719-.718L9.55 1.115l.005-.02a1.5 1.5 0 01.538-.79zM11 3.503l1.095 4.247a3.002 3.002 0 002.155 2.155L18.498 11l-4.248 1.095a3.001 3.001 0 00-2.155 2.155L11 18.497 9.905 14.25a3 3 0 00-2.155-2.156L3.504 11 7.75 9.904A3 3 0 009.905 7.75L11 3.503zM19 1a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V5h-1a1 1 0 110-2h1V2a1 1 0 011-1zM3 15a1 1 0 011 1 1 1 0 110 2 1 1 0 11-2 0 1 1 0 110-2 1 1 0 011-1z" })));
};


}),
"./node_modules/cozy-search/dist/components/AssistantIcon/TwakeAssistantIconColor.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  TwakeAssistantIconColor: () => (TwakeAssistantIconColor)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

const TwakeAssistantIconColor = props => {
    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", Object.assign({ xmlns: "http://www.w3.org/2000/svg", width: 18, height: 18, viewBox: "0 0 18 18" }, props),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", { fill: "#4A1616", d: "M7.452 11.623a1.5 1.5 0 0 0-1.078-1.077L1.773 9.359a.375.375 0 0 1 0-.722l4.6-1.187a1.5 1.5 0 0 0 1.079-1.077l1.186-4.601a.375.375 0 0 1 .722 0l1.186 4.601a1.5 1.5 0 0 0 1.078 1.078l4.601 1.186a.375.375 0 0 1 0 .723l-4.601 1.186a1.5 1.5 0 0 0-1.078 1.077L9.36 16.225a.375.375 0 0 1-.723 0z" }),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", { fill: "url(#a)", d: "M7.452 11.623a1.5 1.5 0 0 0-1.078-1.077L1.773 9.359a.375.375 0 0 1 0-.722l4.6-1.187a1.5 1.5 0 0 0 1.079-1.077l1.186-4.601a.375.375 0 0 1 .722 0l1.186 4.601a1.5 1.5 0 0 0 1.078 1.078l4.601 1.186a.375.375 0 0 1 0 .723l-4.601 1.186a1.5 1.5 0 0 0-1.078 1.077L9.36 16.225a.375.375 0 0 1-.723 0z" }),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", { fill: "url(#b)", d: "M7.452 11.623a1.5 1.5 0 0 0-1.078-1.077L1.773 9.359a.375.375 0 0 1 0-.722l4.6-1.187a1.5 1.5 0 0 0 1.079-1.077l1.186-4.601a.375.375 0 0 1 .722 0l1.186 4.601a1.5 1.5 0 0 0 1.078 1.078l4.601 1.186a.375.375 0 0 1 0 .723l-4.601 1.186a1.5 1.5 0 0 0-1.078 1.077L9.36 16.225a.375.375 0 0 1-.723 0z" }),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", { fill: "#4A1616", d: "M14.998 1.682c.316 0 .571.256.571.572v.928h.929a.572.572 0 0 1 0 1.143h-.929v.929a.572.572 0 0 1-1.143 0v-.929h-.928a.572.572 0 0 1 0-1.143h.928v-.928c0-.316.256-.572.572-.572" }),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", { fill: "url(#c)", d: "M14.998 1.682c.316 0 .571.256.571.572v.928h.929a.572.572 0 0 1 0 1.143h-.929v.929a.572.572 0 0 1-1.143 0v-.929h-.928a.572.572 0 0 1 0-1.143h.928v-.928c0-.316.256-.572.572-.572" }),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", { fill: "url(#d)", d: "M14.998 1.682c.316 0 .571.256.571.572v.928h.929a.572.572 0 0 1 0 1.143h-.929v.929a.572.572 0 0 1-1.143 0v-.929h-.928a.572.572 0 0 1 0-1.143h.928v-.928c0-.316.256-.572.572-.572" }),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", { fill: "#4A1616", d: "M2.998 12.178c.315 0 .571.256.571.572v.178h.18a.572.572 0 0 1-.001 1.143H3.57v.179a.572.572 0 0 1-1.143 0v-.179h-.178a.572.572 0 0 1 0-1.143h.178v-.178c0-.316.256-.572.572-.572" }),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", { fill: "url(#e)", d: "M2.998 12.178c.315 0 .571.256.571.572v.178h.18a.572.572 0 0 1-.001 1.143H3.57v.179a.572.572 0 0 1-1.143 0v-.179h-.178a.572.572 0 0 1 0-1.143h.178v-.178c0-.316.256-.572.572-.572" }),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", { fill: "url(#f)", d: "M2.998 12.178c.315 0 .571.256.571.572v.178h.18a.572.572 0 0 1-.001 1.143H3.57v.179a.572.572 0 0 1-1.143 0v-.179h-.178a.572.572 0 0 1 0-1.143h.178v-.178c0-.316.256-.572.572-.572" }),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement("defs", null,
            react__WEBPACK_IMPORTED_MODULE_0__.createElement("linearGradient", { id: "a", x1: 16.5, x2: 1.5, y1: 10.248, y2: 10.248, gradientUnits: "userSpaceOnUse" },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 0.13, stopColor: "#A033FF" }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 0.61, stopColor: "#0094FF" }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 1, stopColor: "#4FB500" })),
            react__WEBPACK_IMPORTED_MODULE_0__.createElement("linearGradient", { id: "b", x1: 8.375, x2: 3.687, y1: 6.186, y2: 15.56, gradientUnits: "userSpaceOnUse" },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { stopColor: "#FFD600", stopOpacity: 0 }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 0.563, stopColor: "#FFC700" })),
            react__WEBPACK_IMPORTED_MODULE_0__.createElement("linearGradient", { id: "c", x1: 17.069, x2: 12.926, y1: 3.849, y2: 3.849, gradientUnits: "userSpaceOnUse" },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 0.13, stopColor: "#A033FF" }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 0.61, stopColor: "#0094FF" }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 1, stopColor: "#4FB500" })),
            react__WEBPACK_IMPORTED_MODULE_0__.createElement("linearGradient", { id: "d", x1: 14.825, x2: 14.704, y1: 3.539, y2: 4.416, gradientUnits: "userSpaceOnUse" },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { stopColor: "#FFD600", stopOpacity: 0 }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 0.563, stopColor: "#FFC700" })),
            react__WEBPACK_IMPORTED_MODULE_0__.createElement("linearGradient", { id: "e", x1: 4.319, x2: 1.676, y1: 13.595, y2: 13.595, gradientUnits: "userSpaceOnUse" },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 0.13, stopColor: "#A033FF" }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 0.61, stopColor: "#0094FF" }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 1, stopColor: "#4FB500" })),
            react__WEBPACK_IMPORTED_MODULE_0__.createElement("linearGradient", { id: "f", x1: 2.887, x2: 2.703, y1: 13.285, y2: 14.139, gradientUnits: "userSpaceOnUse" },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { stopColor: "#FFD600", stopOpacity: 0 }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop", { offset: 0.563, stopColor: "#FFC700" })))));
};


}),
"./node_modules/cozy-search/dist/components/AssistantMobile.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  AssistantMobile: () => (AssistantMobile),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/classnames/index.js");
/* ESM import */var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var prop_types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/prop-types/index.js");
/* ESM import */var prop_types__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__);
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/react-router/dist/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icon/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_Magnifier__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/Magnifier.js");
/* ESM import */var cozy_ui_transpiled_react_SearchBar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/SearchBar/index.js");
/* ESM import */var cozy_ui_transpiled_react_providers_I18n_useExtendI18n__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/I18n/useExtendI18n.js");
/* ESM import */var _locales__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/locales/index.js");
/* ESM import */var _Search_styles_styl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/styles.styl");










const AssistantMobile = ({ componentsProps }) => {
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useNavigate)();
    const { pathname } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useLocation)();
    (0,cozy_ui_transpiled_react_providers_I18n_useExtendI18n__WEBPACK_IMPORTED_MODULE_5__["default"])(_locales__WEBPACK_IMPORTED_MODULE_2__.locales);
    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(cozy_ui_transpiled_react_SearchBar__WEBPACK_IMPORTED_MODULE_6__["default"], Object.assign({}, componentsProps === null || componentsProps === void 0 ? void 0 : componentsProps.SearchBar, { size: "medium", icon: react__WEBPACK_IMPORTED_MODULE_1___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_7__["default"], { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('u-ml-1 u-mr-half', _Search_styles_styl__WEBPACK_IMPORTED_MODULE_3__["default"]["search-bar-icon"]), icon: cozy_ui_transpiled_react_Icons_Magnifier__WEBPACK_IMPORTED_MODULE_8__["default"], size: 16 }), type: "button", onClick: () => navigate(`connected/search?returnPath=${pathname}`) })));
};
AssistantMobile.propTypes = {
    componentsProps: prop_types__WEBPACK_IMPORTED_MODULE_9___default().shape({
        SearchBar: prop_types__WEBPACK_IMPORTED_MODULE_9___default().shape({
            className: (prop_types__WEBPACK_IMPORTED_MODULE_9___default().string)
        })
    })
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistantMobile);


}),
"./node_modules/cozy-search/dist/components/AssistantProvider.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  AssistantContext: () => (AssistantContext),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__),
  useAssistant: () => (useAssistant)
});
/* ESM import */var lodash_set__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/lodash/set.js");
/* ESM import */var lodash_set__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_set__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/react-router/dist/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-client/dist/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_6__);
/* ESM import */var cozy_realtime_dist_useRealtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-realtime/dist/useRealtime.js");
/* ESM import */var _helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/helpers.js");
/* ESM import */var _queries__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-search/dist/components/queries.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







const AssistantContext = react__WEBPACK_IMPORTED_MODULE_1___default().createContext();
const useAssistant = () => {
    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AssistantContext);
    if (!context) {
        throw new Error('useAssistant must be used within a AssistantProvider');
    }
    return context;
};
const AssistantProvider = ({ children }) => {
    const { conversationId } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_5__.useParams)();
    const client = (0,cozy_client__WEBPACK_IMPORTED_MODULE_6__.useClient)();
    const [assistantState, setAssistantState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({
        message: {},
        status: 'idle',
        messagesId: []
    });
    (0,cozy_realtime_dist_useRealtime__WEBPACK_IMPORTED_MODULE_2__["default"])(client, {
        [_queries__WEBPACK_IMPORTED_MODULE_4__.CHAT_CONVERSATIONS_DOCTYPE]: {
            created: res => {
                (0,_helpers__WEBPACK_IMPORTED_MODULE_3__.pushMessagesIdInState)(conversationId, res, setAssistantState);
            },
            updated: res => {
                (0,_helpers__WEBPACK_IMPORTED_MODULE_3__.pushMessagesIdInState)(conversationId, res, setAssistantState);
            }
        }
    }, []);
    (0,cozy_realtime_dist_useRealtime__WEBPACK_IMPORTED_MODULE_2__["default"])(client, {
        [_queries__WEBPACK_IMPORTED_MODULE_4__.CHAT_EVENTS_DOCTYPE]: {
            created: res => {
                setAssistantState(prevState => {
                    // to exclude realtime messages if not relevant to the actual conversation
                    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_3__.isMessageForThisConversation)(res, prevState.messagesId)) {
                        return prevState;
                    }
                    if (res.object === 'done') {
                        if (prevState.status !== 'idle') {
                            return Object.assign(Object.assign({}, prevState), { status: 'idle' });
                        }
                    }
                    if (res.object === 'delta') {
                        const message = lodash_set__WEBPACK_IMPORTED_MODULE_0___default()(prevState.message, res.position, res.content);
                        return Object.assign(Object.assign({}, prevState), { message, status: 'writing' });
                    }
                    return prevState;
                });
            }
        }
    }, []);
    const clearAssistant = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => setAssistantState({
        message: {},
        status: 'pending',
        messagesId: []
    }), []);
    const onAssistantExecute = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((_a, callback_1) => __awaiter(void 0, [_a, callback_1], void 0, function* ({ value, conversationId }, callback) {
        if (!value)
            return;
        callback === null || callback === void 0 ? void 0 : callback();
        clearAssistant();
        yield client.stackClient.fetchJSON('POST', `/ai/chat/conversations/${conversationId}`, {
            q: value
        });
        setAssistantState(v => (Object.assign(Object.assign({}, v), { status: 'pending' })));
    }), [client, clearAssistant]);
    const value = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({
        assistantState,
        setAssistantState,
        clearAssistant,
        onAssistantExecute
    }), [assistantState, clearAssistant, onAssistantExecute]);
    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(AssistantContext.Provider, { value: value }, children));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (react__WEBPACK_IMPORTED_MODULE_1___default().memo(AssistantProvider));


}),
"./node_modules/cozy-search/dist/components/Conversations/ChatAssistantItem.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icon/index.js");
/* ESM import */var cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/I18n/index.js");
/* ESM import */var _ChatItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ChatItem.js");
/* ESM import */var _Sources_Sources__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/Sources/Sources.js");
/* ESM import */var _AssistantIcon_TwakeAssistantIcon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantIcon/TwakeAssistantIcon.js");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};






const ChatAssistantItem = (_a) => {
    var { label, className, id, sources } = _a, props = __rest(_a, ["label", "className", "id", "sources"]);
    const { t } = (0,cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_4__.useI18n)();
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null,
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ChatItem__WEBPACK_IMPORTED_MODULE_1__["default"], Object.assign({}, props, { label: label, className: className, icon: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_5__["default"], { icon: _AssistantIcon_TwakeAssistantIcon__WEBPACK_IMPORTED_MODULE_3__.TwakeAssistantIcon, size: 24, className: "u-mh-half", color: "var(--primaryColor)" }), name: t('assistant.name') })),
        (sources === null || sources === void 0 ? void 0 : sources.length) > 0 && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Sources_Sources__WEBPACK_IMPORTED_MODULE_2__["default"], { messageId: id, sources: sources })));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChatAssistantItem);


}),
"./node_modules/cozy-search/dist/components/Conversations/ChatConversation.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-client/dist/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_7__);
/* ESM import */var _ChatAssistantItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ChatAssistantItem.js");
/* ESM import */var _ChatRealtimeAnswer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ChatRealtimeAnswer.js");
/* ESM import */var _ChatUserItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ChatUserItem.js");
/* ESM import */var _AssistantProvider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantProvider.js");
/* ESM import */var _helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-search/dist/components/helpers.js");
/* ESM import */var _queries__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-search/dist/components/queries.js");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};








const ChatConversation = ({ conversation, myself }) => {
    var _a, _b, _c, _d, _e;
    const { assistantState } = (0,_AssistantProvider__WEBPACK_IMPORTED_MODULE_4__.useAssistant)();
    const listRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
    const instantMessageKeysCount = Object.keys(assistantState.message).length;
    // test on role === user to be sure the last response is inside io.cozy.ai.chat.conversations
    const showRealtimeMessage = assistantState.status !== 'idle' ||
        ((_c = (_a = conversation === null || conversation === void 0 ? void 0 : conversation.messages) === null || _a === void 0 ? void 0 : _a[((_b = conversation === null || conversation === void 0 ? void 0 : conversation.messages) === null || _b === void 0 ? void 0 : _b.length) - 1]) === null || _c === void 0 ? void 0 : _c.role) ===
            'user';
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
        var _a, _b;
        // force scroll down if new message of change in AI instant response
        (_b = (_a = listRef.current) === null || _a === void 0 ? void 0 : _a.lastElementChild) === null || _b === void 0 ? void 0 : _b.scrollIntoView(false);
    }, [
        (_d = conversation === null || conversation === void 0 ? void 0 : conversation.messages) === null || _d === void 0 ? void 0 : _d.length,
        assistantState.status,
        instantMessageKeysCount
    ]);
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { ref: listRef }, (_e = conversation === null || conversation === void 0 ? void 0 : conversation.messages) === null || _e === void 0 ? void 0 :
        _e.map((message, idx) => {
            if (message.role === 'user') {
                return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ChatUserItem__WEBPACK_IMPORTED_MODULE_3__["default"], { key: conversation._id + '--' + idx, className: "u-mt-1-half", myself: myself, label: message.content }));
            }
            if (idx !== (conversation === null || conversation === void 0 ? void 0 : conversation.messages.length) - 1) {
                return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ChatAssistantItem__WEBPACK_IMPORTED_MODULE_1__["default"], { key: conversation._id + '--' + idx, className: "u-mt-1-half", id: message.id, label: message.content, sources: message.sources }));
            }
            if (showRealtimeMessage) {
                return null;
            }
            return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ChatAssistantItem__WEBPACK_IMPORTED_MODULE_1__["default"], { key: conversation._id + '--' + idx, className: "u-mt-1-half", id: message.id, label: message.content, sources: message.sources }));
        }),
        showRealtimeMessage && (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ChatRealtimeAnswer__WEBPACK_IMPORTED_MODULE_2__["default"], { isLoading: assistantState.status === 'pending', label: (0,_helpers__WEBPACK_IMPORTED_MODULE_5__.getInstantMessage)(assistantState) }))));
};
const ChatConversationWithQuery = ({ id, myself }) => {
    const chatConversationQuery = (0,_queries__WEBPACK_IMPORTED_MODULE_6__.buildChatConversationQueryById)(id);
    const _a = (0,cozy_client__WEBPACK_IMPORTED_MODULE_7__.useQuery)(chatConversationQuery.definition, chatConversationQuery.options), { data: chatConversation } = _a, queryResult = __rest(_a, ["data"]);
    const isLoading = (0,cozy_client__WEBPACK_IMPORTED_MODULE_7__.isQueryLoading)(queryResult);
    if (isLoading)
        return null;
    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ChatConversation, { conversation: chatConversation, myself: myself });
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChatConversationWithQuery);


}),
"./node_modules/cozy-search/dist/components/Conversations/ChatItem.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_Box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Box/index.js");
/* ESM import */var cozy_ui_transpiled_react_Typography__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Typography/index.js");
/* ESM import */var _ChatItemLabel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ChatItemLabel.js");




const ChatItem = ({ className, icon, name, label }) => {
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null,
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Box__WEBPACK_IMPORTED_MODULE_2__["default"], { className: className, display: "flex", alignItems: "center", gridGap: 12 },
            icon,
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Typography__WEBPACK_IMPORTED_MODULE_3__["default"], { variant: "h6", display: "inline" }, name)),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Box__WEBPACK_IMPORTED_MODULE_2__["default"], { pl: "44px" },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ChatItemLabel__WEBPACK_IMPORTED_MODULE_1__["default"], { label: label }))));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChatItem);


}),
"./node_modules/cozy-search/dist/components/Conversations/ChatItemLabel.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_Markdown__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Markdown/index.js");
/* ESM import */var _helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/helpers.js");



const ChatItemLabel = ({ label }) => {
    if (typeof label === 'string') {
        const content = (0,_helpers__WEBPACK_IMPORTED_MODULE_1__.sanitizeChatContent)(label);
        return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Markdown__WEBPACK_IMPORTED_MODULE_2__["default"], { content: content });
    }
    return label;
};
// need memo to avoid rendering all label of all items
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (react__WEBPACK_IMPORTED_MODULE_0___default().memo(ChatItemLabel));


}),
"./node_modules/cozy-search/dist/components/Conversations/ChatRealtimeAnswer.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_Skeleton__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Skeleton/index.js");
/* ESM import */var _ChatAssistantItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ChatAssistantItem.js");



const ChatRealtimeAnswer = ({ isLoading, label }) => {
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ChatAssistantItem__WEBPACK_IMPORTED_MODULE_1__["default"], { className: "u-mt-1-half", label: isLoading ? (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", null,
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Skeleton__WEBPACK_IMPORTED_MODULE_2__["default"], { width: "100%" }),
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Skeleton__WEBPACK_IMPORTED_MODULE_2__["default"], { width: "60%" }))) : (label) }));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChatRealtimeAnswer);


}),
"./node_modules/cozy-search/dist/components/Conversations/ChatUserItem.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_client_dist_models_contact__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-client/dist/models/contact.js");
/* ESM import */var cozy_ui_transpiled_react_Avatar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Avatar/index.js");
/* ESM import */var cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/I18n/index.js");
/* ESM import */var _ChatItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ChatItem.js");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};





const ChatUserItem = (_a) => {
    var { className, label, myself } = _a, props = __rest(_a, ["className", "label", "myself"]);
    const { t } = (0,cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_2__.useI18n)();
    const contact = myself || { displayName: t('assistant.default_username') };
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ChatItem__WEBPACK_IMPORTED_MODULE_1__["default"], Object.assign({}, props, { className: className, icon: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Avatar__WEBPACK_IMPORTED_MODULE_3__["default"], { text: (0,cozy_client_dist_models_contact__WEBPACK_IMPORTED_MODULE_4__.getInitials)(contact), size: 24 }), name: (0,cozy_client_dist_models_contact__WEBPACK_IMPORTED_MODULE_4__.getDisplayName)(contact), label: label })));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChatUserItem);


}),
"./node_modules/cozy-search/dist/components/Conversations/Conversation.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-client/dist/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_3__);
/* ESM import */var _ChatConversation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ChatConversation.js");
/* ESM import */var _queries__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/queries.js");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};




const Conversation = ({ id }) => {
    const myselfQuery = (0,_queries__WEBPACK_IMPORTED_MODULE_2__.buildMyselfQuery)();
    const _a = (0,cozy_client__WEBPACK_IMPORTED_MODULE_3__.useQuery)(myselfQuery.definition, myselfQuery.options), { data: myselves } = _a, queryMyselfResult = __rest(_a, ["data"]);
    const isLoading = (0,cozy_client__WEBPACK_IMPORTED_MODULE_3__.isQueryLoading)(queryMyselfResult);
    if (isLoading)
        return null;
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "u-maw-7 u-mh-auto" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ChatConversation__WEBPACK_IMPORTED_MODULE_1__["default"], { id: id, myself: myselves[0] })));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Conversation);


}),
"./node_modules/cozy-search/dist/components/Conversations/ConversationBar.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./node_modules/react-router/dist/index.js");
/* ESM import */var cozy_ui_transpiled_react_Buttons__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Buttons/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icon/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_Paperplane__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/Paperplane.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_Stop__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/Stop.js");
/* ESM import */var cozy_ui_transpiled_react_SearchBar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/SearchBar/index.js");
/* ESM import */var cozy_ui_transpiled_react_hooks_useEventListener__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/hooks/useEventListener.js");
/* ESM import */var cozy_ui_transpiled_react_providers_Breakpoints__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/Breakpoints/index.js");
/* ESM import */var cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/I18n/index.js");
/* ESM import */var _styles_styl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/styles.styl");
/* ESM import */var _AssistantProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantProvider.js");
/* ESM import */var cozy_ui_transpiled_react_Typography__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Typography/index.js");
/* ESM import */var _AssistantIcon_TwakeAssistantIcon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantIcon/TwakeAssistantIcon.js");
/* ESM import */var _AssistantIcon_TwakeAssistantIconColor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantIcon/TwakeAssistantIconColor.js");
/* ESM import */var _AssistantIcon_ExpertIcon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantIcon/ExpertIcon.js");
/* ESM import */var _AssistantIcon_KnowledgeBaseIcon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantIcon/KnowledgeBaseIcon.js");
/* ESM import */var _ConversationChips__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ConversationChips.js");



















const ConversationBar = ({ assistantStatus, hasConversationStarted }) => {
    const { t } = (0,cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_8__.useI18n)();
    const { isMobile } = (0,cozy_ui_transpiled_react_providers_Breakpoints__WEBPACK_IMPORTED_MODULE_9__.useBreakpoints)();
    const { onAssistantExecute } = (0,_AssistantProvider__WEBPACK_IMPORTED_MODULE_2__.useAssistant)();
    const [inputValue, setInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');
    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
    const { conversationId } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_10__.useParams)();
    // to adjust input height for multiline when typing in it
    (0,cozy_ui_transpiled_react_hooks_useEventListener__WEBPACK_IMPORTED_MODULE_11__["default"])(inputRef.current, 'input', () => {
        inputRef.current.style.height = 'auto'; // to resize input when emptying it
        inputRef.current.style.height = `${inputRef.current.scrollHeight}px`;
    });
    const handleClear = () => {
        setInputValue('');
    };
    const handleChange = ev => {
        setInputValue(ev.target.value);
    };
    const handleStop = () => {
        // not supported right now
        return;
    };
    const handleClick = () => onAssistantExecute({ value: inputValue, conversationId }, () => {
        handleClear();
        inputRef.current.style.height = 'auto';
    });
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "u-w-100 u-maw-7 u-mh-auto" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: `${_styles_styl__WEBPACK_IMPORTED_MODULE_1__["default"].conversationBarSibling} ${hasConversationStarted ? _styles_styl__WEBPACK_IMPORTED_MODULE_1__["default"]["conversationBarSibling--started"] : ''} u-flex u-flex-column u-flex-items-center u-flex-justify-end` },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Typography__WEBPACK_IMPORTED_MODULE_12__["default"], { variant: "h3", align: "center", className: "u-mb-2" }, t('assistant.conversationBar.startMessage'))),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_SearchBar__WEBPACK_IMPORTED_MODULE_13__["default"], { className: _styles_styl__WEBPACK_IMPORTED_MODULE_1__["default"].conversationBar, icon: null, size: "auto", placeholder: t('assistant.search.placeholder'), value: inputValue, disabledClear: true, componentsProps: {
                inputBase: {
                    inputRef: inputRef,
                    className: 'u-pv-0',
                    rows: 1,
                    multiline: true,
                    inputProps: {
                        className: _styles_styl__WEBPACK_IMPORTED_MODULE_1__["default"]["conversationBar-input"]
                    },
                    autoFocus: !isMobile,
                    startAdornment: (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Buttons__WEBPACK_IMPORTED_MODULE_14__["default"], { classes: { label: 'u-w-2 u-h-2' }, label: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], { icon: "plus", size: 14 }), variant: "text", color: "inherit", style: { marginRight: 2, marginLeft: -12 } })),
                    endAdornment: (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { style: {
                            marginRight: -8,
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            gap: 4,
                            flex: "none"
                        } }, assistantStatus !== 'idle' ? (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Buttons__WEBPACK_IMPORTED_MODULE_14__["default"], { component: "div", className: "u-miw-auto u-mih-auto u-w-2 u-h-2 u-bdrs-circle u-p-1 u-mr-1", classes: { label: 'u-flex u-w-auto' }, label: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], { icon: cozy_ui_transpiled_react_Icons_Stop__WEBPACK_IMPORTED_MODULE_16__["default"], size: 12 }), onClick: handleStop })) : (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Buttons__WEBPACK_IMPORTED_MODULE_14__["default"], { component: "div", className: "u-miw-auto u-mih-auto u-w-2 u-h-2 u-bdrs-circle u-p-1 u-mr-1", classes: { label: 'u-flex u-w-auto' }, label: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_15__["default"], { icon: cozy_ui_transpiled_react_Icons_Paperplane__WEBPACK_IMPORTED_MODULE_17__["default"], size: 14 }), disabled: !inputValue, onClick: handleClick })))),
                    onKeyDown: ev => {
                        if (!isMobile) {
                            if (ev.shiftKey && ev.key === 'Enter') {
                                return ev;
                            }
                            if (ev.key === 'Enter') {
                                ev.preventDefault(); // prevent form submit
                                return handleClick();
                            }
                        }
                    }
                }
            }, onChange: handleChange }),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: `${_styles_styl__WEBPACK_IMPORTED_MODULE_1__["default"].conversationBarSibling} ${hasConversationStarted ? _styles_styl__WEBPACK_IMPORTED_MODULE_1__["default"]["conversationBarSibling--started"] : ''} u-flex u-flex-column u-flex-items-center u-flex-justify-start` },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ConversationChips__WEBPACK_IMPORTED_MODULE_7__["default"], null))));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ConversationBar);


}),
"./node_modules/cozy-search/dist/components/Conversations/ConversationChips.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_Buttons__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Buttons/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icon/index.js");
/* ESM import */var cozy_ui_transpiled_react_Chips__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Chips/index.js");
/* ESM import */var cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/I18n/index.js");
/* ESM import */var _styles_styl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/styles.styl");
/* ESM import */var _AssistantProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantProvider.js");
/* ESM import */var _AssistantIcon_TwakeAssistantIcon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantIcon/TwakeAssistantIcon.js");
/* ESM import */var _AssistantIcon_TwakeAssistantIconColor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantIcon/TwakeAssistantIconColor.js");
/* ESM import */var _AssistantIcon_ExpertIcon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantIcon/ExpertIcon.js");
/* ESM import */var _AssistantIcon_KnowledgeBaseIcon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantIcon/KnowledgeBaseIcon.js");
/* ESM import */var cozy_ui_transpiled_react_Alert__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Alert/index.js");
/* ESM import */var cozy_ui_transpiled_react_AlertTitle__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/AlertTitle/index.js");




















const ChatModes = () => {
    const { t } = (0,cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_7__.useI18n)();
    const experts = [
        { key: "legal", label: t("assistant.experts.legal"), icon: 'justice', external: true },
        { key: 'financial', label: t("assistant.experts.financial"), icon: 'benefit' },
        { key: 'image_creation', label: t("assistant.experts.image_creation"), icon: 'image', external: true },
        { key: 'marketing', label: t("assistant.experts.marketing"), icon: 'lightning' },
        { key: 'code_assistant', label: t("assistant.experts.code_assistant"), icon: 'lightning' },
        { key: 'brainstorming', label: t("assistant.experts.brainstorming"), icon: 'lightbulb' },
        { key: 'travel_planner', label: t("assistant.experts.travel_planner"), icon: 'plane' },
        { key: 'fitness_coach', label: t("assistant.experts.fitness_coach"), icon: 'fitness' },
        { key: 'recipe_suggester', label: t("assistant.experts.recipe_suggester"), icon: 'restaurant' }
    ];
    const knowledges = [
        { key: "twake_knowledge", label: t('assistant.knowledge_bases.twake_knowledge'), icon: _AssistantIcon_TwakeAssistantIconColor__WEBPACK_IMPORTED_MODULE_4__.TwakeAssistantIconColor },
        { key: "web", label: t('assistant.knowledge_bases.web'), icon: 'globe' },
        { key: "linagora_client", label: t('assistant.knowledge_bases.linagora_client'), icon: 'collect' },
        { key: "security_procedures", label: t('assistant.knowledge_bases.security_procedures'), icon: 'lock' },
        { key: "other_1", label: t('assistant.knowledge_bases.other'), icon: 'globe' },
        { key: "other_2", label: t('assistant.knowledge_bases.other'), icon: 'globe' },
        { key: "other_3", label: t('assistant.knowledge_bases.other'), icon: 'globe' },
        { key: "other_4", label: t('assistant.knowledge_bases.other'), icon: 'globe' },
        { key: "other_5", label: t('assistant.knowledge_bases.other'), icon: 'globe' },
        { key: "other_6", label: t('assistant.knowledge_bases.other'), icon: 'globe' }
    ];
    const [selectedExpert, setSelectedExpert] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);
    const [selectedKnowledges, setSelectedKnowledges] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(knowledges.map(knowledge => knowledge.key));
    const prevExpertRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
    const isExternalExpertSelected = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {
        const expert = selectedExpert ? experts.find(e => e.key === selectedExpert) : null;
        return expert ? expert.external : false;
    }, [selectedExpert, experts]);
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
        const prevExpert = prevExpertRef.current;
        const currentExpert = selectedExpert ? experts.find(e => e.key === selectedExpert) : null;
        if (!selectedExpert && prevExpert !== null) {
            setSelectedKnowledges(knowledges.map(knowledge => knowledge.key));
        }
        prevExpertRef.current = selectedExpert;
    }, [selectedExpert, experts, knowledges]);
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "u-flex u-flex-column u-flex-items-start u-flex-justify-start, u-w-100" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ChatKnowledges, { knowledges: knowledges, selectedKnowledges: selectedKnowledges, setSelectedKnowledges: setSelectedKnowledges }),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ChatExperts, { experts: experts, selectedExpert: selectedExpert, setSelectedExpert: setSelectedExpert }),
        isExternalExpertSelected && (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ExternalExpertWarning, null))));
};
const ChatExperts = ({ experts, selectedExpert, setSelectedExpert }) => {
    const { t } = (0,cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_7__.useI18n)();
    const expertsState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => experts.map(expert => (Object.assign(Object.assign({}, expert), { selected: expert.key === selectedExpert }))), [selectedExpert, experts]);
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ChatChips, { modes: expertsState, onModeSelect: key => {
            setSelectedExpert(key === selectedExpert ? null : key);
        }, splice: 4, startIcon: _AssistantIcon_ExpertIcon__WEBPACK_IMPORTED_MODULE_5__.ExpertIcon, moreEndLabel: t('assistant.conversationBar.more.experts') }));
};
const ChatKnowledges = ({ knowledges, selectedKnowledges, setSelectedKnowledges }) => {
    const { t } = (0,cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_7__.useI18n)();
    const knowledgesState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => knowledges.map(knowledge => (Object.assign(Object.assign({}, knowledge), { selected: selectedKnowledges.includes(knowledge.key) }))), [selectedKnowledges]);
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ChatChips, { modes: knowledgesState, onModeSelect: key => {
            if (selectedKnowledges.includes(key)) {
                setSelectedKnowledges(selectedKnowledges.filter(k => k !== key));
            }
            else {
                setSelectedKnowledges([...selectedKnowledges, key]);
            }
        }, splice: 4, startIcon: _AssistantIcon_KnowledgeBaseIcon__WEBPACK_IMPORTED_MODULE_6__.KnowledgeBaseIcon, moreEndLabel: t('assistant.conversationBar.more.knowledge_bases') }));
};
const ChatChips = ({ modes, onModeSelect, splice = 3, startIcon = _AssistantIcon_ExpertIcon__WEBPACK_IMPORTED_MODULE_5__.ExpertIcon, moreEndLabel }) => {
    const visibleModes = modes.slice(0, splice);
    const remainingCount = modes.length - splice;
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "u-flex u-flex-row u-flex-wrap u-w-100 u-flex-justify-between u-flex-items-center u-mb-1", style: { gap: 8 } },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], { icon: startIcon, size: 24, style: { opacity: 0.6 } }),
        visibleModes.map(mode => {
            const warningColor = mode.selected ? 'var(--warningColor)' : undefined;
            return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Chips__WEBPACK_IMPORTED_MODULE_9__["default"], { icon: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], { icon: mode.icon, style: { marginLeft: 12 } }), label: mode.label, clickable: true, onDelete: mode.external && (() => { }), deleteIcon: mode.external && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], { icon: "openwith", className: "u-h-1", style: { fill: warningColor, color: warningColor } }), color: (mode.external && mode.selected) ? 'warning' : undefined, key: mode.label, variant: mode.selected ? 'ghost' : 'default', style: {
                    borderStyle: 'solid'
                }, className: "u-mr-0", onClick: () => {
                    onModeSelect(mode.key);
                } }));
        }),
        remainingCount > 0 && (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Chips__WEBPACK_IMPORTED_MODULE_9__["default"], { label: `+${remainingCount} ${moreEndLabel || 'more'}`, clickable: true, variant: "outlined" }))));
};
const ExternalExpertWarning = () => {
    const { t } = (0,cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_7__.useI18n)();
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Alert__WEBPACK_IMPORTED_MODULE_10__["default"], { severity: "warning", style: { width: 'calc(100% - (16px * 2))' }, action: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Buttons__WEBPACK_IMPORTED_MODULE_11__["default"], { variant: "text", label: t('assistant.experts.external_warning.know_more'), color: "warning" }) },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_AlertTitle__WEBPACK_IMPORTED_MODULE_12__["default"], null, t('assistant.experts.external_warning.title')),
        t('assistant.experts.external_warning.description')));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ChatModes);


}),
"./node_modules/cozy-search/dist/components/Conversations/ConversationLayout.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_providers_Breakpoints__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/Breakpoints/index.js");
/* ESM import */var cozy_ui_transpiled_react_Buttons__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Buttons/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icon/index.js");
/* ESM import */var _AssistantProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantProvider.js");
/* ESM import */var _Conversations_Conversation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/Conversation.js");
/* ESM import */var _Conversations_ConversationBar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ConversationBar.js");
/* ESM import */var _Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-search/dist/components/Stylus/Conversation.styl");
/* ESM import */var _ConversationList__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ConversationList.js");
/* ESM import */var cozy_ui_transpiled_react_AppTitle__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/AppTitle/index.js");
/* ESM import */var _queries__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-search/dist/components/queries.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/cozy-client/dist/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_8__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
















const ConversationLayout = ({ conversationId, assistantState }) => {
    const { isMobile } = (0,cozy_ui_transpiled_react_providers_Breakpoints__WEBPACK_IMPORTED_MODULE_7__.useBreakpoints)();
    const chatConversationQuery = (0,_queries__WEBPACK_IMPORTED_MODULE_6__.buildChatConversationQueryById)(conversationId !== null && conversationId !== void 0 ? conversationId : "");
    const _a = (0,cozy_client__WEBPACK_IMPORTED_MODULE_8__.useQuery)(chatConversationQuery.definition, chatConversationQuery.options), { data: chatConversation } = _a, queryResult = __rest(_a, ["data"]);
    const hasConversationStarted = chatConversation && chatConversation.messages.length > 0;
    const [historyOpen, setHistoryOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!isMobile);
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: `${_Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"].conversationApp}` },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: `${_Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"].conversationHeader}` },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_AppTitle__WEBPACK_IMPORTED_MODULE_9__["default"], { slug: "home" })),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: `${_Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"].conversationLayout}` },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: `${_Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"].conversationSwitcher} ${historyOpen ? _Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"]["conversationSwitcher--open"] : _Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"]["conversationSwitcher--closed"]}` },
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Buttons__WEBPACK_IMPORTED_MODULE_10__["default"], { label: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_11__["default"], { icon: "burger" }), onClick: () => { setHistoryOpen(!historyOpen); }, variant: historyOpen ? "ghost" : "text", className: "u-bdrs-4", style: { padding: 0, minWidth: 36, height: 30 } }),
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Buttons__WEBPACK_IMPORTED_MODULE_10__["default"], { label: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_11__["default"], { icon: "magnifier" }), variant: "text", className: "u-bdrs-4", style: { padding: 0, minWidth: 36, height: 30 } })),
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: `u-flex u-flex-column u-flex-items-center u-flex-justify-center ${_Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"].conversationHistory} ${historyOpen ? _Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"]["conversationHistory--open"] : ''} ${isMobile ? _Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"]["conversationHistory--mobile"] : ''}` },
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ConversationList__WEBPACK_IMPORTED_MODULE_5__["default"], { onNewConversation: () => { } })),
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: `${_Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"].conversationWindowContainer}` },
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: `u-flex u-flex-column u-flex-items-center u-flex-justify-center ${_Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"].conversationWindow}` },
                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: `${_Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"].conversationContainer} ${hasConversationStarted ? _Stylus_Conversation_styl__WEBPACK_IMPORTED_MODULE_4__["default"]["conversationContainer--started"] : ''}` },
                        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Conversations_Conversation__WEBPACK_IMPORTED_MODULE_2__["default"], { id: conversationId })),
                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Conversations_ConversationBar__WEBPACK_IMPORTED_MODULE_3__["default"], { assistantStatus: assistantState.status, hasConversationStarted: hasConversationStarted }))))));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ConversationLayout);


}),
"./node_modules/cozy-search/dist/components/Conversations/ConversationList.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_Buttons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Buttons/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icon/index.js");
/* ESM import */var cozy_ui_transpiled_react_List__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/List/index.js");
/* ESM import */var cozy_ui_transpiled_react_ListItem__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItem/index.js");
/* ESM import */var cozy_ui_transpiled_react_ListItemText__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItemText/index.js");
/* ESM import */var cozy_ui_transpiled_react_Typography__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Typography/index.js");
/* ESM import */var cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/I18n/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-client/dist/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_4__);
/* ESM import */var _queries__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/queries.js");
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/react-router/dist/index.js");
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/react-router-dom/dist/index.js");
/* ESM import */var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/helpers.js");












const ConversationList = ({ onNewConversation }) => {
    const { t } = (0,cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_3__.useI18n)();
    const client = (0,cozy_client__WEBPACK_IMPORTED_MODULE_4__.useClient)();
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_5__.useNavigate)();
    const { conversationId } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_5__.useParams)();
    const [searchParams] = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_6__.useSearchParams)();
    const recentConvsQuery = (0,_queries__WEBPACK_IMPORTED_MODULE_1__.buildRecentConversationsQuery)();
    const goToConversation = (conversationId) => {
        navigate(`/assistant/${conversationId}${searchParams.toString() ? `?${searchParams.toString()}` : ''}`);
    };
    const createNewConversation = () => {
        const newConversationId = (0,_helpers__WEBPACK_IMPORTED_MODULE_2__.makeConversationId)();
        goToConversation(newConversationId);
    };
    const { data: conversations, historyFetchStatus } = (0,cozy_client__WEBPACK_IMPORTED_MODULE_4__.useQuery)(recentConvsQuery.definition, recentConvsQuery.options);
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "u-flex u-flex-column u-w-100 u-h-100 u-flex-align-center u-flex-justify-start" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { style: {
                height: 44
            } }),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "u-m-1-half u-mb-0" },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Buttons__WEBPACK_IMPORTED_MODULE_7__["default"], { startIcon: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_8__["default"], { icon: "plus", size: 14 }), label: t('assistant.conversationBar.newChat'), onClick: createNewConversation, variant: "primary", className: "u-w-100 u-bdrs-6" })),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Typography__WEBPACK_IMPORTED_MODULE_9__["default"], { className: "u-ph-half u-mh-1 u-mb-half", variant: "subtitle1", color: "textSecondary" }, t('assistant.conversationList.recentConversations')),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { style: {
                height: '100%',
                width: '100%',
                overflow: 'scroll'
            } },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_List__WEBPACK_IMPORTED_MODULE_10__["default"], { className: "u-ph-half", disabledGutters: true }, conversations && conversations.map((conv, index) => {
                var _a, _b, _c;
                return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItem__WEBPACK_IMPORTED_MODULE_11__["default"], { dense: true, button: true, className: "u-bdrs-4 u-mb-half", key: index, style: {
                        backgroundColor: conversationId === conv.id ? 'var(--defaultBackgroundColor)' : undefined,
                    }, onClick: () => goToConversation(conv.id) },
                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItemText__WEBPACK_IMPORTED_MODULE_12__["default"], null,
                        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Typography__WEBPACK_IMPORTED_MODULE_9__["default"], { variant: "body2" }, (_a = conv.messages[conv.messages.length - 1]) === null || _a === void 0 ? void 0 : _a.content),
                        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Typography__WEBPACK_IMPORTED_MODULE_9__["default"], { variant: "subtitle1", color: "textSecondary" }, (_b = conv.messages[conv.messages.length - 1]) === null || _b === void 0 ? void 0 : _b.content),
                        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Typography__WEBPACK_IMPORTED_MODULE_9__["default"], { variant: "caption", color: "textSecondary" }, new Date((_c = conv.cozyMetadata) === null || _c === void 0 ? void 0 : _c.updatedAt).toLocaleString()))));
            })))));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ConversationList);


}),
"./node_modules/cozy-search/dist/components/Conversations/Sources/Sources.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./node_modules/cozy-client/dist/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_10__);
/* ESM import */var cozy_ui_transpiled_react_Box__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Box/index.js");
/* ESM import */var cozy_ui_transpiled_react_Chips__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Chips/index.js");
/* ESM import */var cozy_ui_transpiled_react_Grow__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Grow/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icon/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_MultiFiles__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/MultiFiles.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_Right__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/Right.js");
/* ESM import */var cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/I18n/index.js");
/* ESM import */var _SourcesItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/Sources/SourcesItem.js");
/* ESM import */var _queries__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/queries.js");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};











const Sources = ({ messageId, files }) => {
    const [showSources, setShowSources] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);
    const { t } = (0,cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_3__.useI18n)();
    const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
    const handleShowSources = () => {
        setShowSources(v => !v);
    };
    // we want to scroll down to the sources button when it is displayed
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
        var _a;
        (_a = ref.current) === null || _a === void 0 ? void 0 : _a.scrollIntoView(false);
    }, []);
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
        if (showSources) {
            const sourcesBottom = ref.current.getBoundingClientRect().bottom;
            const innerContainer = document.getElementsByClassName('cozyDialogContent')[0];
            const innerContainerBottom = innerContainer.getBoundingClientRect().bottom;
            if (sourcesBottom > innerContainerBottom) {
                ref.current.scrollIntoView(false);
            }
        }
    }, [showSources]);
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Box__WEBPACK_IMPORTED_MODULE_4__["default"], { ref: ref, className: "u-mt-1-half", pl: "44px" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Chips__WEBPACK_IMPORTED_MODULE_5__["default"], { className: "u-mb-1", icon: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_6__["default"], { icon: cozy_ui_transpiled_react_Icons_MultiFiles__WEBPACK_IMPORTED_MODULE_7__["default"], className: "u-ml-half" }), label: t('assistant.sources', files.length), deleteIcon: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_6__["default"], { className: "u-h-1", icon: cozy_ui_transpiled_react_Icons_Right__WEBPACK_IMPORTED_MODULE_8__["default"], rotate: showSources ? 90 : 0 }), clickable: true, onClick: handleShowSources, onDelete: handleShowSources }),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Grow__WEBPACK_IMPORTED_MODULE_9__["default"], { in: showSources, style: { transformOrigin: '0 0 0' }, mountOnEnter: true, unmountOnExit: true },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, files.map(file => (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_SourcesItem__WEBPACK_IMPORTED_MODULE_1__["default"], { key: `${messageId}-${file._id}`, file: file })))))));
};
const SourcesWithFilesQuery = ({ messageId, sources }) => {
    const fileIds = sources.map(source => source.id);
    const filesByIds = (0,_queries__WEBPACK_IMPORTED_MODULE_2__.buildFilesByIds)(fileIds);
    const _a = (0,cozy_client__WEBPACK_IMPORTED_MODULE_10__.useQuery)(filesByIds.definition, filesByIds.options), { data: files } = _a, queryResult = __rest(_a, ["data"]);
    const isLoading = (0,cozy_client__WEBPACK_IMPORTED_MODULE_10__.isQueryLoading)(queryResult);
    if (isLoading || files.length === 0)
        return null;
    return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Sources, { messageId: messageId, files: files });
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SourcesWithFilesQuery);


}),
"./node_modules/cozy-search/dist/components/Conversations/Sources/SourcesItem.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-client/dist/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_4__);
/* ESM import */var cozy_client_dist_models_file__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-client/dist/models/file.js");
/* ESM import */var cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icon/index.js");
/* ESM import */var cozy_ui_transpiled_react_ListItem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItem/index.js");
/* ESM import */var cozy_ui_transpiled_react_ListItemIcon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItemIcon/index.js");
/* ESM import */var cozy_ui_transpiled_react_ListItemText__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItemText/index.js");
/* ESM import */var _styles_styl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/Sources/styles.styl");
/* ESM import */var _Search_getIconForSearchResult__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/getIconForSearchResult.js");









const getSlug = file => {
    if ((0,cozy_client_dist_models_file__WEBPACK_IMPORTED_MODULE_3__.isNote)(file)) {
        return 'notes';
    }
    if ((0,cozy_client_dist_models_file__WEBPACK_IMPORTED_MODULE_3__.isDocs)(file)) {
        return 'docs';
    }
    return 'drive';
};
const getHash = (file, slug) => {
    if (slug === 'notes') {
        return `/n/${file._id}`;
    }
    if (slug === 'docs') {
        return `/bridge/docs/${file.metadata.externalId}`;
    }
    return `/folder/${file.dir_id}/file/${file._id}`;
};
const SourcesItem = ({ file }) => {
    const client = (0,cozy_client__WEBPACK_IMPORTED_MODULE_4__.useClient)();
    const slug = getSlug(file);
    const hash = getHash(file, slug);
    const docUrl = (0,cozy_client__WEBPACK_IMPORTED_MODULE_4__.generateWebLink)({
        slug: slug,
        cozyUrl: client === null || client === void 0 ? void 0 : client.getStackClient().uri,
        subDomainType: client === null || client === void 0 ? void 0 : client.getInstanceOptions().subdomain,
        hash: hash
    });
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItem__WEBPACK_IMPORTED_MODULE_5__["default"], { className: _styles_styl__WEBPACK_IMPORTED_MODULE_1__["default"].sourcesItem, component: "a", href: docUrl, target: "_blank", button: true },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItemIcon__WEBPACK_IMPORTED_MODULE_6__["default"], null,
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_7__["default"], { icon: (0,_Search_getIconForSearchResult__WEBPACK_IMPORTED_MODULE_2__.getDriveMimeTypeIcon)(file), size: 32 })),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItemText__WEBPACK_IMPORTED_MODULE_8__["default"], { primary: file.name, secondary: file.path.replace(file.name, '') })));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SourcesItem);


}),
"./node_modules/cozy-search/dist/components/ResultMenu/NoResultItem.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_ListItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItem/index.js");
/* ESM import */var cozy_ui_transpiled_react_ListItemText__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItemText/index.js");
/* ESM import */var cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/I18n/index.js");




const NoResultItem = () => {
    const { t } = (0,cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_1__.useI18n)();
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItem__WEBPACK_IMPORTED_MODULE_2__["default"], { size: "small" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItemText__WEBPACK_IMPORTED_MODULE_3__["default"], { primary: t('assistant.search.noItem') })));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NoResultItem);


}),
"./node_modules/cozy-search/dist/components/ResultMenu/NotEnoughItem.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_ListItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItem/index.js");
/* ESM import */var cozy_ui_transpiled_react_ListItemText__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItemText/index.js");
/* ESM import */var cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/I18n/index.js");




const NotEnoughItem = () => {
    const { t } = (0,cozy_ui_transpiled_react_providers_I18n__WEBPACK_IMPORTED_MODULE_1__.useI18n)();
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItem__WEBPACK_IMPORTED_MODULE_2__["default"], { size: "small" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItemText__WEBPACK_IMPORTED_MODULE_3__["default"], { primary: t('assistant.search.notEnough') })));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NotEnoughItem);


}),
"./node_modules/cozy-search/dist/components/ResultMenu/ResultMenu.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_Paper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Paper/index.js");
/* ESM import */var cozy_ui_transpiled_react_Popper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Popper/index.js");
/* ESM import */var _ResultMenuContent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/ResultMenu/ResultMenuContent.js");
/* ESM import */var _styles_styl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/ResultMenu/styles.styl");





const ResultMenu = ({ anchorRef, listRef, onClear }) => {
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Popper__WEBPACK_IMPORTED_MODULE_3__["default"], { style: {
            width: anchorRef.current.offsetWidth,
            zIndex: 'var(--zIndex-popover)'
        }, anchorEl: anchorRef.current, open: Boolean(anchorRef.current), placement: "bottom-start" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Paper__WEBPACK_IMPORTED_MODULE_4__["default"], { className: _styles_styl__WEBPACK_IMPORTED_MODULE_2__["default"].resultMenu, square: true },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: _styles_styl__WEBPACK_IMPORTED_MODULE_2__["default"]["resultMenu-inner"] },
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ResultMenuContent__WEBPACK_IMPORTED_MODULE_1__["default"], { ref: listRef, onClear: onClear })))));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ResultMenu);


}),
"./node_modules/cozy-search/dist/components/ResultMenu/ResultMenuContent.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_dataproxy_lib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-dataproxy-lib/dist/index.js");
/* ESM import */var cozy_ui_transpiled_react_List__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/List/index.js");
/* ESM import */var cozy_ui_transpiled_react_Skeletons_ListItemSkeleton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Skeletons/ListItemSkeleton.js");
/* ESM import */var _NoResultItem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/ResultMenu/NoResultItem.js");
/* ESM import */var _NotEnoughItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/ResultMenu/NotEnoughItem.js");
/* ESM import */var _ResultMenuItem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-search/dist/components/ResultMenu/ResultMenuItem.js");
/* ESM import */var _Search_SearchProvider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/SearchProvider.js");








const SearchResult = ({ onClear }) => {
    const { isLoading, results, selectedIndex, searchValue } = (0,_Search_SearchProvider__WEBPACK_IMPORTED_MODULE_5__.useSearch)();
    if (isLoading && !(results === null || results === void 0 ? void 0 : results.length)) {
        return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null,
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Skeletons_ListItemSkeleton__WEBPACK_IMPORTED_MODULE_6__["default"], { hasSecondary: true }),
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Skeletons_ListItemSkeleton__WEBPACK_IMPORTED_MODULE_6__["default"], { hasSecondary: true }),
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Skeletons_ListItemSkeleton__WEBPACK_IMPORTED_MODULE_6__["default"], { hasSecondary: true })));
    }
    if (!isLoading && !(results === null || results === void 0 ? void 0 : results.length)) {
        if (searchValue.length >= 3) {
            return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_NoResultItem__WEBPACK_IMPORTED_MODULE_2__["default"], null);
        }
        else {
            return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_NotEnoughItem__WEBPACK_IMPORTED_MODULE_3__["default"], null);
        }
    }
    return results.map((result, idx) => (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ResultMenuItem__WEBPACK_IMPORTED_MODULE_4__["default"], { key: result.id || idx, icon: result.icon, slug: result.slug, url: result.url, primaryText: result.primary, secondaryText: result.secondary, secondaryUrl: result.secondaryUrl, query: searchValue, highlightQuery: "true", selected: selectedIndex === idx, onClear: onClear })));
};
const ResultMenuContent = (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({ onClear }, ref) => {
    const { dataProxyServicesAvailable } = (0,cozy_dataproxy_lib__WEBPACK_IMPORTED_MODULE_1__.useDataProxy)();
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_List__WEBPACK_IMPORTED_MODULE_7__["default"], { ref: ref }, dataProxyServicesAvailable && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(SearchResult, { onClear: onClear })));
});
ResultMenuContent.displayName = 'ResultMenuContent';
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ResultMenuContent);


}),
"./node_modules/cozy-search/dist/components/ResultMenu/ResultMenuItem.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_AppIcon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/AppIcon/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icon/index.js");
/* ESM import */var cozy_ui_transpiled_react_ListItem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItem/index.js");
/* ESM import */var cozy_ui_transpiled_react_ListItemIcon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItemIcon/index.js");
/* ESM import */var cozy_ui_transpiled_react_ListItemText__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ListItemText/index.js");
/* ESM import */var _SuggestionItemTextHighlighted__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/ResultMenu/SuggestionItemTextHighlighted.js");
/* ESM import */var _SuggestionItemTextSecondary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/ResultMenu/SuggestionItemTextSecondary.js");
/* ESM import */var _styles_styl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/ResultMenu/styles.styl");









const ResultMenuItem = ({ icon, url, primaryText, secondaryText, secondaryUrl, slug, selected, query, highlightQuery = false, onClear }) => {
    const itemRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();
    const iconComponent = icon.type === 'component' ? (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_4__["default"], { icon: icon.component, size: 32 })) : icon.type === 'app' ? (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_AppIcon__WEBPACK_IMPORTED_MODULE_5__["default"], { app: icon.app })) : (icon);
    const primary = highlightQuery ? (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_SuggestionItemTextHighlighted__WEBPACK_IMPORTED_MODULE_1__["default"], { text: primaryText, query: query })) : (primaryText);
    const secondary = highlightQuery ? (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_SuggestionItemTextSecondary__WEBPACK_IMPORTED_MODULE_2__["default"], { text: secondaryText, query: query, slug: slug, url: secondaryUrl })) : (secondaryText);
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
        var _a;
        if (selected) {
            (_a = itemRef === null || itemRef === void 0 ? void 0 : itemRef.current) === null || _a === void 0 ? void 0 : _a.scrollIntoView({
                behavior: 'smooth',
                block: 'nearest',
                inline: 'nearest'
            });
        }
    }, [selected]);
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItem__WEBPACK_IMPORTED_MODULE_6__["default"], { component: "a", href: url, ref: itemRef, size: "small", selected: selected, className: _styles_styl__WEBPACK_IMPORTED_MODULE_3__["default"].resultMenuItem, onClick: onClear },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItemIcon__WEBPACK_IMPORTED_MODULE_7__["default"], null, iconComponent),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_ListItemText__WEBPACK_IMPORTED_MODULE_8__["default"], { primary: primary, secondary: secondary })));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ResultMenuItem);


}),
"./node_modules/cozy-search/dist/components/ResultMenu/SuggestionItemTextHighlighted.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/**
 * Code copied and adapted from cozy-drive
 *
 * See source: https://github.com/cozy/cozy-drive/blob/fbe2df67199683b23a40f476ccdacb00ee027459/src/modules/search/components/SuggestionItemTextHighlighted.jsx
 */

const normalizeString = str => str
    .toString()
    .toLowerCase()
    .replace(/\//g, ' ')
    .normalize('NFD')
    .replace(/[\u0300-\u036f]/g, '')
    .split(' ');
/**
 * Add <b> on part that equlas query into each result
 *
 * @param {Array} searchResult - list of results
 * @param {string} query - search input
 * @returns list of results with the query highlighted
 */
const highlightQueryTerms = (searchResult, query) => {
    const normalizedQueryTerms = normalizeString(query);
    const normalizedResultTerms = normalizeString(searchResult);
    const matchedIntervals = [];
    const spacerLength = 1;
    let currentIndex = 0;
    normalizedResultTerms.forEach(resultTerm => {
        normalizedQueryTerms.forEach(queryTerm => {
            const index = resultTerm.indexOf(queryTerm);
            if (index >= 0) {
                matchedIntervals.push({
                    from: currentIndex + index,
                    to: currentIndex + index + queryTerm.length
                });
            }
        });
        currentIndex += resultTerm.length + spacerLength;
    });
    // matchedIntervals can overlap, so we merge them.
    // - sort the intervals by starting index
    // - add the first interval to the stack
    // - for every interval,
    // - - add it to the stack if it doesn't overlap with the stack top
    // - - or extend the stack top if the start overlaps and the new interval's top is bigger
    const mergedIntervals = matchedIntervals
        .sort((intervalA, intervalB) => intervalA.from > intervalB.from)
        .reduce((computedIntervals, newInterval) => {
        if (computedIntervals.length === 0 ||
            computedIntervals[computedIntervals.length - 1].to < newInterval.from) {
            computedIntervals.push(newInterval);
        }
        else if (computedIntervals[computedIntervals.length - 1].to < newInterval.to) {
            computedIntervals[computedIntervals.length - 1].to = newInterval.to;
        }
        return computedIntervals;
    }, []);
    // create an array containing the entire search result, with special characters, and the intervals surrounded y `<b>` tags
    const slicedOriginalResult = mergedIntervals.length > 0
        ? [react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", { key: "0" }, searchResult.slice(0, mergedIntervals[0].from))]
        : searchResult;
    for (let i = 0, l = mergedIntervals.length; i < l; ++i) {
        slicedOriginalResult.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", { className: "u-primaryColor" }, searchResult.slice(mergedIntervals[i].from, mergedIntervals[i].to)));
        if (i + 1 < l)
            slicedOriginalResult.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", null, searchResult.slice(mergedIntervals[i].to, mergedIntervals[i + 1].from)));
    }
    if (mergedIntervals.length > 0)
        slicedOriginalResult.push(react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", null, searchResult.slice(mergedIntervals[mergedIntervals.length - 1].to, searchResult.length)));
    return slicedOriginalResult;
};
const SuggestionItemTextHighlighted = ({ text, query }) => {
    if (!text)
        return null;
    const textHighlighted = highlightQueryTerms(text, query);
    if (Array.isArray(textHighlighted)) {
        return textHighlighted.map((item, idx) => (Object.assign(Object.assign({}, item), { key: idx })));
    }
    return textHighlighted;
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SuggestionItemTextHighlighted);


}),
"./node_modules/cozy-search/dist/components/ResultMenu/SuggestionItemTextSecondary.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_AppLinker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/AppLinker/index.js");
/* ESM import */var cozy_ui_transpiled_react_Link__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Link/index.js");
/* ESM import */var cozy_ui_transpiled_react_providers_Breakpoints__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/Breakpoints/index.js");
/* ESM import */var _SuggestionItemTextHighlighted__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/ResultMenu/SuggestionItemTextHighlighted.js");
/**
 * Code copied and adapted from cozy-drive
 *
 * See source: https://github.com/cozy/cozy-drive/blob/fbe2df67199683b23a40f476ccdacb00ee027459/src/modules/search/components/SuggestionItemTextSecondary.jsx
 */





const SuggestionItemTextSecondary = ({ text, query, url, slug }) => {
    const { isMobile } = (0,cozy_ui_transpiled_react_providers_Breakpoints__WEBPACK_IMPORTED_MODULE_2__["default"])();
    if (isMobile || !url) {
        return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_SuggestionItemTextHighlighted__WEBPACK_IMPORTED_MODULE_1__["default"], { text: text, query: query });
    }
    const app = { slug };
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_AppLinker__WEBPACK_IMPORTED_MODULE_3__["default"], { app: app, href: url }, ({ href, onClick }) => (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Link__WEBPACK_IMPORTED_MODULE_4__["default"], { color: "textSecondary", underline: "hover", href: href, onClick: e => {
            e.stopPropagation();
            if (typeof onClick == 'function') {
                onClick(e);
            }
        } },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_SuggestionItemTextHighlighted__WEBPACK_IMPORTED_MODULE_1__["default"], { text: text, query: query, slug: slug })))));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SuggestionItemTextSecondary);


}),
"./node_modules/cozy-search/dist/components/Search/AssistantButton.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  AssistantButton: () => (AssistantButton)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/react-router/dist/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icon/index.js");
/* ESM import */var cozy_ui_transpiled_react_IconButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/IconButton/index.js");
/* ESM import */var cozy_ui_transpiled_react_InputAdornment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/InputAdornment/index.js");
/* ESM import */var _AssistantIcon_TwakeAssistantIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantIcon/TwakeAssistantIcon.js");
/* ESM import */var _AssistantProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantProvider.js");
/* ESM import */var _helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/helpers.js");








const AssistantButton = ({ size }) => {
    const { onAssistantExecute } = (0,_AssistantProvider__WEBPACK_IMPORTED_MODULE_2__.useAssistant)();
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useNavigate)();
    const { pathname } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useLocation)();
    const onClick = () => {
        const conversationId = (0,_helpers__WEBPACK_IMPORTED_MODULE_3__.makeConversationId)();
        onAssistantExecute({ value: '', conversationId });
        navigate(`assistant/${conversationId}?returnPath=${pathname}`);
    };
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_InputAdornment__WEBPACK_IMPORTED_MODULE_5__["default"], { position: "end", className: "u-mr-half" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_IconButton__WEBPACK_IMPORTED_MODULE_6__["default"], { onClick: onClick, size: "small", color: "primary" },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_7__["default"], { icon: _AssistantIcon_TwakeAssistantIcon__WEBPACK_IMPORTED_MODULE_1__.TwakeAssistantIcon, size: size === 'medium' ? 24 : 16 }))));
};


}),
"./node_modules/cozy-search/dist/components/Search/AssistantLink.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/react-router/dist/index.js");
/* ESM import */var _AssistantProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantProvider.js");
/* ESM import */var _helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/helpers.js");




const AssistantLink = ({ children }) => {
    const { onAssistantExecute } = (0,_AssistantProvider__WEBPACK_IMPORTED_MODULE_1__.useAssistant)();
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_3__.useNavigate)();
    const { pathname } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_3__.useLocation)();
    const openAssistant = () => {
        if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.isAssistantEnabled)())
            return;
        const conversationId = (0,_helpers__WEBPACK_IMPORTED_MODULE_2__.makeConversationId)();
        onAssistantExecute({ value: '', conversationId });
        navigate(`assistant/${conversationId}?returnPath=${pathname}`);
    };
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_AssistantProvider__WEBPACK_IMPORTED_MODULE_1__["default"], null, children({
        openAssistant
    })));
};
const AssistantLinkWrapper = ({ children }) => {
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_AssistantProvider__WEBPACK_IMPORTED_MODULE_1__["default"], null,
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(AssistantLink, null, children)));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistantLinkWrapper);


}),
"./node_modules/cozy-search/dist/components/Search/Icons/DocsIcon.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

// TODO: should be moved in cozy-ui
const DocsIcon = () => {
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("svg", { viewBox: "0 0 32 33", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("path", { d: "M21.6305 29.5812C22.7983 29.2538 23.9166 28.6562 24.6505 27.6003C25.3749 26.5663 25.5789 25.2547 25.5789 23.9925V5.50099C25.5789 5.17358 25.5611 4.84557 25.5216 4.52148C26.1016 4.74961 26.5486 5.12658 26.8626 5.65239C27.2331 6.25024 27.4184 7.03757 27.4184 8.01435V26.7964C27.4184 28.1184 27.0942 29.1078 26.4458 29.7646C25.7974 30.4214 24.8207 30.7498 23.5155 30.7498H16.4209C16.5889 30.7204 16.7574 30.6901 16.9262 30.659C18.4067 30.3944 19.9713 30.0354 21.6185 29.5846L21.6305 29.5812Z", fill: "#C9191E" }),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M4.58203 26.405V7.5977C4.58203 6.45251 4.88938 5.58519 5.50408 4.99575C6.1272 4.40631 6.95242 4.08212 7.97972 4.02318C9.49542 3.93055 10.9311 3.80425 12.2868 3.64425C13.6425 3.47584 14.9393 3.28217 16.1771 3.06324C17.4234 2.8443 18.6359 2.60011 19.8148 2.33065C21.0274 2.04435 21.9578 2.1875 22.6062 2.7601C23.2546 3.33269 23.5788 4.24632 23.5788 5.50099V23.9925C23.5788 25.0956 23.3893 25.9166 23.0104 26.4555C22.6315 27.0029 21.9915 27.4028 21.0905 27.6554C19.4906 28.0933 17.9833 28.4386 16.5687 28.6912C15.154 28.9522 13.7731 29.1501 12.4258 29.2848C11.0785 29.4196 9.69751 29.5248 8.28286 29.6006C7.11241 29.668 6.20299 29.4238 5.5546 28.868C4.90622 28.3207 4.58203 27.4997 4.58203 26.405ZM9.20865 11.0124C11.0635 10.8944 12.7632 10.7131 14.3075 10.4683C14.6822 10.4072 15.0564 10.3436 15.4291 10.2776C15.8192 10.2085 16.1013 9.86859 16.1013 9.47337C16.1013 8.96154 15.638 8.57609 15.135 8.66189C14.846 8.71118 14.5555 8.75909 14.2635 8.80562C12.7346 9.04923 11.0452 9.22998 9.19523 9.3477C8.91819 9.36558 8.69776 9.45188 8.55608 9.62391C8.42209 9.78661 8.35645 9.98229 8.35645 10.2053C8.35645 10.4321 8.43296 10.6295 8.58568 10.7918L8.58783 10.7939C8.75336 10.9595 8.96369 11.0311 9.20865 11.0124ZM9.20801 15.206C11.0631 15.088 12.763 14.9066 14.3075 14.6619C15.8588 14.4089 17.3936 14.1138 18.9112 13.7766C19.2191 13.7081 19.4498 13.6003 19.5652 13.433C19.6786 13.2721 19.7347 13.0876 19.7347 12.8832C19.7347 12.6526 19.6469 12.454 19.476 12.2926C19.2921 12.1189 19.0348 12.0784 18.7304 12.1411L18.7285 12.1415C17.2823 12.4694 15.794 12.7553 14.2635 12.9992C12.7346 13.2428 11.0452 13.4235 9.19523 13.5413C8.91819 13.5591 8.69776 13.6454 8.55608 13.8175C8.42276 13.9794 8.35645 14.1705 8.35645 14.3863C8.35645 14.6203 8.43209 14.8223 8.58558 14.9854L8.59 14.9896C8.75499 15.1449 8.96316 15.2155 9.20551 15.2062L9.20801 15.206ZM9.20847 19.3994C11.0634 19.2729 12.7631 19.0874 14.3075 18.8427C15.8589 18.5982 17.3934 18.3073 18.9112 17.97C19.2199 17.9014 19.4508 17.7891 19.566 17.6127C19.6783 17.4529 19.7347 17.2733 19.7347 17.0766C19.7347 16.8461 19.6469 16.6474 19.476 16.4861C19.2921 16.3123 19.0348 16.2718 18.7304 16.3345L18.729 16.3348C17.2827 16.6543 15.7942 16.9361 14.2635 17.18C12.7345 17.4236 11.045 17.6086 9.19495 17.7347C8.91804 17.7526 8.69771 17.8389 8.55608 18.0109C8.42276 18.1728 8.35645 18.3639 8.35645 18.5797C8.35645 18.8137 8.43209 19.0158 8.58558 19.1789L8.59 19.183C8.75499 19.3383 8.96316 19.4089 9.20551 19.3996L9.20847 19.3994ZM14.3075 23.007C12.7632 23.2518 11.0635 23.4331 9.20867 23.5512C8.9637 23.5698 8.75337 23.4982 8.58783 23.3326L8.58572 23.3305C8.433 23.1682 8.35645 22.9708 8.35645 22.7441C8.35645 22.521 8.42209 22.3253 8.55608 22.1626C8.69776 21.9906 8.91827 21.9043 9.19531 21.8864C11.0453 21.7687 12.7346 21.588 14.2635 21.3443C14.5555 21.2978 14.846 21.2499 15.135 21.2006C15.638 21.1148 16.1013 21.5003 16.1013 22.0121C16.1013 22.4073 15.8192 22.7472 15.4291 22.8163C15.0564 22.8823 14.6822 22.9459 14.3075 23.007Z", fill: "#000091" })));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DocsIcon);


}),
"./node_modules/cozy-search/dist/components/Search/Icons/EncryptedFolderIcon.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

const EncryptedFolderIcon = props => {
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("svg", Object.assign({ viewBox: "0 0 32 32", fill: "none", xmlns: "http://www.w3.org/2000/svg" }, props),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("path", { opacity: "0.34", fillRule: "evenodd", clipRule: "evenodd", d: "M12.9657 1C13.5206 1 14.2876 1.3125 14.6803 1.6995L16 3H30.0059C31.1072 3 32 3.89498 32 4.997V27.003C32 28.1059 31.1107 29 29.9983 29H2.00174C0.896211 29 0 28.1001 0 27.0088V1.99653C0 1.44616 0.448999 1 1.00472 1H12.9657Z", fill: "#297EF2" }),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M1 1C0.447715 1 0 1.44772 0 2V6C0 6.55228 0.447716 7 1 7H13.5858C13.851 7 14.1054 6.89464 14.2929 6.70711L15.7071 5.29289C15.8946 5.10536 16.149 5 16.4142 5H32C32 3.89543 31.1046 3 30 3H16.4142C16.149 3 15.8946 2.89464 15.7071 2.70711L14.2929 1.29289C14.1054 1.10536 13.851 1 13.5858 1H1ZM10 15.9954V24.0046C10 24.5543 10.4558 25 11.0025 25H20.9975C21.5512 25 22 24.5443 22 24.0046V15.9954C22 15.4457 21.5561 15 21 15H20V13C20 10.794 18.2053 9 16 9C13.794 9 12 10.794 12 13V15H11C10.4477 15 10 15.4557 10 15.9954ZM16 11C14.8968 11 14 12.1215 14 13.5V15H18V13.5C18 12.1215 17.1028 11 16 11ZM17.5 19C17.5 18.172 16.8265 17.5 16 17.5C15.172 17.5 14.5 18.172 14.5 19C14.5 19.552 14.803 20.032 15.25 20.29V22.75C15.25 23.1625 15.586 23.5 16 23.5C16.4125 23.5 16.75 23.1625 16.75 22.75V20.29C17.1955 20.032 17.5 19.552 17.5 19Z", fill: "#297EF2" })));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EncryptedFolderIcon);


}),
"./node_modules/cozy-search/dist/components/Search/SearchBar.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_providers_Breakpoints__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/Breakpoints/index.js");
/* ESM import */var _SearchBarDesktop__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/SearchBarDesktop.js");
/* ESM import */var _SearchBarMobile__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/SearchBarMobile.js");
/* ESM import */var _SearchProvider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/SearchProvider.js");





const SearchBar = ({ componentsProps }) => {
    const { isMobile } = (0,cozy_ui_transpiled_react_providers_Breakpoints__WEBPACK_IMPORTED_MODULE_4__.useBreakpoints)();
    const [inputValue, setInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');
    const { clearSearch, setSelectedIndex, delayedSetSearchValue } = (0,_SearchProvider__WEBPACK_IMPORTED_MODULE_3__.useSearch)();
    const handleClear = () => {
        setInputValue('');
        clearSearch();
    };
    const handleChange = ev => {
        setSelectedIndex(0);
        delayedSetSearchValue(ev.target.value);
        setInputValue(ev.target.value);
    };
    if (isMobile) {
        return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_SearchBarMobile__WEBPACK_IMPORTED_MODULE_2__["default"], { value: inputValue, onClear: handleClear, onChange: handleChange }));
    }
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_SearchBarDesktop__WEBPACK_IMPORTED_MODULE_1__["default"], Object.assign({}, componentsProps === null || componentsProps === void 0 ? void 0 : componentsProps.SearchBarDesktop, { value: inputValue, onClear: handleClear, onChange: handleChange })));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SearchBar);


}),
"./node_modules/cozy-search/dist/components/Search/SearchBarDesktop.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/classnames/index.js");
/* ESM import */var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var cozy_ui_transpiled_react_ClickAwayListener__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/ClickAwayListener/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icon/index.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_Magnifier__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/Magnifier.js");
/* ESM import */var cozy_ui_transpiled_react_SearchBar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/SearchBar/index.js");
/* ESM import */var _AssistantButton__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/AssistantButton.js");
/* ESM import */var _SearchProvider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/SearchProvider.js");
/* ESM import */var _styles_styl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/styles.styl");
/* ESM import */var _ResultMenu_ResultMenu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-search/dist/components/ResultMenu/ResultMenu.js");
/* ESM import */var _helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-search/dist/components/helpers.js");











const SearchBarDesktop = ({ value, onClear, onChange, elevation, size, hasHalfBorderRadius, className, disabledHover }) => {
    const { searchValue, results, selectedIndex, setSelectedIndex } = (0,_SearchProvider__WEBPACK_IMPORTED_MODULE_3__.useSearch)();
    const searchRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();
    const listRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();
    const handleKeyDown = ev => {
        var _a, _b;
        const listElementCount = (_a = listRef.current) === null || _a === void 0 ? void 0 : _a.childElementCount;
        if (ev.key === 'ArrowDown') {
            ev.preventDefault();
            if (selectedIndex === listElementCount - 1) {
                setSelectedIndex(0);
            }
            else {
                setSelectedIndex(v => v + 1);
            }
        }
        if (ev.key === 'ArrowUp') {
            ev.preventDefault();
            if (selectedIndex === 0) {
                setSelectedIndex(listElementCount - 1);
            }
            else {
                setSelectedIndex(v => v - 1);
            }
        }
        if (ev.key === 'Escape') {
            ev.preventDefault();
            onClear();
        }
        if (ev.key === 'Enter') {
            ev.preventDefault();
            if (selectedIndex !== undefined) {
                const onClickFn = (_b = results === null || results === void 0 ? void 0 : results[selectedIndex]) === null || _b === void 0 ? void 0 : _b.onClick;
                onClear();
                onClickFn();
            }
        }
    };
    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(cozy_ui_transpiled_react_ClickAwayListener__WEBPACK_IMPORTED_MODULE_7__["default"], { onClickAway: onClear },
        react__WEBPACK_IMPORTED_MODULE_1___default().createElement("span", null,
            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(cozy_ui_transpiled_react_SearchBar__WEBPACK_IMPORTED_MODULE_8__["default"], { elevation: elevation, className: classnames__WEBPACK_IMPORTED_MODULE_0___default()(className, searchValue && hasHalfBorderRadius
                    ? _styles_styl__WEBPACK_IMPORTED_MODULE_4__["default"]["searchBarDesktop--result"]
                    : ''), ref: searchRef, size: size, icon: size === 'large' ? (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_9__["default"], { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('u-mh-1', _styles_styl__WEBPACK_IMPORTED_MODULE_4__["default"]["search-bar-icon"]), icon: cozy_ui_transpiled_react_Icons_Magnifier__WEBPACK_IMPORTED_MODULE_10__["default"], size: 24 })) : (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(cozy_ui_transpiled_react_Icon__WEBPACK_IMPORTED_MODULE_9__["default"], { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('u-ml-1 u-mr-half', _styles_styl__WEBPACK_IMPORTED_MODULE_4__["default"]["search-bar-icon"]), icon: cozy_ui_transpiled_react_Icons_Magnifier__WEBPACK_IMPORTED_MODULE_10__["default"], size: 16 })), value: value, componentsProps: {
                    inputBase: {
                        onKeyDown: handleKeyDown,
                        endAdornment: (0,_helpers__WEBPACK_IMPORTED_MODULE_6__.isAssistantEnabled)() && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_AssistantButton__WEBPACK_IMPORTED_MODULE_2__.AssistantButton, { size: size }))
                    }
                }, disabledClear: true, disabledFocus: value !== '', disabledHover: disabledHover, onChange: onChange }),
            searchValue && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_ResultMenu_ResultMenu__WEBPACK_IMPORTED_MODULE_5__["default"], { listRef: listRef, anchorRef: searchRef, onClear: onClear })))));
};
SearchBarDesktop.defaultProps = {
    size: 'large',
    elevation: 0
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SearchBarDesktop);


}),
"./node_modules/cozy-search/dist/components/Search/SearchBarMobile.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_ui_transpiled_react_SearchBar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/SearchBar/index.js");
/* ESM import */var _Conversations_styles_styl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/styles.styl");



const SearchBarMobile = ({ value, onClear, onChange }) => {
    const handleClear = () => {
        onClear();
    };
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_SearchBar__WEBPACK_IMPORTED_MODULE_2__["default"], { className: _Conversations_styles_styl__WEBPACK_IMPORTED_MODULE_1__["default"].conversationBar, size: "auto", icon: null, value: value, componentsProps: {
            inputBase: {
                inputProps: {
                    className: _Conversations_styles_styl__WEBPACK_IMPORTED_MODULE_1__["default"]["conversationBar-input"]
                },
                autoFocus: true
            }
        }, onChange: onChange, onClear: handleClear }));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SearchBarMobile);


}),
"./node_modules/cozy-search/dist/components/Search/SearchProvider.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  SearchContext: () => (SearchContext),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__),
  useSearch: () => (useSearch)
});
/* ESM import */var lodash_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/lodash/debounce.js");
/* ESM import */var lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var _useFetchResult__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/useFetchResult.js");



const SearchContext = react__WEBPACK_IMPORTED_MODULE_1___default().createContext();
const useSearch = () => {
    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(SearchContext);
    if (!context) {
        throw new Error('useSearch must be used within a SearchProvider');
    }
    return context;
};
const SearchProvider = ({ children, searchOptions = {} }) => {
    const [searchValue, setSearchValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');
    const [selectedIndex, setSelectedIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();
    const { isLoading, results } = (0,_useFetchResult__WEBPACK_IMPORTED_MODULE_2__.useFetchResult)(searchValue, searchOptions);
    const delayedSetSearchValue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default()(setSearchValue, 250), [setSearchValue]);
    const clearSearch = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {
        setSearchValue('');
        setSelectedIndex();
    }, []);
    const value = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => ({
        searchValue,
        setSearchValue,
        delayedSetSearchValue,
        isLoading,
        clearSearch,
        selectedIndex,
        setSelectedIndex,
        results
    }), [
        searchValue,
        delayedSetSearchValue,
        isLoading,
        clearSearch,
        selectedIndex,
        results
    ]);
    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(SearchContext.Provider, { value: value }, children));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (react__WEBPACK_IMPORTED_MODULE_1___default().memo(SearchProvider));


}),
"./node_modules/cozy-search/dist/components/Search/getFileMimetype.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getFileMimetype: () => (getFileMimetype)
});
/* ESM import */var mime_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/cozy-search/node_modules/mime-types/index.js");

const getMimetypeFromFilename = name => {
    return mime_types__WEBPACK_IMPORTED_MODULE_0__.lookup(name) || 'application/octet-stream';
};
const mappingMimetypeSubtype = {
    word: 'text',
    text: 'text',
    zip: 'zip',
    pdf: 'pdf',
    spreadsheet: 'sheet',
    excel: 'sheet',
    sheet: 'sheet',
    presentation: 'slide',
    powerpoint: 'slide'
};
const getFileMimetype = collection => (mime = '', name = '') => {
    const mimetype = mime === 'application/octet-stream'
        ? getMimetypeFromFilename(name.toLowerCase())
        : mime;
    const [type, subtype] = mimetype.split('/');
    if (collection[type]) {
        return type;
    }
    if (type === 'application') {
        const existingType = subtype.match(Object.keys(mappingMimetypeSubtype).join('|'));
        return existingType ? mappingMimetypeSubtype[existingType[0]] : undefined;
    }
    return undefined;
};


}),
"./node_modules/cozy-search/dist/components/Search/getIconForSearchResult.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getDriveMimeTypeIcon: () => (getDriveMimeTypeIcon),
  getIconForSearchResult: () => (getIconForSearchResult)
});
/* ESM import */var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/lodash/get.js");
/* ESM import */var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var cozy_client_dist_models_file__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/cozy-client/dist/models/file.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_Contacts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/Contacts.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeAudio__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeAudio.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeBin__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeBin.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeCode__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeCode.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeFiles__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeFiles.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeFolder__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeFolder.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeImage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeImage.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeNote__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeNote.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypePdf__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypePdf.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeSheet__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeSheet.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeSlide__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeSlide.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeText__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeText.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeVideo__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeVideo.js");
/* ESM import */var cozy_ui_transpiled_react_Icons_FileTypeZip__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/Icons/FileTypeZip.js");
/* ESM import */var _Icons_DocsIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/Icons/DocsIcon.js");
/* ESM import */var _Icons_EncryptedFolderIcon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/Icons/EncryptedFolderIcon.js");
/* ESM import */var _getFileMimetype__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/getFileMimetype.js");



















const getIconForSearchResult = searchResult => {
    if (searchResult.doc._type === 'io.cozy.apps') {
        return {
            type: 'app',
            app: searchResult.doc
        };
    }
    if (searchResult.slug === 'notes') {
        return {
            type: 'component',
            component: cozy_ui_transpiled_react_Icons_FileTypeNote__WEBPACK_IMPORTED_MODULE_4__["default"]
        };
    }
    if (searchResult.slug === 'drive') {
        return {
            type: 'component',
            component: getDriveMimeTypeIcon(searchResult.doc)
        };
    }
    if (searchResult.slug === 'contacts') {
        return {
            type: 'component',
            component: cozy_ui_transpiled_react_Icons_Contacts__WEBPACK_IMPORTED_MODULE_5__["default"]
        };
    }
    return {
        type: 'component',
        component: cozy_ui_transpiled_react_Icons_FileTypeFiles__WEBPACK_IMPORTED_MODULE_6__["default"]
    };
};
/**
 * Returns the appropriate icon for a given file based on its mime type and other properties.
 *
 * This method has been copied from cozy-drive
 *
 * See source: https://github.com/cozy/cozy-drive/blob/fbe2df67199683b23a40f476ccdacb00ee027459/src/lib/getMimeTypeIcon.js
 *
 * @param {import('cozy-client/types/types').IOCozyFile} file - The io.cozy.files .
 * @param {Object} [options] - Additional options.
 * @param {boolean} [options.isEncrypted] - Indicates whether the file is encrypted. Default is false.
 * @returns {import('react').ReactNode} - The icon corresponding to the file's mime type.
 */
const getDriveMimeTypeIcon = (file, { isEncrypted = false } = {}) => {
    const isDirectory = file.type === 'directory';
    const { name, mime } = file;
    if (isEncrypted) {
        return _Icons_EncryptedFolderIcon__WEBPACK_IMPORTED_MODULE_2__["default"];
    }
    if (isDirectory) {
        return cozy_ui_transpiled_react_Icons_FileTypeFolder__WEBPACK_IMPORTED_MODULE_7__["default"];
    }
    else if ((0,cozy_client_dist_models_file__WEBPACK_IMPORTED_MODULE_8__.isNote)(file)) {
        return cozy_ui_transpiled_react_Icons_FileTypeNote__WEBPACK_IMPORTED_MODULE_4__["default"];
    }
    else if ((0,cozy_client_dist_models_file__WEBPACK_IMPORTED_MODULE_8__.isDocs)(file)) {
        return _Icons_DocsIcon__WEBPACK_IMPORTED_MODULE_1__["default"];
    }
    else {
        const iconsByMimeType = {
            audio: cozy_ui_transpiled_react_Icons_FileTypeAudio__WEBPACK_IMPORTED_MODULE_9__["default"],
            bin: cozy_ui_transpiled_react_Icons_FileTypeBin__WEBPACK_IMPORTED_MODULE_10__["default"],
            code: cozy_ui_transpiled_react_Icons_FileTypeCode__WEBPACK_IMPORTED_MODULE_11__["default"],
            image: cozy_ui_transpiled_react_Icons_FileTypeImage__WEBPACK_IMPORTED_MODULE_12__["default"],
            pdf: cozy_ui_transpiled_react_Icons_FileTypePdf__WEBPACK_IMPORTED_MODULE_13__["default"],
            slide: cozy_ui_transpiled_react_Icons_FileTypeSlide__WEBPACK_IMPORTED_MODULE_14__["default"],
            sheet: cozy_ui_transpiled_react_Icons_FileTypeSheet__WEBPACK_IMPORTED_MODULE_15__["default"],
            text: cozy_ui_transpiled_react_Icons_FileTypeText__WEBPACK_IMPORTED_MODULE_16__["default"],
            video: cozy_ui_transpiled_react_Icons_FileTypeVideo__WEBPACK_IMPORTED_MODULE_17__["default"],
            zip: cozy_ui_transpiled_react_Icons_FileTypeZip__WEBPACK_IMPORTED_MODULE_18__["default"]
        };
        const type = (0,_getFileMimetype__WEBPACK_IMPORTED_MODULE_3__.getFileMimetype)(iconsByMimeType)(mime, name);
        return lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(iconsByMimeType, type, cozy_ui_transpiled_react_Icons_FileTypeFiles__WEBPACK_IMPORTED_MODULE_6__["default"]);
    }
};


}),
"./node_modules/cozy-search/dist/components/Search/useFetchResult.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  useFetchResult: () => (useFetchResult)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/react-router/dist/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-client/dist/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_4__);
/* ESM import */var cozy_dataproxy_lib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-dataproxy-lib/dist/index.js");
/* ESM import */var cozy_minilog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-minilog/dist/web/index.js");
/* ESM import */var cozy_minilog__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(cozy_minilog__WEBPACK_IMPORTED_MODULE_2__);
/* ESM import */var _getIconForSearchResult__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/getIconForSearchResult.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};






const log = cozy_minilog__WEBPACK_IMPORTED_MODULE_2___default()(' [useFetchResult]');
const searchWithRetry = (dataProxy_1, searchValue_1, ...args_1) => __awaiter(void 0, [dataProxy_1, searchValue_1, ...args_1], void 0, function* (dataProxy, searchValue, options = {}) {
    const { maxRetries = 5, delay = 500 } = options, searchOptions = __rest(options, ["maxRetries", "delay"]);
    let currentDelay = delay;
    // Make several search attemps in case it is not ready yet
    for (let attempt = 0; attempt < maxRetries; attempt++) {
        const searchResults = yield dataProxy.search(searchValue, searchOptions);
        if (searchResults) {
            // A successful search will return an array, and null otherwise
            return searchResults;
        }
        log.info(`Search attempt ${attempt + 1} failed, retrying in ${currentDelay} ms...`);
        yield new Promise(resolve => setTimeout(resolve, currentDelay));
        currentDelay *= 2; // Exponential backoff
    }
    log.error(`Search failed after ${maxRetries} attempts`);
    return [];
});
const useFetchResult = (searchValue, searchOptions = {}) => {
    const client = (0,cozy_client__WEBPACK_IMPORTED_MODULE_4__.useClient)();
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_5__.useNavigate)();
    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({
        isLoading: true,
        results: null,
        searchValue: null
    });
    const dataProxy = (0,cozy_dataproxy_lib__WEBPACK_IMPORTED_MODULE_1__.useDataProxy)();
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
        const fetch = (searchValue, searchOptions) => __awaiter(void 0, void 0, void 0, function* () {
            if (!dataProxy.dataProxyServicesAvailable) {
                log.log('DataProxy services are not available. Skipping search...');
                return;
            }
            setState({ isLoading: true, results: null, searchValue });
            const searchResults = yield searchWithRetry(dataProxy, searchValue, searchOptions);
            const results = searchResults.map(r => {
                // Begin Retrocompatibility code, to be removed when following PR is merged: https://github.com/cozy/cozy-web-data-proxy/pull/10
                r.slug = r.slug || r.type;
                r.subTitle = r.subTitle || r.name;
                // End Retrocompatibility code
                const icon = (0,_getIconForSearchResult__WEBPACK_IMPORTED_MODULE_3__.getIconForSearchResult)(r);
                return {
                    id: r.doc._id,
                    icon: icon,
                    slug: r.slug,
                    url: r.url,
                    secondaryUrl: r.secondaryUrl,
                    primary: r.title,
                    secondary: r.subTitle,
                    onClick: () => {
                        if (r.slug === client.appMetadata.slug) {
                            try {
                                const url = new URL(r.url);
                                const hash = url.hash.replace('#', '');
                                navigate(hash);
                            }
                            catch (_a) {
                                window.open(r.url);
                            }
                        }
                        else {
                            window.open(r.url);
                        }
                    }
                };
            });
            setState({ isLoading: false, results, searchValue });
        });
        if (searchValue) {
            if (searchValue !== state.searchValue) {
                fetch(searchValue, searchOptions);
            }
        }
        else {
            setState({ isLoading: true, results: null, searchValue: null });
        }
    }, [dataProxy, searchValue, state.searchValue, setState]);
    return {
        isLoading: state.isLoading,
        results: state.results
    };
};


}),
"./node_modules/cozy-search/dist/components/Views/AssistantDialog.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/react-router/dist/index.js");
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/react-router-dom/dist/index.js");
/* ESM import */var cozy_ui_transpiled_react_CozyDialogs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/CozyDialogs/FixedDialog.js");
/* ESM import */var cozy_ui_transpiled_react_providers_Breakpoints__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/Breakpoints/index.js");
/* ESM import */var cozy_ui_transpiled_react_providers_CozyTheme__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/CozyTheme/index.js");
/* ESM import */var _AssistantProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantProvider.js");
/* ESM import */var _Conversations_Conversation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/Conversation.js");
/* ESM import */var _Conversations_ConversationBar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ConversationBar.js");
/* ESM import */var _Conversations_ConversationLayout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-search/dist/components/Conversations/ConversationLayout.js");









const AssistantDialog = () => {
    const { assistantState } = (0,_AssistantProvider__WEBPACK_IMPORTED_MODULE_1__.useAssistant)();
    const { isMobile } = (0,cozy_ui_transpiled_react_providers_Breakpoints__WEBPACK_IMPORTED_MODULE_5__.useBreakpoints)();
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_6__.useNavigate)();
    const [searchParams] = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_7__.useSearchParams)();
    const { conversationId } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_6__.useParams)();
    const onClose = () => {
        try {
            const returnPath = searchParams.get('returnPath');
            if (returnPath) {
                navigate(returnPath);
            }
            else {
                navigate('..');
            }
        }
        catch (_a) {
            navigate('..');
        }
    };
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_CozyDialogs__WEBPACK_IMPORTED_MODULE_8__["default"], { open: true, fullScreen: true, size: "full", componentsProps: {
            dialogTitle: { className: 'u-dn' },
            dialogActions: { className: 'u-dn' },
            dialogContent: { className: 'u-p-0' },
            divider: { className: 'u-dn' }
        }, disableGutters: true, title: isMobile ? '' : ' ', content: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Conversations_ConversationLayout__WEBPACK_IMPORTED_MODULE_4__["default"], { conversationId: conversationId, assistantState: assistantState }), onClose: onClose }));
};
const AssistantDialogWithProviders = () => {
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_providers_CozyTheme__WEBPACK_IMPORTED_MODULE_9__["default"], { variant: "normal" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_AssistantProvider__WEBPACK_IMPORTED_MODULE_1__["default"], null,
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(AssistantDialog, null))));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistantDialogWithProviders);


}),
"./node_modules/cozy-search/dist/components/Views/SearchDialog.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/react-router/dist/index.js");
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/react-router-dom/dist/index.js");
/* ESM import */var cozy_ui_transpiled_react_CozyDialogs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/CozyDialogs/FixedDialog.js");
/* ESM import */var cozy_ui_transpiled_react_providers_CozyTheme__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/CozyTheme/index.js");
/* ESM import */var cozy_ui_transpiled_react_providers_I18n_useExtendI18n__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/cozy-ui/transpiled/react/providers/I18n/useExtendI18n.js");
/* ESM import */var _locales__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/locales/index.js");
/* ESM import */var _AssistantProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantProvider.js");
/* ESM import */var _ResultMenu_ResultMenuContent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/ResultMenu/ResultMenuContent.js");
/* ESM import */var _Search_SearchBar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/SearchBar.js");
/* ESM import */var _Search_SearchProvider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/SearchProvider.js");











const SearchDialog = () => {
    (0,cozy_ui_transpiled_react_providers_I18n_useExtendI18n__WEBPACK_IMPORTED_MODULE_6__["default"])(_locales__WEBPACK_IMPORTED_MODULE_1__.locales);
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_7__.useNavigate)();
    const [searchParams] = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_8__.useSearchParams)();
    const { searchValue } = (0,_Search_SearchProvider__WEBPACK_IMPORTED_MODULE_5__.useSearch)();
    const onClose = () => {
        try {
            const returnPath = searchParams.get('returnPath');
            if (returnPath) {
                navigate(returnPath);
            }
            else {
                navigate('..');
            }
        }
        catch (_a) {
            navigate('..');
        }
    };
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_CozyDialogs__WEBPACK_IMPORTED_MODULE_9__["default"], { open: true, fullScreen: true, size: "full", disableGutters: true, componentsProps: {
            // don't touch padding-top in dialogTitle, there is a flagship override. Play with margin instead.
            dialogTitle: { className: 'u-ph-half u-pb-0 u-mt-2-half u-ov-visible' },
            divider: { className: 'u-dn' }
        }, title: react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Search_SearchBar__WEBPACK_IMPORTED_MODULE_4__["default"], null), content: searchValue && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ResultMenu_ResultMenuContent__WEBPACK_IMPORTED_MODULE_3__["default"], null), onClose: onClose }));
};
const SearchDialogWithProviders = () => {
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(cozy_ui_transpiled_react_providers_CozyTheme__WEBPACK_IMPORTED_MODULE_10__["default"], { variant: "normal" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_AssistantProvider__WEBPACK_IMPORTED_MODULE_2__["default"], null,
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Search_SearchProvider__WEBPACK_IMPORTED_MODULE_5__["default"], null,
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(SearchDialog, null)))));
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SearchDialogWithProviders);


}),
"./node_modules/cozy-search/dist/components/queries.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  CHAT_CONVERSATIONS_DOCTYPE: () => (CHAT_CONVERSATIONS_DOCTYPE),
  CHAT_EVENTS_DOCTYPE: () => (CHAT_EVENTS_DOCTYPE),
  FILES_DOCTYPE: () => (FILES_DOCTYPE),
  buildChatConversationQueryById: () => (buildChatConversationQueryById),
  buildFilesByIds: () => (buildFilesByIds),
  buildMyselfQuery: () => (buildMyselfQuery),
  buildRecentConversationsQuery: () => (buildRecentConversationsQuery)
});
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/cozy-client/dist/index.js");
/* ESM import */var cozy_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_0__);

const CONTACTS_DOCTYPE = 'io.cozy.contacts';
const CHAT_CONVERSATIONS_DOCTYPE = 'io.cozy.ai.chat.conversations';
const CHAT_EVENTS_DOCTYPE = 'io.cozy.ai.chat.events';
const FILES_DOCTYPE = 'io.cozy.files';
const defaultFetchPolicy = cozy_client__WEBPACK_IMPORTED_MODULE_0__.fetchPolicies.olderThan(86400); // 24 hours
const buildFilesByIds = ids => {
    return {
        definition: (0,cozy_client__WEBPACK_IMPORTED_MODULE_0__.Q)(FILES_DOCTYPE).getByIds(ids),
        options: {
            as: `${FILES_DOCTYPE}/${ids.join('')}`,
            fetchPolicy: defaultFetchPolicy
        }
    };
};
const buildChatConversationQueryById = id => {
    return {
        definition: (0,cozy_client__WEBPACK_IMPORTED_MODULE_0__.Q)(CHAT_CONVERSATIONS_DOCTYPE).getById(id),
        options: {
            as: `${CHAT_CONVERSATIONS_DOCTYPE}/${id}`,
            fetchPolicy: defaultFetchPolicy,
            singleDocData: true
        }
    };
};
const buildMyselfQuery = () => {
    return {
        definition: (0,cozy_client__WEBPACK_IMPORTED_MODULE_0__.Q)(CONTACTS_DOCTYPE).where({ me: true }),
        options: {
            as: `${CONTACTS_DOCTYPE}/myself`,
            fetchPolicy: defaultFetchPolicy
        }
    };
};
const buildRecentConversationsQuery = () => ({
    definition: () => (0,cozy_client__WEBPACK_IMPORTED_MODULE_0__.Q)(CHAT_CONVERSATIONS_DOCTYPE)
        .where({
        // TODO : fix
        'cozyMetadata.updatedAt': { $gt: new Date("1999-01-01T00:00:00Z") },
    })
        .indexFields([
        'cozyMetadata.updatedAt'
    ])
        .sortBy([{ 'cozyMetadata.updatedAt': 'desc' }])
        .limitBy(50),
    options: {
        as: CHAT_CONVERSATIONS_DOCTYPE + '/recent',
        fetchPolicy: defaultFetchPolicy
    }
});


}),
"./node_modules/cozy-search/dist/index.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  AssistantDesktop: () => (/* reexport safe */ _components_AssistantDesktop__WEBPACK_IMPORTED_MODULE_1__["default"]),
  AssistantDialog: () => (/* reexport safe */ _components_Views_AssistantDialog__WEBPACK_IMPORTED_MODULE_3__["default"]),
  AssistantLink: () => (/* reexport safe */ _components_Search_AssistantLink__WEBPACK_IMPORTED_MODULE_0__["default"]),
  AssistantMobile: () => (/* reexport safe */ _components_AssistantMobile__WEBPACK_IMPORTED_MODULE_2__["default"]),
  SearchDialog: () => (/* reexport safe */ _components_Views_SearchDialog__WEBPACK_IMPORTED_MODULE_4__["default"])
});
/* ESM import */var _components_Search_AssistantLink__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/cozy-search/dist/components/Search/AssistantLink.js");
/* ESM import */var _components_AssistantDesktop__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantDesktop.js");
/* ESM import */var _components_AssistantMobile__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/components/AssistantMobile.js");
/* ESM import */var _components_Views_AssistantDialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/components/Views/AssistantDialog.js");
/* ESM import */var _components_Views_SearchDialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/cozy-search/dist/components/Views/SearchDialog.js");







}),
"./node_modules/cozy-search/dist/locales/index.js": (function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  locales: () => (locales)
});
/* ESM import */var _en_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/cozy-search/dist/locales/en.json");
/* ESM import */var _fr_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/cozy-search/dist/locales/fr.json");
/* ESM import */var _ru_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/cozy-search/dist/locales/ru.json");
/* ESM import */var _vi_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/cozy-search/dist/locales/vi.json");




const locales = { en: _en_json__WEBPACK_IMPORTED_MODULE_0__, fr: _fr_json__WEBPACK_IMPORTED_MODULE_1__, ru: _ru_json__WEBPACK_IMPORTED_MODULE_2__, vi: _vi_json__WEBPACK_IMPORTED_MODULE_3__ };


}),
"./node_modules/cozy-search/dist/locales/en.json": (function (module) {
module.exports = JSON.parse('{"assistant":{"search":{"placeholder":"Any question?","send":"Send","noItem":"No results","notEnough":"Your query must contain at least 3 characters"},"conversationBar":{"startMessage":"What can I do for you?","newChat":"New chat","more":{"experts":"more experts","knowledge_bases":"more knowledge bases"}},"conversationList":{"recentConversations":"Recent conversations"},"experts":{"legal":"Legal","financial":"Financial","image_creation":"Image creation","marketing":"Marketing","code_assistant":"Code assistant","brainstorming":"Brainstorming","travel_planner":"Travel planner","fitness_coach":"Fitness coach","recipe_suggester":"Recipe suggester","web_search":"Web search","external_warning":{"title":"External expert selected","description":"Be careful with the selected knowledge bases","know_more":"Know more"}},"knowledge_bases":{"twake_knowledge":"My Twake","web":"Web","linagora_client":"Linagora Client Base","security_procedures":"Security","other":"Other knowledge base"},"dialog":{"close":"Close"},"name":"Twake Assistant","default_username":"Anonymous","sources":"%{smart_count} source |||| %{smart_count} sources","suggestions":{"find_file":"Search a file","reimbursements":"Check my repayments","reorganise_files":"Reorganise my files"}}}')

}),
"./node_modules/cozy-search/dist/locales/fr.json": (function (module) {
module.exports = JSON.parse('{"assistant":{"search":{"placeholder":"Une question ?","send":"Envoyer","noItem":"Aucun rsultat","notEnough":"Votre recherche doit contenir au moins 3 caractres"},"conversationBar":{"startMessage":"Comment puis-je vous aider ?","newChat":"Nouveau","more":{"experts":"autres expertises","knowledge_bases":"autres bases de connaissances"}},"conversationList":{"recentConversations":"Conversations rcentes"},"experts":{"legal":"Juridique","financial":"Financier","image_creation":"Cration d\'images","marketing":"Marketing","code_assistant":"Assistant de code","brainstorming":"Brainstorming","travel_planner":"Planificateur de voyage","fitness_coach":"Coach sportif","recipe_suggester":"Suggestions de recettes","web_search":"Recherche web","external_warning":{"title":"Expert externe slectionn","description":"Attention aux bases de donnes slectionnes.","know_more":"En savoir plus"}},"knowledge_bases":{"twake_knowledge":"My Twake","web":"Web","linagora_client":"Base clients Linagora","security_procedures":"Scurit","other":"Autre base de connaissances"},"dialog":{"close":"Fermer"},"name":"Assistant Twake","default_username":"Anonyme","sources":"%{smart_count} source |||| %{smart_count} sources","suggestions":{"find_file":"Rechercher un fichier","reimbursements":"Vrifier mes remboursements","reorganise_files":"Rorganiser mes fichiers"}}}')

}),
"./node_modules/cozy-search/dist/locales/ru.json": (function (module) {
module.exports = JSON.parse('{"assistant":{"search":{"placeholder":" ?","send":"","noItem":" ","notEnough":"      3 "},"dialog":{"close":""},"name":" Twake","default_username":"","sources":"%{smart_count}  |||| %{smart_count}  |||| %{smart_count} ","suggestions":{"find_file":" ","reimbursements":"  ","reorganise_files":"  "}}}')

}),
"./node_modules/cozy-search/dist/locales/vi.json": (function (module) {
module.exports = JSON.parse('{"assistant":{"search":{"placeholder":"C cu hi no khng?","send":"Gi","noItem":"Khng c kt qu","notEnough":"Truy vn ca bn phi cha t nht 3 k t"},"dialog":{"close":"ng"},"name":"Tr l Twake","default_username":"n danh","sources":"%{smart_count} ngun |||| %{smart_count} ngun","suggestions":{"find_file":"Tm mt tp","reimbursements":"Kim tra cc khon hon tr ca ti","reorganise_files":"Sp xp li cc tp ca ti"}}}')

}),

});
//# sourceMappingURL=cozy.dade927e100ce80f.hot-update.js.map